//15.138.1-es2019 2025-10-16T07:16:46.070Z (1ac4751f8d46d)
var CS_CONF={"collectionEnabled":true,"projectId":81584,"status":1,"hostnames":["riu.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":1745830191,"trackerDomain":"c.az.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":1,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":1,"recordingEncryptionEnabled":1,"recordingEncryptionPublicKey":"MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAzi9hnXhHPQE0YnByCaS3jRBkEeK4YNRaulLckdRkQ8FNsb70avg2jEoQH7BDXOMGNDQ5tPWVf1pCZSRvokJvUAv/RK+HsfkITNLqLsG+30AHm4d+LCmcQyrtP8GDlZqnu1H/YsMWMTe/F1Qu3O2Ezx4x50JnEnTDXrgHuN5/AuiC500L1Ul5gRyivmquFmp5u8eU+6JzoEoDmX2k26p4m73MGfAkmXmGSrmPIUpwMGTKLT2KzeU739vbW2hr1bp8qAhohG4obP94ccmFNjKfOwKGzxDVMzfj7c5b8xMcuhzg+Q1tWPgWUGEi/Idaj7qAhmgIyCJ6lSYQVThMmA9pVuzQmTFKE6XKf7BMKkTieoAsFvtceUMs3eB7vDzEc2rkjWss5Sr0oU1jRfR4SbexQzxBYKIMFTb1ZIya7Dw0K24lkTHVCnMpaFEQwMqABG1f1Cz+efJYWUSM+HDh0eD7voiRVJBQTlJBnMomUwqLXtfLwvKoXyfBTjoFrZ2pY9ktCkX6s+9aqf6ADN9RkW33J0c1A2ey6p+9dJfit/ccinLlkbbPOGxWHcPeqKJ7Tm6iOYQVtX4U+k2jjkjmZPiLz3iKAjHfIt+KLPOgsFWMSqICx3URQb3Edzr16Et0PhiGU8YjzlxY7+NJuMqjpv8RATJ63QZCBen/qEhW7b3W4LMCAwEAAQ==","recordingEncryptionPublicKeyId":5052,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":null,"replayRecordingUnmaskedUrlRegex":"","replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"","anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":1,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":1,"useStaticResourceManager":1,"performanceTimingOptions":{"withNavigation":true,"withResource":true},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":1,"collectHierarchy":1,"collectSubmit":1,"collectTargetText":1,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[{"bodyAttributePaths":[{"path":"errors[0].message","encrypted":0,"primary":0,"type":"response"}],"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"customHeaders":[],"url":"graphql","statusCode":200,"bodyContent":"errors\":"},{"bodyAttributePaths":[],"collectQueryParam":1,"collectRequestBody":1,"collectResponseBody":1,"customHeaders":[{"headerName":":authority:","encrypted":0,"type":"request"},{"headerName":":path:","encrypted":0,"type":"request"},{"headerName":"access-control-allow-origin:","encrypted":0,"type":"response"}],"url":"lb-g.riu.com","statusCode":200,"bodyContent":"data"},{"bodyAttributePaths":[],"collectQueryParam":1,"collectRequestBody":1,"collectResponseBody":1,"customHeaders":[{"headerName":"access-control-allow-origin:","encrypted":0,"type":"response"},{"headerName":":path:","encrypted":0,"type":"request"},{"headerName":" :authority:","encrypted":0,"type":"request"}],"url":"https://www.riu.com/consultar-disponibilidad!execute.action","statusCode":200,"bodyContent":"riu.com"},{"bodyAttributePaths":[],"collectQueryParam":1,"collectRequestBody":1,"collectResponseBody":1,"customHeaders":[{"headerName":":path","encrypted":1,"type":"request"},{"headerName":":authority","encrypted":1,"type":"request"},{"headerName":"access-control-allow-origin","encrypted":1,"type":"response"}],"url":"https://www.riu.com/riuclass-utils!confirmarAltaCuenta.action","statusCode":200,"bodyContent":"link"},{"bodyAttributePaths":[],"collectQueryParam":1,"collectRequestBody":1,"collectResponseBody":1,"customHeaders":[{"headerName":" :path:","encrypted":0,"type":"request"},{"headerName":":authority:","encrypted":0,"type":"request"},{"headerName":"access-control-allow-origin","encrypted":1,"type":"response"}],"url":"https://www.riu.com/riuclass-utils!altaRcExpress.action","statusCode":200,"bodyContent":"estad"},{"bodyAttributePaths":[],"collectQueryParam":1,"collectRequestBody":1,"collectResponseBody":1,"customHeaders":[{"headerName":"access-control-allow-origin","encrypted":1,"type":"response"},{"headerName":":path","encrypted":1,"type":"request"},{"headerName":":authority","encrypted":1,"type":"request"}],"url":"https://www.riu.com/riuclass-utils!crearCuentaRiuClass.action","statusCode":200,"bodyContent":"link"},{"bodyAttributePaths":[],"collectQueryParam":1,"collectRequestBody":1,"collectResponseBody":1,"customHeaders":[{"headerName":"access-control-allow-origin","encrypted":1,"type":"response"},{"headerName":":path","encrypted":1,"type":"request"},{"headerName":":authority","encrypted":1,"type":"request"}],"url":"https://www.riu.com/login.jsp","statusCode":200,"bodyContent":"username"},{"bodyAttributePaths":[],"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"customHeaders":[{"headerName":"cf-cache-status","encrypted":0,"type":"request"},{"headerName":"cf-ray","encrypted":0,"type":"request"},{"headerName":"x-cache-enabled","encrypted":0,"type":"request"},{"headerName":"x-cache","encrypted":0,"type":"request"},{"headerName":"x-amz-cf-id","encrypted":0,"type":"request"},{"headerName":"x-ray","encrypted":0,"type":"request"},{"headerName":"upgrade","encrypted":0,"type":"request"},{"headerName":"X-Request-Id","encrypted":0,"type":"request"},{"headerName":"x-wix-request-id","encrypted":0,"type":"request"},{"headerName":"X-Pass-Why","encrypted":0,"type":"request"},{"headerName":"x-nginx-cache-status","encrypted":0,"type":"request"},{"headerName":"trace-id","encrypted":0,"type":"request"},{"headerName":"traceparent","encrypted":0,"type":"request"},{"headerName":"X-NewRelic-Transaction","encrypted":0,"type":"request"},{"headerName":"X-Datadog-Trace-ID","encrypted":0,"type":"request"}]}]},"customErrors":{"consoleMessageLogLevels":["Warning","Error","Debug"]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-eu1.az.contentsquare.net","malkaRecordingDomain":"k-eu1.az.contentsquare.net","staticResourceManagerDomain":"srm.aa.contentsquare.net","paProxyDomainUri":"api.us.hp.contentsquare.net","voc":{"siteId":null,"enabled":0},"heapEnvironment":{"env_id":"75360003","heap_tag_status":"cs_crosswrites_heap","heap_storage_location":null},"implementations":[{"template":{"name":"PiiMasking","args":{"cssSelectors":["p.nombreRC,joyned-folding-text,.gamitee-chat-content,[data-qa='bride-first-name'],[data-qa='bride-last-name'],[data-qa='bride-email'],[data-qa='bride-phone'],[data-qa='groom-first-name'],[data-qa='groom-last-name'],[data-qa='groom-email'],[data-qa='groom-phone'],.text-regular.font-size-xl,[data-qa='firstAdult'],[data-qa='secondAdult'],[data-qa='creditCardName'],[name='securefields-f51fun5rj--cardNumber'],[data-qa='invoiceName'],[data-qa='documentNumber'],[data-qa='address'],#postalCode,[data-qa='bride-phone-number'],[data-qa='groom-phone-number']"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural"]}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":["[name='nombre'],[name='apellidos'],[name='emailCont'],[name='numeroDocumento'],[name='apellido2'],[name='codigoPostal'],[name='email'],[name='direccion'],[name='numeroDireccion'],[name='telefono'],.info-pax"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural"]},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","/check-in/"]}]}}]},{"template":{"name":"CustomError","args":{"message":"${element.textContent}","attributes":[{"key":"CSTC Snippet","value":"Text errors"},{"key":"Source","value":"CSTC"},{"key":"Class","value":"${element.className}"},{"key":"Snippet name","value":"Checkout Validation"}]}},"triggers":[{"name":"ElementAdded","args":{"frequency":"always","selector":"riu-modal#riu-booking-modal li.error-info__text"}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":[".o-grid__col.u-ml-4"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural"]},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","/riu-class/personal-area/my-details"]}]}}]},{"template":{"name":"CustomError","args":{"message":"${element.textContent}","attributes":[{"key":"CSTC Snippet","value":"Text errors"},{"key":"Source","value":"CSTC"},{"key":"Class","value":"${element.className}"}]}},"triggers":[{"name":"ElementBecomesVisible","args":{"selector":"[class*='error'i],[class*='warning'i],[class*='alert'i],[class*='danger'i],[class*='failure'i],[id*='error'i],[id*='warning'i],[id*='alert'i],[id*='danger'i],[id*='failure'i]","frequency":"always"},"condition":{"operator":"AND","args":[{"operator":"matches","args":["${window.location.href}","/^(?!.*checkout.*).*/"]}]}}]},{"template":{"name":"ElementUnmasking","args":{"selector":"#errorInfo,#input-promo,[content='searchBar']"}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural"]}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":[".riu-ui-user-dropdown__text.u-truncate.u-color-secondary.riu-ui-user-dropdown__circle,#password_input_input,#new-password_input,#riu-class-password,#riu-class-name,#riu-class-surname,#riu-class-email,#riu-class-password,[formcontrolname='first_name'],[formcontrolname='last_name'],[class='riu-ui-user-dropdown__text u-truncate u-color-secondary u-hidden u-flex@xs'],[data-qa='email'],[data-qa='mobile'],[data-qa='phone'],[data-qa='address'],[formcontrolname='new_last_name'],[formcontrolname='new_first_name'],[formcontrolname='oldPass'],[formcontrolname='newPass'],[formcontrolname='repeatNewPass'],[formcontrolname='document_number'],[inputmode='numeric'],[formcontrolname='expiration_date'],[formcontrolname='account_email'],[formcontrolname=' name'],#userdata-dropdown,.welcomeback,.info-user-rc,#table-beneficiaries,#riuClassButton > span.riu-button__content,#navbarDropdown > .text-truncate,[name='psw'],[name='email']"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural"]}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":[".u-weight-bold.u-m-none"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural"]},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","/riu-class/personal-area/"]}]}}]},{"template":{"name":"ElementUnmasking","args":{"selector":"#name_input_input,#surname_input_input,#email_input_input,[formcontrolname='email']"}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural"]}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":["p.o-type-lg"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural"]},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","/weddings/manage-reservation"]}]}}]},{"template":{"name":"CustomError","args":{"message":"Clicked Book Button","attributes":[{"key":"source","value":"CSTC"}]}},"triggers":[{"name":"ElementClick","args":{"selector":"button#cardRoomBookingButton"},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","/booking/rooms"]}]}}]},{"template":{"name":"ArtificialPageview","args":{"path":"/check-in/habitaciones","lifespan":["on next pageview only"],"decodeURI":"no decoding"}},"triggers":[{"name":"ElementBecomesVisible","args":{"selector":".info-room.d-flex","frequency":"once per pageview"}},{"name":"HistoryChange","args":{"listeners":"popstate, pushState, replaceState, hashchange","useDebounce":"no","window":400},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","check-in/habitaciones"]}]}}]},{"template":{"name":"ArtificialPageview","args":{"path":"/check-in/huespedes","lifespan":["on next pageview only"],"decodeURI":"no decoding"}},"triggers":[{"name":"ElementBecomesVisible","args":{"selector":".container-pax-ind.d-flex","frequency":"once per pageview"}},{"name":"HistoryChange","args":{"listeners":"popstate, pushState, replaceState, hashchange","useDebounce":"no","window":400},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","/check-in/huespedes"]}]}}]},{"template":{"name":"ArtificialPageview","args":{"path":"/check-in/confirmation","lifespan":["on next pageview only"],"decodeURI":"no decoding"}},"triggers":[{"name":"ElementBecomesVisible","args":{"selector":".container-content-confirmation","frequency":"once per pageview"}},{"name":"HistoryChange","args":{"listeners":"popstate, pushState, replaceState, hashchange","useDebounce":"no","window":400},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","/check-in/confirmation"]}]}}]},{"template":{"name":"ArtificialPageview","args":{"path":"/check-in/bookings","lifespan":["on next pageview only"],"decodeURI":"no decoding"}},"triggers":[{"name":"ElementBecomesVisible","args":{"selector":".info-user-rc","frequency":"once per pageview"}},{"name":"HistoryChange","args":{"listeners":"popstate, pushState, replaceState, hashchange","useDebounce":"no","window":400},"condition":{"operator":"AND","args":[{"operator":"contains","args":["${window.location.href}","/check-in/bookings"]}]}}]}],"identityEncryptionKey":"MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAlL8xaiIUlNZLxrm8XMtTLHMbemquLst2omH6itNokm81n/P/KUJdaAJGopwXDj6TL9zrhnJWrxnyVGI6jEbOSw0RMaLahwVVhwtIuTFtcx6VlsKYEZqn+QBTARMiGR46Z0j6/5+w2x439lFueWn+VADuUBWQ7b+wOozD/SBrUTx2lgv0npyv29OLJvLkeCabUWRNBNErx7R+CZ7LUMt74y2xTuYkDR/hEoApBA7O9WGRrCQ97+Jc74NC84Fmh/VkeyBozV8XHKsT7EUxyPFP61cTh6XUP7F+5hPkE+KlprTkwTGx6P3W4aiUQYwD/klFmSJZ0tPYDUNjSYPOuco0sY8rhihf0ZpfvaMog+JMbieuBMG+xG6+wFifZEh9cXwTVbtIuaKMI7unbgiqJrgL15XzHWEeRluWUEcgBPTACVfQbEq8JYyfRyKEzmGyYcsv/cdFx0FegSRI1hdg516pSKpEefWCUcGEvtCAN/V8aTJWam/Jyci9NFfsuNMfd+lNAgMBAAE=","anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","tagVerificationDomain":"tcvsapi.contentsquare.com"};
var CS_INTEGRATIONS_CONF = {"datadog":{}};
/* integration-datadog 3.2.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Datadog","dvarPrefix":"APM_DD_","replayKey":"dd"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-datadog-contentsquare","version":"3.2.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function r(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}function a(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var u=t(0);const c=function(e){let n,t,i,r;if(o((function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";r=new RegExp(u+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(u="-cap",r=new RegExp(u+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),s=c.parameterName,f=c.snippetBuildName,l=c.snippetVersion;o((function(){const e=u.displayName,n=u.dvarPrefix,t=u.replayKey;var c,d;c=e,d=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(c+" - v"+d);const p=i(s,"settings");var w;const g=(w=p,Array.isArray(w)?p:[]).includes("setReplayLinkToCurrentPV");function _(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),a(f,`Dynamic variable with ${e} and value ${t} sent`)}function y(){setTimeout((function(){o((function(){if("function"==typeof DD_RUM.getInternalContext&&"object"==typeof DD_RUM.getInternalContext()){const n=DD_RUM.getInternalContext().session_id;if(n){const t=i(s,"vendorSettings");let o=("object"==typeof(e=t)&&null!==e?t:{}).domain;if(o){o=o.trim(),o=o.replace("http://",""),o=o.replace("https://",""),o=o.replace("/","");let e=new Date;e.setHours(e.getHours()-2),e=Date.parse(e);let t=new Date;t.setHours(t.getHours()+1),t=Date.parse(t);_("Session Link","https://"+o+"/rum/explorer?query=@session.id:"+n+"&tab=session&from_ts="+e+"&to_ts="+t+"&live=true")}_("SessionID",n)}(function(e,n,t,o){return new Promise((function(i,r){function a(){window._uxa.push(["replay:link:generate",{withTimestamp:t},u])}function u(o){if(o&&o.replayLink&&o.isRecording){let r="https://"+o.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(r);e.set("pvid",1);const n=e.toString();r=decodeURIComponent(n)}i(r)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),o?a():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&a()}]))}))})(t,g).then((function(e){o((function(){if(e){const n={ContentsquareReplay:e};"function"==typeof DD_RUM.addUserAction?DD_RUM.addUserAction("Contentsquare",n):"function"==typeof DD_RUM.addAction&&DD_RUM.addAction("Contentsquare",n)}}),f)}))}var e}),f)}),500)}!function(e,n){let t=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(o){n?t||(e(o),t=!0):e(o)}])}((function(e){o((function(){e&&1===e.pageNumber&&function(e,n,t){t=t||window;const o=e.split(".");if(1==o.length)r(e,n,t);else{let e=t,i=0;const a=function(){e=i>0?e[o[i-1]]:window,i++,i>=o.length?r(o[i-1],n,e):r(o[i-1],a,e)};a()}}("DD_RUM",y)}),f)}),!0)}),f)}]);
(()=>{var jp=Object.defineProperty;var Hp=(s,n,t)=>n in s?jp(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var Ue=(s,n,t)=>Hp(s,typeof n!="symbol"?n+"":n,t);var Ce={};Ce.d=(s,n)=>{for(var t in n)Ce.o(n,t)&&!Ce.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:n[t]})};Ce.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();Ce.o=(s,n)=>Object.prototype.hasOwnProperty.call(s,n);Ce.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Uo={};Ce.r(Uo);Ce.d(Uo,{getRequestParameters:()=>XE});function ks(s,n){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(n)]),t!=null?t:s[n]}function wt(s){return J(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Ge(s){return s===parseInt(s,10)}function T(s){return J(s)&&(typeof s=="string"||s instanceof csString)}function Ui(s){return typeof s=="boolean"}function Jt(s){return typeof s=="object"}function J(s){return typeof s!="undefined"}function pt(s){return J(s)&&s!==null}function K(s){return typeof s=="object"&&s!==null}function Bp(s,n,t){return Ge(s)&&s>=n&&s<=t}function oo(s){for(let n in s)return!1;return!0}function $t(s){return typeof s=="function"}function ze(s){return s instanceof Element}function qe(s){return s instanceof Error}function Hn(s){let n=s.length;for(let t=0;t<n;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var qi=typeof window=="undefined";function Fp(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof Ce.g!="undefined"?Ce.g:typeof process!="undefined"?process:Function("return this")()}var st=Fp();var ut=(()=>{let s;return function(n){n.debug="debug",n.warn="warn",n.implementation="implementation",n.error="error",n.critical="critical"}(s||(s={})),s})(),Ir={[ut.debug]:0,[ut.warn]:1,[ut.implementation]:1,[ut.error]:2,[ut.critical]:3},nt={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function $p(s){nt=s}var O=s=>(n,t,e)=>{let i=(t==null?void 0:t.toString())||"",r=s||`${n.constructor&&n.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return gs(r,o.bind(this))(...c)}}};function gs(s,n){return function(...t){try{let e=n.apply(this,t);return J(st.Promise)&&e instanceof st.Promise?e.then(i=>i,i=>nt.error(qe(i)?i:new Error(i),s)):e}catch(e){try{nt.error(qe(e)?e:new Error(e),s)}catch{}}}}function it(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function nr(s){let n=new ArrayBuffer(s.length),t=new Uint8Array(n);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return n}function ao(s){let n=new Uint8Array(s),t="";for(let e=0;e<n.byteLength;e+=1)t+=csString.fromCodePoint(n[e]);return t}function Gp(s){return new Promise((n,t)=>{let e=new csFileReader;e.onload=i=>{var r,o;if(typeof((r=i.target)===null||r===void 0?void 0:r.result)!="string")return t("Unexpected output: "+((o=i.target)===null||o===void 0?void 0:o.result));n(csString.prototype.split.call(i.target.result,",")[1])},e.readAsDataURL(new Blob([s]))})}function Vo(s){let n=self.atob(s);return nr(n)}function Bn(s){let n=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(n,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Ga(s){let n=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=n?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!n&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){nt.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let r=n?Vo(e[1]):nr(e[1]);return new Blob([r],{type:csString.prototype.replace.call(e[0],"data:","")})}var gl=typeof performance!="undefined"&&!!performance.now,za=gl?()=>performance.now():()=>csDate.now(),zp=(()=>{var s,n;return gl?(n=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&n!==void 0?n:Math.floor(performance.timeOrigin):0})(),jo=34164e6,I={now(){return Math.round(za()+zp)},elapsed(){return za()}};function qa(){return Math.floor(I.now()/1e3)}function ml(){return typeof window.Promise=="function"}function Ho(){var s;return typeof crypto!="undefined"&&$t((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Wa(){var s,n;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((n=window.navigation)===null||n===void 0?void 0:n.removeEventListener)=="function"}function Tt(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function di(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}async function Ya(s,n){return Bn(await window.crypto.subtle.digest(s,n))}var qp=Number.MAX_SAFE_INTEGER||9007199254740991,Oe={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=qp){return Math.floor(Math.random()*s)}};function ii(s,n){let t,e,i,r,o,c=null,l=p=>{let u=I.elapsed();if(!p&&c!==null){let m=n-(u-c);if(m>=1){i=st.csSetTimeout(l,m);return}}let y=u-r;i=null,c=null,r=null,o=s.apply(t,[y,...e])},h=function(){if(t=this,e=arguments,r){c=I.elapsed();return}return r=I.elapsed(),i=st.csSetTimeout(l,n),o};return h.flushPending=()=>{i&&(st.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,r=null,i&&(st.csClearTimeout(i),i=null)},h}function Wp(s=0){return(n,t,e)=>{e.value=ii(e.value,s)}}var Vi=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(){if(!s.globalService)return!1;let t=this.values,e=Object.keys(t);if(!e.length)return!1;let i=csArray.prototype.map.call(e,r=>({name:this.name,parameter:r,value:Math.round(t[r])}));return s.globalService.push(i),this.reset(),i.length>0}}return s.globalService=null,it([O()],s.prototype,"flush",null),s})(),xt=(()=>{class s extends Vi{constructor(t,e=100){super(t),this.vy=e,this.values={},e&&(this.debouncedFlush=ii(()=>this.flush(),this.vy))}count(t,e=1){Vi.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),Xa=(()=>{class s extends Vi{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),Yp=(()=>{class s extends Vi{add(t,e){var i,r,o,c,l,h,p;let u=y=>this.values[`${t}.${y}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(r=(h=this.values)[p=`${t}.total`])!==null&&r!==void 0||(h[p]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=u("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=u("total")/u("count")}}return s})(),q={counters:{commandsFromIntegrations:new xt("commands-from-integrations"),commandsFromCSTC:new xt("commands-from-cstc"),commandsFromIframe:new xt("commands-from-iframe"),commandApplied:new xt("command-applied"),commandError:new xt("command-error"),commandMisuse:new xt("command-misuse"),CSTCSnippetUsed:new xt("cstc-snippet-used"),redactedPII:new xt("redacted-pii"),pageAnonymisation:new xt("page-anonymisation"),patchedNativeFunctions:new xt("patched-native-functions"),pureWindowState:new xt("pure-window-state"),sensitiveElements:new xt("sensitive-elements"),cspErrors:new xt("csp-errors"),networkRequests:new xt("network-requests"),webVitalsErrors:new xt("web-vitals-errors"),trackedFeatures:new xt("tracked-features"),longTasks:new Xa("longTasks"),tasks:new Xa("tasks"),errors:new xt("errors"),methodPerformance:new Yp("perf")},setService(s){Vi.setGlobalService(s)}},Wi=(()=>{class s{constructor(){this.wo=0}get length(){return this.wo}get isEmpty(){return!this.xs}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.wo++,this.qn?this.qn=this.qn[1]=[t,void 0]:this.qn=this.xs=[t,void 0]}pop(){if(!this.xs)return null;this.wo--;let t=this.xs[0];return this.xs=this.xs[1],this.xs||(this.qn=void 0),t}forEach(t){let e=this.xs;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.wo=0,this.xs=this.qn=void 0}}return s})(),co=0,Bo=s=>{co++,csQueueMicrotask(()=>Ds(()=>{try{s()}finally{co--}},Ne.MicroTask))},Fn=new Wi,$n=new Wi;function qt(s,n="high"){Fn.isEmpty&&$n.isEmpty&&yl(Xp),n==="high"?$n.push(Ka(s)):Fn.push(Ka(s))}function yl(s,n=10){n===0?Bo(s):csQueueMicrotask(()=>yl(s,n-1))}function Xp(){for(;!$n.isEmpty;)$n.pop()();for(;!Fn.isEmpty;)Fn.pop()()}async function El(s=1){for(let n=0;n<s;n++)await new Promise(t=>qt(t))}function Ka(s){return function(){try{s.apply(window,arguments)}catch(n){nt.critical(n)}}}var Dn="null",hs=null,Sl=[],Kp=()=>{var s;return qi||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!qi&&Kp()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],hs=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{lo({type:"UXA_EVENT",event:s.detail})}),hs.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Dn)return;Dn=s.data.sessionId,csArray.prototype.forEach.call(Sl,n=>n()),hs==null||hs.postMessage({type:"CONNECTED",sessionId:Dn})}}));function Jp(s){qi||(Dn!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Sl,s)))}function lo(s){hs==null||hs.postMessage(s)}function ms(s){var n;let t=(n=s.length)!==null&&n!==void 0?n:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Se(s,n){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=n(s[i]);return e}function Qp(s,n,t){let e=[],i=0;for(let r=0;r<s.length;r+=1){let o=n(s[r]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function Fo(s,n){let t=[];return Qp(s,n,e=>csArray.prototype.push.call(t,e)),t}function W(s,n){if(Zp(s)){let t=s.length;for(let e=0;e<t;e++)n(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)n(e.value,t++),e=s.next()}}function Zp(s){return s.length>=0}function Re(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return s[e]}function ji(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return!0;return!1}function $o(s,n){let t=s.length;for(let e=0;e<t;e++)if(!n(s[e],e))return!1;return!0}function Hi(s,n){let t=s.length,e=[];for(let i=0;i<t;i+=1){let r=s[i];n(r)&&csArray.prototype.push.call(e,r)}return e}function tf(s,n,t){let e=s.length+n.length+((t==null?void 0:t.length)||0),i=new csArray(e),r=0;for(let o=0;o<s.length;o++)i[r++]=s[o];for(let o=0;o<n.length;o++)i[r++]=n[o];if(!t)return i;for(let o=0;o<t.length;o++)i[r++]=t[o];return i}function Ja(s,n){for(let t=0;t<s.length;t++)csArray.prototype.push.call(n,s[t])}function De(s){let n=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,n?[i,e]:e)),t}var Yi=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Ve=(()=>{class s extends Yi{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var Qa=(()=>{class s extends Yi{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),je=(()=>{class s extends Yi{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=I.elapsed();t(),this.count++;let i=I.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=I.elapsed();return()=>{this.count++;let e=I.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),ef=(()=>{class s extends Yi{constructor(){super("INP","Value: {value}")}getData(){return{value:_t.tasks.eventListener.max}}}return s})(),_t={general:{category:"General",nbEvents:new Ve("Nb of Events"),pendingTasks:new Ve("Pending Tasks"),pendingEvents:new Ve("Pending Tasks"),nbOfMutationObservers:new Qa("Nb of Mutation Observers"),inp:new ef},mutations:{category:"Mutations",initialDOM:new je("Initial DOM"),pendingMutations:new Ve("Nb of Mutations scheduled"),serializedMutations:new je("Serialized Mutations"),count:new Ve("Mutation Count"),elementMutationObserved:new Qa("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new je("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Ve("Nb of Hidden Elements "),nbElements:new Ve("Nb of  Elements")},tasks:{category:"Tasks",tasks:new Ve("Tasks"),errors:new Ve("Errors"),timer:new je("Timers"),microtask:new je("Microtasks"),mutationObserver:new je("MutationObserver"),monkeyPatch:new je("MonkeyPatch"),eventListener:new je("EventListener"),intersectionObserver:new je("Intersection")}};function sf(){let s=null;Jp(()=>{let n=r=>Object.keys(r),t=csArray.prototype.map.call(n(_t),r=>_t[r]),e=csArray.prototype.map.call(t,r=>csArray.prototype.filter.call(csArray.prototype.map.call(n(r),o=>r[o]),o=>o instanceof Yi));lo({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(r,o)=>({category:r.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{Ds(()=>{let r=Fo(Se(e,o=>Se(o,c=>c.getData())),o=>o);lo({type:"UXA_PERFORMANCE_COUNTER",event:r})},Ne.Timer)},1e3))})}var Ne=(()=>{let s;return function(n){n.Timer="timer",n.MonkeyPatch="monkeyPatch",n.MutationObserver="mutationObserver",n.EventListener="eventListener",n.IntersectionObserver="intersectionObserver",n.MicroTask="microtask"}(s||(s={})),s})(),oe=null;async function Ds(s,n,t=null){if(oe&&n!==Ne.MicroTask)return s();t&&(oe=t),oe||(oe={type:n,elapsed:0},_t.tasks.tasks.increase());try{oe.elapsed+=nf(s)}catch(e){_t.tasks.errors.increase(),nt.critical(new Error(`Task error:  ${n}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{co<=0&&(_t.tasks[oe.type].elapsed(oe.elapsed),oe.elapsed>50?q.counters.longTasks.push(oe.elapsed):q.counters.tasks.push(oe.elapsed),oe=null)}}function nf(s){let n=I.elapsed();return s(),I.elapsed()-n}var Pr,vl="cs-native-frame";var ss={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function wl(s,n){let t=ks(window,s);return function(e,i){return t(()=>Ds(e,n),i)}}window.csSetTimeout=wl("setTimeout",Ne.Timer);window.csSetInterval=wl("setInterval",Ne.Timer);window.csQueueMicrotask=(Pr=ks(window,"queueMicrotask"))!==null&&Pr!==void 0?Pr:setTimeout;window.csClearTimeout=ks(window,"clearTimeout");window.csClearInterval=ks(window,"clearInterval");window.csFileReader=ks(window,"FileReader");(()=>{var s;let n=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++n}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function rf(){let s=document.createElement("iframe");s.id=vl,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),!!Element.prototype.attachShadow){let e=n.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return n.innerHTML=s.outerHTML,n.firstElementChild.contentWindow}function of(s,n){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,n));)e=Object.getPrototypeOf(e);return t}function af(s,n,t){let e=of(s,n);if(!e)return function(){return this[n]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function _l(s){var n,t;Object.keys(ss.constructors).forEach(i=>{window[ss.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),hf(s);let e=s.MutationObserver;("Prototype"in window||lf())&&(e=(t=(n=ks(window,"MutationObserver"))!==null&&n!==void 0?n:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=Za(window.IntersectionObserver,Ne.IntersectionObserver),window.csMutationObserver=Za(e,Ne.MutationObserver),zs("csNode",ss.nodeProperties,s.Node.prototype,"get"),zs("csElement",ss.elementProperties,s.Element.prototype,"get"),zs("csElement",ss.elementPropertiesValues,s.Element.prototype,"value",!1),zs("csHTMLImageElement",ss.imageProperties,s.HTMLImageElement.prototype,"set"),zs("csEvent",ss.eventProperties,s.Event.prototype,"get"),zs("csNavigator",ss.navigatorProperties,s.navigator,"value")}function zs(s,n,t,e,i=!0){n.forEach(r=>{let o=typeof r!="string"&&"binding"in r,c=o?r.propertyName:r;(i||c in t)&&(window[`${s+c}`]=af(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(r.binding)))})}function Go(s,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=n}function cf(){try{let s=rf();return s?(window.CSPureWindow=s,_l(window.CSPureWindow),!0):!1}catch(s){return Go("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!cf())try{_l(st)}catch(s){Go("Critical",`failed to copy references from window: ${s.message}`)}function lf(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function hf(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function Za(s,n){try{let t=function(e,i){return new s((o,c)=>{Ds(()=>e(o,c),n)},i)};return t.base=s,t}catch{return Go("Warning",`failed to extends ${s.name}`),s}}var Y=(()=>{let s;return function(n){n.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}n.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}n.stringReplaceAll=i;function r(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}n.truncate=r}(s||(s={})),s})();function ho(s){return Y.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function uf(s){let n=s.getAttribute("id");return n&&Y.escapeInvalidCharacters(n)}function ft(s){return s.nodeType===1}function ni(s){return s.nodeType===3}function bl(s){return s.nodeType===8}function Al(s){return ft(s)&&s.localName==="link"}function df(s){return ft(s)&&s.localName==="source"}function Tl(s){return ft(s)&&s.localName==="a"}function zo(s){return Al(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function pf(s){return ft(s)&&s.localName==="img"}function Xi(s){return ft(s)&&s.localName==="style"}function Ki(s){return ft(s)&&s.localName==="input"}function Ji(s){return ft(s)&&s.localName==="textarea"}function Qi(s){return ft(s)&&s.localName==="script"}function ff(s){return ft(s)&&s.localName==="button"}function pi(s){return ft(s)&&"ownerSVGElement"in s}function qo(s){return ft(s)&&s.localName==="select"}function gf(s){return ft(s)&&s.localName==="details"}function mf(s){return ft(s)&&s.localName==="summary"}function yf(s){return pi(s)&&s.localName==="image"}function Ef(s){return pi(s)&&s.localName==="use"}function Sf(s){return pi(s)&&s.localName==="feImage"}function vf(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function wf(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function Gn(s){return s.nodeType===9}function ri(s){return vf(s)&&"host"in s&&"mode"in s}function Rl(s){return ft(s)&&!!csElementshadowRoot.apply(s)&&ri(csElementshadowRoot.apply(s))}var _f=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function bf(s){return ft(s)&&pt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(_f,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Zi="detached";function Cl(s){let n=s,t=[n];for(;csNodeparentNode.apply(n)!==null;)n=csNodeparentNode.apply(n),csArray.prototype.push.call(t,n);return zn(n)&&csArray.prototype.push.call(t,Zi),{ancestors:t,selectionRoot:n}}function Af(s){let n=s,t=[n],e=null;for(;csNodeparentNode.apply(n)!==null;)e===null&&Tl(n)&&(e=n),csArray.prototype.push.call(t,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return zn(n)&&csArray.prototype.push.call(t,Zi),{firstAnchorParent:e,ancestors:t,selectionRoot:n}}function zn(s){return Ie.isValidElement(s)}var Rs=(()=>{var s,n;return(n=(s=st.Element)===null||s===void 0?void 0:s.prototype)!==null&&n!==void 0?n:{}})(),Vt=Rs.matches||Rs.matchesSelector||Rs.mozMatchesSelector||Rs.msMatchesSelector||Rs.oMatchesSelector||Rs.webkitMatchesSelector,tc=Rs.closest,Il=9;function Tf(s,n){return n?csArray.prototype.some.call(n,t=>Vt.call(s,t)):!1}function Rf(s,n,t){if(s===Zi||s.nodeType===Il)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(n.localName)),r=ho(n),o=0,c=n.previousElementSibling;for(;c;)(ho(c)===r||i&&(e!=null&&e.test(c.localName)))&&!Tf(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Cf(s,n,t){if(s===Zi||s.nodeType===Il)return 0;let e=0,i=n.previousElementSibling;for(;i;)Vt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var If=[/\d{4}/,/^ember\d+$/],Pf="@",Wo="data-cs-override-id",Of="data-cs-dynamic-id";function Pl(s,n,t,e){let i=e.dynamicIdRegex||null,r=e.dynamicElementNameRegex,o=ho(s);if(r&&r.test(s.localName)&&(o=csString.prototype.replace.call(o,r,`$1${Pf}`)),kf(s,t)){let y=Yo(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Wo}="${y}"]`}}let c=Hf(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Nf(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=uf(s);if(xf(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let p=Mf(s,e);if(p){let y=Cf(n,s,p);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${p}](${y})`}}let u=Rf(n,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${u})`}}function Nf(s,n,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Vt.call(s,e)&&jf(e,n))return e}}function Mf(s,n){if(n.reliableSelectors){for(let t of n.reliableSelectors)if(Vt.call(s,t))return t}}function kf(s,n){let t=Yo(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&Xo(Wo,t,n)}function Df(s){return Yo(s)!==null}function Yo(s){return s.getAttribute(Wo)}function xf(s,n,t,e){return n&&!Df(s)&&!Lf(s,n,e)&&Vf(n,t)}function Lf(s,n,t){return s.hasAttribute(Of)||Uf(n,t)}function Uf(s,n){let t=!1;return s&&n&&(t=n.test(s)),s&&(csArray.prototype.some.call(If,e=>e.test(s))||t)}function Vf(s,n){return s&&Xo("id",s,n)}function Xo(s,n,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${n}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function jf(s,n){try{return window.csquerySelectorAll[n.nodeType].call(n,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Hf(s,n,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&Xo(e,i,n))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var uo=11;function qn(s,n,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return ec(e,t);let i=e,r=s[0],{elementSelector:o,hasUniqueIdentifier:c}=Pl(i,r,n,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${ec(h,t)}${o}`}let l=qn(s,n,t);return`${l?`${l}>`:""}${o}`}function ec(s,n){if(s===Zi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=Cl(s.host);return`${qn(t,e,n)}|shadow-root|`}return s.nodeType===uo?"|fragment|":""}var Ol=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Bf=(()=>{class s extends Ol{constructor(){super(...arguments),this._o=!1,this.bo=!1,this.Sc=!1}wy(t,e){return this._o&&!(e===null&&zn(t))&&t.nodeType!==uo&&!t.host}_y(t){return!t.localName}serializeElement(t,e,i){var r;if((r=this.path)!==null&&r!==void 0||(this.path=""),this.wy(t,e))return;let o=!1;e===null&&zn(t)&&(o=!0,this.done=!0);let c=this.bo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Sc=!0,this._o=!1,this.bo=!1),!l&&e===null&&t.nodeType===uo){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this._y(t))return;let h=e!=null?e:"detached",{elementSelector:p,hasUniqueIdentifier:u}=Pl(t,h,i,this.options);u&&(this.bo=!0,this._o=!this.options.fullPath);let y=`${o?`|detached|${c}`:""}${this._o&&!u?"":p}`,v=!u&&this.bo&&!this.options.fullPath?"":this.path&&!this.Sc?">":"";this.Sc=!1,this.path=`${y}${v}${this.path}`}}return s})();function Ut(s,n=Gt.SHOW_ALL){let t=n|Gt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=sc(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let r=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(r){let h=r;return r=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=sc(c);if(n&Gt.SHOW_DOCUMENT_FRAGMENT&&l&&(r=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Nr[c.nodeType]&n)!==0)return c}return null},visitAll(o){Nr[s.nodeType]&n&&o(s);let c=this.nextNode();for(;c;){if((Nr[c.nodeType]&n)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function sc(s){return s&&Rl(s)?s.shadowRoot:null}var Or=(()=>{var s;return(s=st.Node)!==null&&s!==void 0?s:{}})(),Gt=(()=>{var s;return(s=st.NodeFilter)!==null&&s!==void 0?s:{}})(),Nr={2:Gt.SHOW_ATTRIBUTE,4:Gt.SHOW_CDATA_SECTION,8:Gt.SHOW_COMMENT,11:Gt.SHOW_DOCUMENT_FRAGMENT,9:Gt.SHOW_DOCUMENT,10:Gt.SHOW_DOCUMENT_TYPE,1:Gt.SHOW_ELEMENT,[Or.ENTITY_NODE]:Gt.SHOW_ENTITY,[Or.ENTITY_REFERENCE_NODE]:Gt.SHOW_ENTITY_REFERENCE,[Or.NOTATION_NODE]:Gt.SHOW_NOTATION,7:Gt.SHOW_PROCESSING_INSTRUCTION,3:Gt.SHOW_TEXT},Nl=!1,po=5;function Ff(s=5){Nl=nt.isPerfLoggingActive(),po=s}function xs(s,n){return function(){if(!Nl)return s.apply(this,arguments);let t=I.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=I.elapsed()-t;i>=po&&q.counters.methodPerformance.add(n,i)});else{let i=I.elapsed()-t;i>=po&&q.counters.methodPerformance.add(n,i)}return e}}var Ot=function(s){return function(n,t,e){let i=e.value;e.value=xs(i,s)}},Os=(()=>{let s;return function(n){function t(){return!!Element.prototype.attachShadow}n.isSupported=t;function e(r){return r&&Rl(r)?r.shadowRoot:null}n.getShadowRoot=e;function i(r){return Ut(r,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}n.getAllShadowHosts=xs(i,"getAllShadowHosts")}(s||(s={})),s})(),bt=(()=>{let s;return function(n){function t(){let u=[i()];return document.documentElement&&csArray.prototype.push.call(u,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(u,document.body.scrollHeight,document.body.offsetHeight),Math.max(...u)}n.documentHeight=t;function e(){return document.documentElement.scrollWidth}n.documentWidth=e;function i(){return window.innerHeight}n.windowHeight=i;function r(){return window.innerWidth}n.windowWidth=r;function o(){let u=window.csScreen.width;return Ge(u)&&u>0?u:window.screen.width}n.screenWidth=o;function c(){let u=window.csScreen.height;return Ge(u)&&u>0?u:window.screen.height}n.screenHeight=c;function l(){return window.pageXOffset}n.windowOffsetX=l;function h(){return window.pageYOffset}n.windowOffsetY=h;function p(){return{dw:`${e()}`,dh:`${t()}`,ww:`${r()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}n.getRequestParameters=p}(s||(s={})),s})(),Mr=(()=>{var s;return(s=st.Node)!==null&&s!==void 0?s:Object})(),lt=(()=>{let s;return function(n){let t="isConnected"in Mr.prototype?b=>b.isConnected:b=>!b.ownerDocument||!(b.ownerDocument.compareDocumentPosition(b)&b.DOCUMENT_POSITION_DISCONNECTED);function e(b,V){for(let j=b;j;j=csNodenextSibling.apply(j))V(b)}n.forEachChild=e;function i(b){return t(b)}n.isConnected=i;function r(b,V){let j=[];for(let $ of l(b,V))csArray.prototype.push.call(j,$);return j}n.getAncestors=r;let o=(b,V)=>{var j;return(j=csNodeparentNode.apply(b))!==null&&j!==void 0?j:V&&ri(b)?b.host:null};function c(b,V,j=!1){let $=b;for(;$;){if(V($))return $;let gt=o($,j);if(gt&&gt!==$)$=gt;else break}return null}n.findAncestor=c;function*l(b,V=!1){let j=b;for(;j;){yield j;let $=o(j,V);if($&&$!==j)j=$;else break}}n.walkUp=l;function h(b,V){if(b===V||V.contains(b))return!0;let j=n.getParentElement(b);return j&&j!==b?h(j,V):!1}n.isDescendantOf=h;function p(b){var V;return b.parentElement?b.parentElement:n.getRootNode(b)?(V=n.getRootNode(b))===null||V===void 0?void 0:V.host:null}n.getParentElement=p;function u(b,V=document){let j=ms(window.csquerySelectorAll[V.nodeType].call(V,b)),$=Os.getAllShadowHosts(V);for(let gt of $){let Ht=Os.getShadowRoot(gt);if(!Ht)continue;let fe=ms(window.csquerySelectorAll[Ht.nodeType].call(Ht,b));csArray.prototype.push.call(j,...fe)}return j}n.findAllElements=u,n.getRootNode=(()=>{if("getRootNode"in Mr.prototype)return(j,$)=>j.getRootNode($);function b(j){let $=V(j);return ri($)?b($.host):$}function V(j){return csNodeparentNode.apply(j)!=null?V(csNodeparentNode.apply(j)):j}return(j,$)=>typeof $=="object"&&!!$.composed?b(j):V(j)})();function y(b){return b==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(b)}function m(b){let V=b.getBoundingClientRect();return V.right+bt.windowOffsetX()<0||V.bottom+bt.windowOffsetY()<0}function v(b){var V,j;if(((V=b.checkVisibility)===null||V===void 0?void 0:V.call(b,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!b.offsetParent){if(!b.getBoundingClientRect)return nt.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${b instanceof Mr} Ctor: ${(j=b==null?void 0:b.constructor)===null||j===void 0?void 0:j.name}`),!1;let Ht=b.getBoundingClientRect();if(Ht.width==0&&Ht.height==0)return!0}let $=window.getComputedStyle(b);return $?$.display==="none"||$.visibility==="hidden"||$.visibility==="collapse"||$.opacity==="0"||$.filter==="opacity(0)"||$.width==="0px"&&$.height==="0px"||y($.color):!0}n.isHiddenByCSS=v;function N(b){if(v(b))return!0;let j=p(b);return j!=null&&N(j)}n.areAncestorsHiddenByCSS=N;function D(b){let V=null,j=b;do if(v(j))V=j;else break;while(j=p(j));return V}n.getTopAncestorHiddenByCSS=D;function w(b){let V=S(b);return V!==null&&!b.contains(V)&&!V.contains(b)}function S(b){let V=b.getBoundingClientRect(),j=V.left+.5*V.width,$=V.top+.5*V.height;return k(document,j,$)}n.getTopElement=S;function C(b){if(!b.getBoundingClientRect)return null;let V=b.getBoundingClientRect(),j=V.x+V.width/2,$=V.y+V.height/2;return n.getTopElementFromPoint(document,j,$)}n.getElementOnTop=C;function k(b,V,j){let $=b.elementFromPoint(V,j);if(!$)return null;let gt=Os.getShadowRoot($);return gt&&gt!=n.getRootNode(document.body)&&gt!==b?k(gt,V,j):$}n.getTopElementFromPoint=k;function _(b){return!m(b)&&!v(b)&&!w(b)}n.isVisibleInDocument=_;function F(b){return v(b)?!1:Q(b)}n.isVisibleInViewportInForeground=F;function Q(b){let V=S(b);return V===null?!1:b===V?!0:kt(b)?b.textContent!==""&&V.contains(b):b.contains(V)}n.isInViewPort=Q;function ot(b,V,j){let $=b.getAttributeNS(V,j);return $===""?b.hasAttributeNS(V,j)?$:null:$}n.getAttributeNS=ot;function jt(b){return!!(b.hasAttribute("tabIndex")||b.getAttribute("contentEditable")==="true"||Tl(b)&&b.hasAttribute("href")||(qo(b)||Ji(b)||Ki(b)||ff(b))&&!b.hasAttribute("disabled")||gf(b)||mf(b))}n.isElementFocusable=jt;function kt(b){return b.localName==="span"||b.localName==="a"||b.localName==="b"||b.localName==="i"||b.localName==="button"||b.localName==="input"||b.localName==="label"||b.localName==="cite"||b.localName==="small"||b.localName==="strong"||b.localName==="code"||b.localName==="abbr"||b.localName==="em"||b.localName==="dfn"||b.localName==="time"||b.localName==="output"||b.localName==="object"||b.localName==="sub"}n.isInlineElement=kt}(s||(s={})),s})(),$f=(()=>{class s{constructor(t){this.by=t}run(t){let e=[...this.by],i=lt.getAncestors(t,!1),r=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.Ay(e,o,c,r),this.Ty(e),e.length===0)break;i.length===0&&o.host&&(i=lt.getAncestors(o.host,!1),r=i[i.length-1])}}Ay(t,e,i,r){for(let o of t)o.serializeElement(e,i,r)}Ty(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Gf=(()=>{class s extends Ol{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.Ry(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}Ry(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.Cy(t.id),t.classList&&(e+=this.Iy(csArray.from(t.classList))),t.attributes&&(e+=this.Py(t)),e}Cy(t){return t?`#${t};`:""}Iy(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Oy(t,e){var i,r;return((r=(i=this.options).isAttributeSensitive)===null||r===void 0?void 0:r.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||pi(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Ki(t)&&e==="value"}Ny(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}My(t){let e={};for(let i of csArray.from(t.attributes))this.Oy(t,i.name)||(e[i.name]=i.value);return e}Py(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let r=Object.entries(this.My(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(r,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.Ny(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(r.length>0?";":"")}}return s})(),Ie=(()=>{let s;return function(n){n.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}n.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let p=o(c);if(p===document)return{path:"",hierarchy:""};if(!t(p))return{path:n.INVALID_ELEMENT,hierarchy:n.INVALID_ELEMENT};let u=new Bf(h),y=new Gf(l);return new $f([u,y]).run(p),{path:u.getPath(),hierarchy:y.getPath()}}n.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return n.INVALID_ELEMENT;let{ancestors:p,selectionRoot:u}=Cl(h);return qn(p,u,l)}n.getElementPath=i;function r(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:n.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:p,ancestors:u,selectionRoot:y}=Af(h);return{path:qn(u,y,l),firstAnchorParent:p}}n.getElementPathAndFirstAnchorParent=r;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||Ie;var Ml=["t.contentsquare.net","clicktale"],zf=s=>{var n;if(typeof s.filename=="string"&&csArray.prototype.some.call(Ml,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(n=s.error)===null||n===void 0?void 0:n.stack,x.critical(t)}};window.addEventListener("error",zf);var x=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Ml,t)}static setStrategy(t){s.Xi=t}static computeIsActive(t){s.Fe=Oe.boolean(t),s.Fe?s.vc=Oe.boolean(10):s.vc=!1}static isLoggingActive(){return s.Fe}static getStrategy(){return s.Xi}static debug(t,e=""){s.Fe&&this.Xi.send(t,e,ut.debug)}static warn(t,e=!0,i=""){var r;q.counters.errors.count("warning"),s.Fe&&e&&this.Xi.send(t,i,ut.warn),(r=window.UXAnalytics.Console)===null||r===void 0||r.warn(t)}static implementation(t,e=""){q.counters.errors.count("implementation"),s.Fe&&this.Xi.send(t,e,ut.implementation)}static error(t,e=""){var i;q.counters.errors.count("error"),s.Fe&&this.Xi.send(t,e,ut.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){q.counters.errors.count("critical"),this.Xi.send(t,e,ut.critical)}static tryToExecute(t,e){return function(...i){try{let r=e.apply(this,i);return J(st.Promise)&&r instanceof st.Promise?r.then(o=>o,o=>s.error(qe(o)?o:new Error(o),t)):r}catch(r){try{s.error(qe(r)?r:new Error(r),t)}catch{}}}}static isPerfLoggingActive(){return s.vc}}return s.Fe=!1,s.vc=!1,s})();var qf=/^\d+\.\d+(?:\.\d+)?$/,Wf=s=>{if(!qf.test(s))return;let[n,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:n,minor:t,patch:!e||Number.isNaN(e)?0:e}},Yf=(s,n)=>s.major!==n.major?s.major-n.major:s.minor!==n.minor?s.minor-n.minor:s.patch-n.patch,Xf=(s,n)=>Yf(s,n)>=0;function ee(s){return Tt(s,"data:")}function kl(s){return Tt(s,"#")}function Wn(s){return!!s&&(di(s,".css")||Tt(s,"https://fonts.googleapis.com/css"))}var ic=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function Kf(s){ic.lastIndex=0;let n,t=0,e=[];for(;(n=ic.exec(s))!==null;){let i=n.index,r=n.index+n[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,r);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=r}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}var Jf=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Dl=s=>{let n=new Set(Jf);return csArray.prototype.forEach.call(s,t=>{n.add(t)}),n},Qf=["svg","slot"],Zf=(s,n,t)=>t==="radio"&&s==="input"&&n==="name"||csArray.prototype.indexOf.call(Qf,s)>-1,xl={href:new Set(["a"]),src:new Set(["iframe"])},tg=s=>xl.hasOwnProperty(s),eg=(s,n,t)=>{var e;return((e=xl[n])===null||e===void 0?void 0:e.has(s))&&!ee(t)},sg=(s,n,t)=>(t==="submit"||t==="button")&&s==="input"&&n==="value";function kr(s){return s?ig(s):null}function ig(s){try{let n=/^\/(.*)\/([gim]*)$/.exec(s);if(n){let[,t,e]=n;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var ng=1,rg="f553e78fb58e051e51fe8074c4c6e73e",fo=(()=>{let s;return function(n){n[n.Disabled=0]="Disabled",n[n.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",n[n.Enabled=2]="Enabled"}(s||(s={})),s})(),og=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,p,u,y,m,v,N,D;this.isChild=!1,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||jo,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(r=t.smbConfig)===null||r===void 0?void 0:r.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(p=t.customErrorsEnabled)!==null&&p!==void 0?p:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=kr(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=kr(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=kr(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(u=t.recordingUrlRules)!==null&&u!==void 0?u:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((y=t.uxaDomain)===null||y===void 0?void 0:y.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(m=t.anonymizeDigits)!==null&&m!==void 0?m:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(v=t.recordTargetingRules)!==null&&v!==void 0?v:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(N=t.collectTargetText)!==null&&N!==void 0?N:fo.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(D=t.quotas)!==null&&D!==void 0?D:null}getTrackerUri(){return`${this.ds()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.ds()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${rg}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.ds()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.ds()}://${this.loggerDomain}`}getMetricsUri(){return`${this.ds()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.ds()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.ds()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.ds()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.ds()}://${this.paProxyDomainUri}`}ds(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===ng}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[r,o]=i;this.ky(r,o)}})}ky(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.pd()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.pd())return!0;let t=Wf(this.getHeapVersion()||"");if(t&&t.major===4&&Xf(t,{major:4,minor:23,patch:5}))return!0}return!1}pd(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,r,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((r=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||r===void 0?void 0:r.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==fo.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),ag=(()=>{class s{constructor(t,e){this.Ao=t,this.gd=e}init(){this.md=this.Ao!==this.Ao.top,this.yd=this.gd.isWebView&&this.Ao===this.Ao.top,this.gd.iframesTracking&&this.md||this.yd?this.Ed=!1:this.Ed=!0}isInIframeContext(){return this.md}isTopWindowTracker(){return this.Ed}isInWebViewContext(){return this.yd}}return s})();function Yn(){}function Xn(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function cg(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var Dr=csSymbol("cachedJson");function lg(s){if(s[Dr])return s[Dr];if(csArray.isArray(s)){if(s.length===0)return"[]";let n="["+Ns(s[0]);for(let t=1;t<s.length;t++)n+=","+Ns(s[t]);return n+="]"}return s[Dr]=csJSON.stringify(s)}var Ns=typeof window.Symbol!="undefined"?lg:csJSON.stringify;var Bi=(()=>{let s;return function(n){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}n.toQuery=t}(s||(s={})),s})(),Ll=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),oi=(()=>{class s extends Ll{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.wc(t);let e=Bi.toQuery(t);this.Dy(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}Dy(t){let e=new window.Image(1,1);e.onload=Yn,e.onerror=Yn,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}wc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var hg=(()=>{class s{constructor(t,e){this.ps=t,this.xy=e}init(){this.fs=new oi(this.ps.getLoggerUri()),this.fs.setRequestParametersProviders(this,this.xy)}send(t){this.To=t,this.fs.send()}getRequestParameters(){return{a:this.To.app,l:this.To.level,m:this.To.message,s:this.To.stacktrace}}}return s})(),ug=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,dg=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,pg="CS_ANONYMIZED_EMAIL",xr="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",fg=new csRegExp(`(ey${xr}\\.ey${xr}\\.${xr})`,"g"),gg="CS_ANONYMIZED_JWT",mg=/[0-9]{4}/,yg=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Eg="CS_ANONYMIZED_PII",Sg="\u2022",vg=/\d/g,wg=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,_g=/(?:\d{1,3}\.){3}\d{1,3}/,bg=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,is=(()=>{let s;return function(n){function t(p){return csString.prototype.replace.call(p,ug,pg)}n.replaceEmail=t;function e(p){return csString.prototype.replace.call(p,fg,gg)}n.replaceJWT=e;function i(p,u){return csString.prototype.replace.call(p,yg,u)}n.replaceCreditCardNumber=i;function r(p){return csString.prototype.replace.call(p,vg,Sg)}n.replaceDigits=r;function o(p){return _g.test(p)||bg.test(p)}n.mayHaveIPAddress=o;function c(p){return wg.test(p)}n.mayHaveNumberSequence=c;function l(p){return mg.test(p)}n.mayHaveCreditCardNumber=l;function h(p){return dg.test(p)}n.mayHaveEmail=h}(s||(s={})),s})(),Ls=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.Ly(this._c(t));return e===!0?i=this.Uy(i):e===!1&&(i=this.Vy(i)),i}anonymizePII(t){return this._c(t)}anonymizeJwt(t){return is.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this._c(t[i])}),t}_c(t){if(is.mayHaveEmail(t)){let e=is.replaceEmail(t);return e!==t&&q.counters.redactedPII.count("email"),e}return t}Uy(t){return is.replaceDigits(t)}Vy(t){return is.mayHaveNumberSequence(t)?is.replaceDigits(t):t}Ly(t){return is.mayHaveCreditCardNumber(t)?is.replaceCreditCardNumber(t,(e,i,r,o,c)=>{if(csString.prototype.indexOf.call(r,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(r,o),""):r;if(!this.jy(h))return e;q.counters.redactedPII.count("cc")}else q.counters.redactedPII.count("cc-partial");return`${i}${Eg}${c}`}):t}jy(t){let e=parseInt(t[t.length-1]),i=0;for(let r=t.length-2;r>=0;r--){let o=parseInt(t[r]);r%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),Ul="15.138.1";function Ko(){return{v:Ul}}var Ag=(()=>{class s{constructor(t,e){this.f=t,this.M=e}getRequestParameters(){return{d:`${I.now()}`,p:this.M.anonymizePII(window.location.href),...this.f.getRequestParameters(),...Ko()}}}return s})(),Tg="uxa",nc=5,Rg="No stacktrace",Vl="snippet-",jl="implementation-snippet-",rc=(()=>{let s;return function(n){n.IMPLEMENTATION="implementation",n.DYNAMIC="dynamic"}(s||(s={})),s})(),Cg=(()=>{class s{constructor(t,e,i){this.gs=e,this.M=new Ls,this.Sd=Ir[ut.warn],this.Sd=Ir[t.minLogLevel||ut.warn],this.fs=i||new hg(t,new Ag(t,this.M)),this.vd={[ut.debug]:[],[ut.warn]:[],[ut.implementation]:[],[ut.error]:[],[ut.critical]:[]},this.Ro={implementation:{},dynamic:{}},this.fs.init()}send(t,e="",i=ut.warn){if(!this.Hy(i,e))return;csArray.prototype.push.call(this.vd[i],e||"");let r={message:this.By(t,e),stacktrace:this.Fy(t),app:Tg,level:i};this.fs.send(r)}By(t,e){let i=qe(t)?this.M.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}Fy(t){return qe(t)?`${t.stack||Rg} ${this.Wn()}`:this.Wn()}Wn(){let t=this.gs.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.gs.getSessionService(),r=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(o)}Hy(t,e){if(Ir[t]<this.Sd)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,jl,0))===0)return this.wd(e,rc.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Vl,0))===0)return this.wd(e,rc.DYNAMIC);let i=this.vd[t];return i.length>=nc?!1:!(e&&csArray.prototype.some.call(i,r=>r===e))}wd(t,e){return t in this.Ro[e]?this.Ro[e][t]>=nc?!1:(this.Ro[e][t]+=1,!0):(this.Ro[e][t]=1,!0)}}return s})(),Lt=!qi&&document.createElement("a"),Ig=/(:443|:80)$/;function Pe(s){return Lt?(Lt.href=s,Lt.href):""}function Hl(s,n){return new csURL(s,n).href}function rr(s){let n=Jo(s);return n===null?"":decodeURIComponent(n.hostname)}function tn(s,n){return csArray.prototype.some.call(n,t=>di(s,`.${t}`)||s===t||t==="")}function Pg(s){return s[0]==="/"?s:`/${s}`}function oc(s){return csString.prototype.replace.call(s,Ig,"")}function Jo(s){return!Lt||!Tt(s,"http://")&&!Tt(s,"https://")?null:(Lt.href=s,{hash:Lt.hash,host:oc(Lt.host),hostname:Lt.hostname,href:Lt.href,origin:Lt.origin?Lt.origin:oc(`${Lt.protocol}//${Lt.host}`),pathname:Pg(Lt.pathname),port:Lt.port,protocol:Lt.protocol,search:Lt.search})}var ac="CS_IFRAME_MESSAGE",ai=(()=>{let s;return function(n){n.AfterPageView="afterPageView",n.GetSessionKey="getSessionKey"}(s||(s={})),s})(),te=(()=>{let s;return function(n){n.Parent="parent",n.Child="child"}(s||(s={})),s})(),P=(()=>{let s;return function(n){n.Discovery="discovery",n.Stop="stop",n.RecordingContext="recordingContext",n.SensitiveStatus="sensitiveStatus",n.RecordingEvent="recordingEvent",n.EndOfBufferedMessages="endOfBufferedMessages",n.ChildLogMessage="childLogMessage",n.AnalysisEvent="analysisEvent",n.JavascriptError="javascriptError",n.ApiError="apiError",n.Assets="assets",n.DetailedApiError="detailedApiError",n.EmerchandisingMessage="emerchandisingMessage",n.Commands="commands",n.IntegrationCallback="integrationCallback",n.StaticResource="staticResource",n.TrackingContextResultMessage="trackingContextResultMessage",n.TrackingContextRequestMessage="trackingContextRequestMessage",n.CustomError="customError"}(s||(s={})),s})(),at=(()=>{let s;return function(n){function t(l,h,p,u){let y={type:l,from:h,pid:p,signature:ac};return u!==void 0&&u>=0&&(y.id=u),y}n.buildBaseMessage=t;function e(l,h,p,u){let y=rr(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===ac&&l.data.from===h&&l.data.pid===p&&tn(y,u)}n.isMessageValid=e;function i(l,h,p,u){u?l.postMessage(p,h,u):l.postMessage(p,h)}n.sendPostMessage=i;function r(){return new MessageChannel}n.getNewChannelMessage=r;function o(l,h){l.postMessage(h)}n.sendChannelMessage=o;function c(l){l.close()}n.closeChannelPort=c}(s||(s={})),s})(),Og=(()=>{class s{constructor(t){this.f=t}send(t,e="",i=ut.warn){let r={message:t,errorCode:e,level:i},o=at.buildBaseMessage(P.ChildLogMessage,te.Child,this.f.projectId);o.content=r,at.sendPostMessage(window.parent,"*",o)}}return s})(),Ng=(()=>{class s{setContext(t,e){this.O=t,this.R=e}getVisitorService(){return this.O}getSessionService(){return this.R}}return s})(),go=!1;function Mg(){go=!0}function mt(){return(s,n,t)=>{if(t){let e=t.value;t.value=function(i,r){(i==null?void 0:i.isTrusted)===!1&&go||e.call(this,i,r)}}else{let e=s[n];if(typeof e!="function")return;s[n]=function(i,...r){(i==null?void 0:i.isTrusted)===!1&&go||e.call(this,i,r)}}}}function kg(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function B(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function Dg(){let s=new MutationObserver(n=>{n.forEach(t=>{W(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(q.counters.pureWindowState.count("iframe-deletion"),nt.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function cc(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function xg(){(!cc(MutationObserver)||!cc(MutationObserver.prototype.observe))&&q.counters.patchedNativeFunctions.count("MutationObserver")}function Lg(){try{window.CSPureWindow&&Dg(),xg()}catch{}}var At=(()=>{let s;return function(n){n.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let p=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return p?decodeURIComponent(p[2]):null}n.get=t;function e(l,h,p,u,y,m){let v=encodeURIComponent(`${h}`),N=p===n.CURRENT_DOMAIN?void 0:p,D=i(u),w=D?`;expires=${D.toUTCString()}`:"",S=";path=/",C=pt(N)?`;domain=${N}`:"",k=`${l}=${v}${w}${S}${C}`;return J(y)&&y!==us.NotSet&&(k=`${k};SameSite=${y}`),J(m)&&m===Ae.Yes&&(k=`${k};Secure`),document.cookie=k,!0}n.set=e;function i(l){return wt(l)?new csDate(I.now()+l):l}n.toExpireDate=i;function r(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),us.None,Ae.Yes)}n.remove=r;function o(){return document.cookie.length>0}n.isCookiePresent=o;function c(l,h){let p="_cs_root-domain",u=t(p);if(u!==null&&u!=="1")return u;let y=csString.prototype.split.call(window.location.hostname,"."),m=csArray.prototype.pop.call(y);for(;y.length&&(u===null||u==="1");)m=csArray.prototype.join.call([csArray.prototype.pop.call(y),m],"."),e(p,m,m,void 0,l,h),u=t(p);return r(p,m),m}n.getRootDomain=c}(s||(s={})),s})(),Ug=(()=>{let s;return function(n){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}n.browserIsSafariV12=t}(s||(s={})),s})(),us=(()=>{let s;return function(n){n.None="None",n.Lax="Lax",n.NotSet="X"}(s||(s={})),s})(),Ae=(()=>{let s;return function(n){n[n.Yes=1]="Yes",n[n.No=0]="No"}(s||(s={})),s})(),or=(()=>{class s{constructor(t,e,i){this.f=t,this.w=e,this.mi=i,this.bc=!1,this._d=us.NotSet,this.Ac=Ae.No}getSameSiteFlag(){return this._d}getSecureFlag(){return this.Ac}getDomain(){return this.Tc}getRootDomain(){return this.bd}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.$y(),e=this.Gy();this.bc=this.zy(t,e),this.bc?(this._d=t,this.Ac=e):this.f.secureCookiesEnabled&&this.w.getUrlProtocol()==="https:"&&(this.Ac=Ae.Yes),this.bd=this.qy(),this.Tc=this.Wy(this.bd)}zy(t,e){return Ug.browserIsSafariV12()?!1:(At.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),At.get(s.COOKIE_TEST_FOR_SAME_SITE)?(At.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}$y(){return this.w.getUrlProtocol()==="http:"?us.Lax:this.mi.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?us.None:us.Lax}Gy(){return this.w.getUrlProtocol()==="http:"?Ae.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.mi.isSameSiteNoneSecureNeeded()?Ae.Yes:Ae.No}isSameSiteSupported(){return this.bc}set(t,e,i,r){let o=At.toExpireDate(i),c=r?Ae.Yes:this.getSecureFlag();At.set(t,e,this.Tc,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.Tc;At.remove(t,i)}qy(){let t=this.mi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?us.None:void 0,i=t?Ae.Yes:void 0;return At.getRootDomain(e,i)}Wy(t){return this.f.allowSubdomains?t:At.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),qs="_cs_t",lc="1",Vg=(()=>{class s{constructor(t,e){this.Et=t,this.f=e,this.Co=!1,this.Io=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.Et.isTopWindowTracker()&&"cookie"in document){if(!this.Et.isInIframeContext()&&At.isCookiePresent()){this.Co=!0,this.Io=!1;return}if(At.set(qs,lc,At.CURRENT_DOMAIN),At.get(qs)!==null){this.Co=!0,this.Io=!1,At.remove(qs,At.CURRENT_DOMAIN);return}At.set(qs,lc,At.CURRENT_DOMAIN,void 0,us.None,Ae.Yes),At.get(qs)!==null&&(this.Co=!0,this.Io=!0,At.remove(qs,At.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.Co}isSameSiteNoneSecureNeeded(){return this.Io}}return s})();function jg(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Hg=(()=>{class s{constructor(t,e){this.f=t,this.mi=e}canTrack(){return this.f.isProjectActive()&&this.Yy()&&this.Ad()&&this.Xy()}canTrackInChild(){return this.f.isProjectActive()&&this.Ky()&&(this.Ad()||this.Jy())}Xy(){return this.f.cookielessTrackingEnabled?jg():this.mi.areCookiesEnabled()}Ad(){return tn(window.location.hostname,this.f.hostnames)}Yy(){return!this.Td()&&this.Qy()}Ky(){return!this.Td()&&this.Zy()}Jy(){return window.location.protocol==="about:"&&window.location.hostname===""}Td(){return"visibilityState"in document&&document.visibilityState==="prerender"}Qy(){return this.Rd()&&this.tE()}Zy(){return this.Rd()}tE(){try{return!!window.localStorage}catch{return!1}}Rd(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),Bg=(()=>{class s{constructor(t,e){this.Rc=!1,this.Cd=new Map,this.Id=new Map,this.Pd=new Map,this.Od="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";function e(e,t,r,s){return new(r||(r=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(e){a(e)}}function n(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,n)}c((s=s.apply(e,t||[])).next())}))}var t,r;Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(t||(t={})),function(e){e.debug="debug",e.warn="warn",e.implementation="implementation",e.error="error",e.critical="critical"}(r||(r={})),r.debug,r.warn,r.implementation,r.error,r.critical;let s={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class o{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:r}=t;this.send(r,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.contentType=e.contentType,this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(e,r){const o=r||Object.assign({},this.queryParams),a=!("ct"in o),i="application/json"===this.contentType||"string"!=typeof e&&!this.isArrayBuffer(e);"ct"in o||(this.compressionOpts&&a?o.ct=this.compressionOpts.compressionType:o.ct=t.UNCOMPRESSED);const n=i?JSON.stringify(e):e,c=Object.keys(o).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(o[e])}\`)).join("&"),h=\`\${this.endpoint}?\${c}\`;!function(e,t){const r=e.length;for(let s=0;s<r;s++)if(t(e[s],s))return!0;return!1}(this.mandatoryParameters,(e=>null==o[e]))?this.compressionOpts&&a&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(h,o,e))):this.doSend(h,o,n):s.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${h}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,r){const s=new XMLHttpRequest,o=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");s.open("POST",e),this.contentType&&s.setRequestHeader("Content-Type",this.contentType),s.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:s.responseText,status:s.status};this.onLoadCallback(e)}},s.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:o,metadata:t,events:r}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(s.timeout=this.timeout,s.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>s.abort(),Object.keys(this.headers).forEach((e=>{s.setRequestHeader(e,this.headers[e])})),s.send(r)}}class a{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class i{constructor(e){this.ramStorage={},this.byteSizeCounter=new a(e)}save({key:e,metadata:t,events:r}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:r}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const r=this.ramStorage[e];void 0!==r&&(delete r.metadata.datatype,t.push(r),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var n;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(n||(n={}));class c{constructor(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=n.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}init(){return e(this,void 0,void 0,(function*(){yield this.openCache(),this.cacheState===n.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}))}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}save(t){return e(this,void 0,void 0,(function*(){try{if(this.cacheState===n.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(t);if(this.cacheState!==n.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:e,metadata:r,events:s}=t;if(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached())return;yield this.cache.put(\`\${this.origin}/\${e}\`,new Response(s,{headers:r}))}catch(e){}}))}recover(t){return e(this,void 0,void 0,(function*(){(this.cache||(yield this.openCache(),this.cacheState===n.READY))&&this.doRecover(t)}))}openCache(){return e(this,void 0,void 0,(function*(){try{this.cacheState=n.OPEN_IN_PROGRESS,this.cache=yield self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=n.READY}catch(e){this.cacheState=n.OPEN_FAILED}}))}doRecover(t){return e(this,void 0,void 0,(function*(){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const e=yield this.cache.keys();if(0===e.length)return;const r=(yield this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,r)=>{t[r]=e})),delete t["content-type"];const r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),s=yield Promise.all(r);yield Promise.all(e.map((e=>this.cache.delete(e)))),t(s),this.byteSizeCounter.reset()}catch(e){}finally{this.recoveryInProgress--}}))}}class h{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new c(e,h.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new i(h.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}h.MAX_SIZE=16777216,function(){const t="CS_WORKER_SIGNATURE",r=new Map,s=new h("csPersisted");function a(e){var a;if((a=e)&&a.WORKER_SIGNATURE===t)switch(e.type){case"CreatePostRequest":{const{endpoint:a,compressionOutputType:i,useRetry:n,mandatoryParameters:c}=e,h={endpoint:a,mandatoryParameters:c,worker:!0};i&&(h.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(h.recoveryStorage=s);const d=new o(h);r.set(a,d),d.onLoad((e=>{const r={type:"onLoad",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)})),d.onError((e=>{const r={type:"onError",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)}))}break;case"SetQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.removeQueryParams(s)}break;case"Send":{const{endpoint:t,payload:s,queryParams:o}=e,a=r.get(t);a&&a.send(s,o)}break;case"Abort":{const{endpoint:t}=e,s=r.get(t);s&&s.abort()}break;case"SetHeader":{const{endpoint:t,headerName:s,headerValue:o}=e,a=r.get(t);a&&a.setRequestHeader(s,o)}break;case"SetTimeout":{const{endpoint:s,timeout:o}=e,a=r.get(s);a&&a.onTimeout((()=>{const e={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:t};self.postMessage(e)}),o)}break;default:throw new Error(JSON.stringify(e))}}self.addEventListener("message",(function(t){t.data.getReader?function(t,r){e(this,void 0,void 0,(function*(){const e=t.getReader();for(;;){const{done:t,value:s}=yield e.read();if(t)break;r(s)}}))}(t.data,a):a(t.data)}))}()})();`;try{this.ms=this.eE(e||i),this.Rc=!0,s.isTransferableStreamSupported()&&(this.Nd=new ReadableStream({start:r=>{this.Cc=r},cancel:()=>{this.Cc=null}}),this.ms.postMessage(this.Nd,[this.Nd]))}catch(r){r.name==="SecurityError"&&q.counters.cspErrors.count("network-worker"),this.Rc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.Od,this.Cc?this.Cc.enqueue(t):this.ms.postMessage(t)}eE(t){let e=window.csURL||window.webkitURL,i=window.Blob,r=window.Worker,o=new i([t],{type:"application/javascript"}),c=e.createObjectURL(o);x.whiteListFilename(c);let l=new r(c);return l.onmessage=h=>{let{type:p,endpoint:u,WORKER_SIGNATURE:y}=h.data;if(y===this.Od){if(p==="onLoad"){let{response:m}=h.data,v=this.Cd.get(u);v&&v(m)}else if(p==="onError"){let{response:m}=h.data,v=this.Id.get(u);v&&v(m)}else if(p==="onTimeout"){let m=this.Pd.get(u);m&&m()}}},l}registerOnLoadCallback(t,e){this.Cd.set(t,e)}registerOnErrorCallback(t,e){this.Id.set(t,e)}registerOnTimeoutCallback(t,e){this.Pd.set(t,e)}isSupported(){return this.Rc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),Fg=(()=>{class s{constructor(t){var e;this.Kt={},this.Jt=t.endpoint,this.be=t.networkWorker,this.sE=t.compressionOutputType,this.iE=t.useRetry,this.be.postMessage({type:"CreatePostRequest",endpoint:this.Jt,compressionOutputType:this.sE,useRetry:this.iE,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.be.postMessage({type:"SetQueryParams",endpoint:this.Jt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}getQueryParams(){return this.Kt}removeQueryParams(t){this.be.postMessage({type:"RemoveQueryParams",endpoint:this.Jt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]})}send(t,e){this.be.postMessage({type:"Send",endpoint:this.Jt,payload:t,queryParams:e})}abort(){this.be.postMessage({type:"Abort",endpoint:this.Jt})}onLoad(t){this.be.registerOnLoadCallback(this.Jt,t)}onError(t){this.be.registerOnErrorCallback(this.Jt,t)}setRequestHeader(t,e){this.be.postMessage({type:"SetHeader",endpoint:this.Jt,headerName:t,headerValue:e})}onTimeout(t,e){this.be.registerOnTimeoutCallback(this.Jt,t),this.be.postMessage({type:"SetTimeout",endpoint:this.Jt,timeout:e})}}return s})(),ar=(()=>{let s;return function(n){n.UNCOMPRESSED="0",n.GZIP="2"}(s||(s={})),s})(),Bl=(()=>{class s{constructor(t){this.onError=t}}return s})(),$g=(()=>{class s{constructor(t){var e;this.Kt={},this.Ic={},this.Md=i=>{for(let r of i){let{metadata:o,events:c}=r;this.send(c,o)}},this.Jt=t.endpoint,this.Yn=t.compressionOpts,this.Qt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.Pc=t.contentType,this.worker=!!t.worker,this.Qt&&this.Qt.recover(this.Md)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Kt[e]}):this.Kt={}}send(t,e){let i=e||{...this.Kt},r=!("ct"in i),o=this.Pc==="application/json"||typeof t!="string"&&!this.nE(t);"ct"in i||(!this.Yn||!r?i.ct=ar.UNCOMPRESSED:i.ct=this.Yn.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(p=>`${encodeURIComponent(p)}=${encodeURIComponent(i[p])}`).join("&"),h=`${this.Jt}?${l}`;if(ji(this.mandatoryParameters,p=>i[p]==null)){nt.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Yn&&r&&typeof c=="string"?this.Yn.compressor(c,this.Yn.compressionOutputType,p=>this.kd(h,i,p)):this.kd(h,i,c)}onLoad(t){this.Ki=t}onError(t){this.Xn=t}onTimeout(t,e){this.yi=t,this.Kn=e}abort(){this.Dd&&this.Dd()}setRequestHeader(t,e){this.Ic[t]=e}getQueryParams(){return this.Kt}nE(t){return t&&t.byteLength!==void 0}kd(t,e,i){let r=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");r.open("POST",t),this.Pc&&r.setRequestHeader("Content-Type",this.Pc),r.onload=()=>{if(this.Qt&&this.Qt.recover(this.Md),this.Ki){let c={params:e,responseText:r.responseText,status:r.status};this.Ki(c)}},r.onerror=()=>{this.Qt&&this.Qt.save({key:o,metadata:e,events:i}),this.Xn&&this.Xn({params:e})},this.Kn&&this.yi&&(r.timeout=this.Kn,r.ontimeout=()=>{this.yi()}),this.Dd=()=>r.abort(),Object.keys(this.Ic).forEach(c=>{r.setRequestHeader(c,this.Ic[c])}),r.send(i)}}return s})(),Fl=(()=>{class s{constructor(t){this.Oc=t,this.be=new Bg(this.Oc)}create(t,e,i,r,o=[]){if(this.be.isSupported()&&e)return new Fg({networkWorker:this.be,endpoint:t,compressionOutputType:i,useRetry:!!r,mandatoryParameters:o});{let c=i?{compressor:this.Oc.compress,compressionOutputType:i,compressionType:this.Oc.algorithm}:void 0;return new $g({endpoint:t,compressionOpts:c,recoveryStorage:r})}}}return s})(),Gg=(()=>{class s{constructor(t,e,i,r,o){this.O=t,this.R=e,this.Xe=i,this.wt=r,this.f=o}get(){return{exclusion:this.Xe.getAppliedTrackingDraw(),visitor:this.O.getVisitor(),session:this.R.getSession(),cvars:this.wt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Xe.exclude(this.f),this.O.removeVisitor(),this.R.removeSession(),this.wt.removeCustomVariablesSession()}include(t){this.Xe.removeExclusion(),this.O.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.wt.setCustomVariableSession(t.cvars):this.wt.removeCustomVariablesSession()}}return s})(),Kn=".",Qo="__DOT__",zg=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,$l="x";function qg(s){let[n,t,e,i,r,o,c,l,h]=Jg(s);return{id:n,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(r),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===$l?null:h}}function Wg(s){var n;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(n=s.identityPrint)!==null&&n!==void 0?n:$l],csString),Xg),Kn)}function Yg(s){return zg.test(s)}function Xg(s){return csString.prototype.replace.call(s,/\./g,Qo)}function Kg(s){return csString.prototype.replace.call(s,new csRegExp(Qo,"g"),Kn)}function Jg(s){return csString.prototype.indexOf.call(s,Qo)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Kn),Kg):csString.prototype.split.call(s,Kn)}var H=(()=>{let s;return function(n){n.QUOTA_REACHED="X",n.RECORDING_RULES_TARGETING="8",n.ANALYTICS_ONLY_RULES_TARGETING="9",n.ANALYTICS_ONLY="0",n.RECORDING_GLOBAL_SAMPLING="5",n.RECORDING_TEMPORARILY="T",n.RECORDING_URL_SAMPLING="6",n.RECORDING_ETR_SAMPLING="7",n.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",n.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Kt=(()=>{let s;return function(n){n.ETR_OFF="0",n.ETR_ON="1"}(s||(s={})),s})(),ps=(()=>{let s;return function(n){n.ETR_LEGACY="0",n.ETR_SESSION="1",n.ETR_PAGE="2"}(s||(s={})),s})(),ae=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),mo=(()=>{let s;return function(n){n.UNNECESSARY="U",n.NOT_EXPRESSED="N",n.WITHDRAWN="W",n.GRANTED="G"}(s||(s={})),s})();var Qg=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Gl=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,zl=".";function Zg(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],zl)}function tm(s){if(!Zo(s))return null;let n=yo(s);return n!==null?ql(n):null}function ql(s){var n,t;let[e,i,r,o]=csString.prototype.split.call(s,zl);return{collectState:i,replayConsent:(n=r)!==null&&n!==void 0?n:mo.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Qg.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function Zo(s){return Gl.test(s)}function yo(s){if(!s)return null;let n=(()=>{var t;return(t=csString.prototype.match.call(s,Gl))===null||t===void 0?void 0:t[1]})();return n!=null?n:null}var Be="_cs_ex",hc=2592e6,em=/^[0-9]+$/,sm=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.Ei=t}onCookieToRemove(t){this.Si=t}get(){return this.f.cookielessTrackingEnabled?Number(this.X.getItem(Be)):Number(this.N.get(Be))}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(Be,t):(this.N.set(Be,t,hc),(e=this.Ei)===null||e===void 0||e.call(this,Be,t,hc))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(Be):(this.N.delete(Be),(t=this.Si)===null||t===void 0||t.call(this,Be))}static isValidExclusionString(t){return em.test(t)}}return s})(),ns="_cs_cvars",im=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.Ei=t}onCookieToRemove(t){this.Si=t}get(){return this.f.cookielessTrackingEnabled?this.X.getItem(ns):this.N.get(ns)}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(ns,t):(this.N.set(ns,t),(e=this.Ei)===null||e===void 0||e.call(this,ns,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(ns):(this.N.delete(ns),(t=this.Si)===null||t===void 0||t.call(this,ns))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();function ue(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}var nm=1,uc=csSymbol("nodeIdentifier");function ct(s){let n=s[uc];return n!=null?n:s[uc]=nm++}var en=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return De(this.set)}get count(){return this.set.size}}return s})(),rm=(()=>{class s extends en{constructor(t="high"){super(),this.lE=t}add(t){this.set.add(t),this.set.size===1&&qt(()=>{this.set.clear()},this.lE)}}return s})();function cr(s,n=!1){let t=new en;return{push(e){t.count===0&&(n?qt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}function om(){let s=new Error,n=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(n.length===0)return"";let t=cm(n);return t===""||(n=lm(n,t),n.length===0)?"":Wl(n[0])}function am(s){return csString.prototype.indexOf.call(s,"@")!==-1}function cm(s){return s.length>0?Wl(s[0]):""}function lm(s,n){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,n)===-1)}function Wl(s){let n="",t;am(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(n=e[1]),n}var hm=s=>s;function um(s,n,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,n,{get(){var r;if(this[i])return this[i];let o=(r=t.get)===null||r===void 0?void 0:r.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let p=c[l],u=Reflect.set(c,l,h);return e.forEach(y=>y(this,h,p,"subproperty")),u}}):this[i]=o,this[i])},set(){var r;let o=arguments,c=this[n],l=(r=t.set)===null||r===void 0?void 0:r.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){nt.error(h)}return l}})}function dm(s,n,t){let e=pm(s,n);if(!e)return null;let i=(r,o,c,l)=>t(r,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function pm(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,um(s,n,i,e),e):(nt.warn(`Cannot intercept non configurable property '${csString(n)}' of object '${s}'`),null):(nt.warn(`Cannot intercept property '${csString(n)}' because it does not exist directly on the target object '${s}'`),null)}function fm(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,n);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return nt.warn(`Cannot intercept read only function '${csString(n)}' of object '${s}'`),null;let i=new Set;s[t]=i;let r=s[n];if(typeof r=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(De(i),p=>p(c))}catch(p){nt.critical(p)}let h=r.apply(this,c);return Ds(()=>{let p={result:h,context:this,args:c};csArray.prototype.forEach.call(l,u=>u(p))},Ne.MonkeyPatch),h};mm(o,r),s[n]=o}return i}function Xt({target:s,methodName:n,hook:t,hookPrepareArgs:e=hm,options:i}){let r=fm(s,n);if(!r)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:om()}:{};return p=>t({...p,...h,args:l})};return{activate:()=>{r.add(o)},deactivate:()=>{r.delete(o)}}}function gm(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,Object.defineProperty(s,n,{set(){var r;let o=this[n],c=arguments;return Ds(()=>{e.forEach(l=>l(this,c[0],o,"property"))},Ne.MonkeyPatch),(r=i.set)===null||r===void 0?void 0:r.apply(this,c)}}),e):(nt.warn(`Cannot intercept read only property '${csString(n)}' of object '${s}'`),null):e}function Jn(s,n,t){let e=gm(s,n);if(!e)return null;let i=(r,o,c)=>t(r,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function mm(s,n){s.prototype=n.prototype,Object.defineProperty(s,"toString",{value:()=>n.toString()})}var fi=(()=>{var s;class n{static hE(e){this.Ls.forEach(i=>{e(i,"initial")})}static Jn(e){if(this.D||(this.D=new csMutationObserver(i=>{for(let r of i)r.target.isConnected&&W(r.addedNodes,this.uE),W(r.removedNodes,this.dE)})),csArray.prototype.push.call(this.Te,e),!this.G){this.G=!0,this.D.observe(document,this.Qn);for(let i of Os.getAllShadowHosts(document)){let r=csElementshadowRoot.apply(i);this.Ls.add(r),this.D.observe(r,this.Qn)}this.xc||(this.xc=Xt({target:Element.prototype,methodName:"attachShadow",hook:i=>this.pE(i.result)&&this.Ud(i.result)})),this.xc.activate()}this.hE(e)}static pE(e){return e.isConnected&&e.ownerDocument===document}static Zn(e){var i,r;this.Te=csArray.prototype.filter.call(this.Te,o=>o!==e),this.Te.length===0&&(this.Te=[],this.G=!1,(i=this.D)===null||i===void 0||i.disconnect(),(r=this.xc)===null||r===void 0||r.deactivate(),this.Ls.clear())}constructor(e){this.A=e,this.A=gs("DocumentShadowRootObserver:callback",(i,r)=>e(i,r))}get shadowRoots(){return De(s.Ls)}takeRecords(){var e,i;return(i=(e=s.D)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){Os.isSupported()&&s.Jn(this.A)}disconnect(){Os.isSupported()&&s.Zn(this.A)}}return s=n,n.Te=[],n.Ls=new Set,n.G=!1,n.Qn={childList:!0,subtree:!0},n.Ud=t=>{s.Ls.has(t)||(s.D.observe(t,s.Qn),s.Ls.add(t),W(s.Te,e=>e(t,"added")))},n.uE=t=>{Ut(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.Ud)},n.dE=t=>{t.isConnected||Ut(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Ls.has(e)&&(s.Ls.delete(e),W(s.Te,i=>i(e,"removed")))})},it([O()],n.prototype,"observe",null),it([O()],n.prototype,"disconnect",null),n})(),dc={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},se=(()=>{var s;class n{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Lc(e){if(s.shadowRootFilters.length>0&&ri(e))for(let i=0;i<s.shadowRootFilters.length;i++){let r=s.shadowRootFilters[i];if(r(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,dc)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,qt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(r=>{this.mutationObserver.observe(r,dc)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(Os.getAllShadowHosts(document),r=>i(csElementshadowRoot.apply(r),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Lc(document),this.shadowRootObserver=new fi(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,W(this.shadowRootObserver.shadowRoots,r=>{this.Lc(r)}))}static disconnect(e,i){var r,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(r=this.shadowRootObserver)===null||r===void 0||r.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.Vd=i;let r=cr(o=>e(o,this),!0);this.A=gs("DocumentMutationObserver:callback",o=>{W(o,c=>r.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),r=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&r.length?tf(i,r):i!=null?i:r}observe(){s.observe(this.A,this.Vd)}disconnect(){s.disconnect(this.A,this.Vd)}}return s=n,n.callbacks=[],n.shadowRootCallbacks=[],n.started=!1,n.observedTargets=new Set,n.shadowRootFilters=[],n.mutationCallback=t=>{_t.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},n.onShadowRoot=(t,e)=>{W(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Lc(t):s.disconnectShadowRoot(t)},n.isRefreshing=!1,it([O()],n.prototype,"observe",null),it([O()],n.prototype,"disconnect",null),n})(),Lr;function Pt(s){if(Lr||(Lr=document.createElement("div")),!(!!s&&T(s)))return nt.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Vt.call(Lr,s),!0}catch{return nt.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function ci(s,n){if(tc)return tc.call(s,n);let t=s;do{if(Vt.call(t,n))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var de=(()=>{class s{get selectors(){return this.$e===""?null:this.$e}constructor(t,e={closest:!1}){this.A=t,this.At=e,this.$e="",this.tr=new en,this.Po=xs(i=>{if(this.$e==="")return;let r=[];for(let o of Fo(i,c=>c.addedNodes)){if(!(wf(o)||this.At.closest&&ni(o)))continue;let c=this.At.closest?this.fE(o,this.$e):this.findMatchingElements(o,this.$e);Ja(c,r)}r.length&&this.A(r,"added")},"SelectorObserver.processMutations"),this.gE=(i,r)=>{if(this.$e===""||r!=="added")return;let o=this.findMatchingElements(i,this.$e);o.length&&this.A(o,"added")},this.z=new se(this.Po,this.gE)}observe(t){this.$e===""?this.z.observe():this.$e+=",",this.$e+=t;let e=this.findMatchingElements(document,t);for(let i of this.z.shadowRoots){let r=this.findMatchingElements(i,t);Ja(r,e)}e.length&&(W(e,i=>{this.tr.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.Po(this.z.takeRecords())}disconnect(){this.z.disconnect(),this.tr.clear(),this.$e=""}fE(t,e){let i=[];if(ni(t)){if(t.parentElement){let r=ci(t.parentElement,e);r&&csArray.prototype.push.call(i,r)}return csArray.prototype.filter.call(i,r=>this.tr.has(r)===!1)}else{if(ze(t)){let r=ci(t,e);if(r)return csArray.prototype.push.call(i,r),csArray.prototype.filter.call(i,o=>this.tr.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=ms(window.csquerySelectorAll[t.nodeType].call(t,e));return ft(t)&&Vt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,r=>this.tr.has(r)===!1)}}return it([O()],s.prototype,"observe",null),it([O()],s.prototype,"disconnect",null),it([Ot("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})();function ym(s){let n=null;return t=>t?n=t:n||(n=s())}var Ws=ym(()=>new WeakMap),xn=(()=>{let s;return function(n){function t(c){return Ws().get(c)}n.getAll=t;function e(c,l){var h;return(h=Ws().get(c))===null||h===void 0?void 0:h[l]}n.get=e;function i(c,l,h){let p=Ws().get(c);p||Ws().set(c,p={}),p[l]=h}n.set=i;function r(c,l){let h=Ws().get(c);h&&delete h[l]}n.remove=r;function o(){Ws(new WeakMap)}n.reset=o}(s||(s={})),s})(),Z=(()=>{let s;return function(n){function t(l,h,p){var u;if(typeof Node!="undefined"&&l instanceof Node)xn.set(l,h,p);else{let y=l;(u=y.props)!==null&&u!==void 0||(y.props={}),y.props[h]=p}}n.setProperty=t;function e(l,h){var p;return typeof Node!="undefined"&&l instanceof Node?xn.get(l,h):(p=l.props)===null||p===void 0?void 0:p[h]}n.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?xn.getAll(l):l.props}n.getProperties=i;function r(l,h){let p=null;return o(l,(u,y,m)=>h(u)&&(p=u)&&!!m()),p}n.findDescendant=r;function o(l,h){c(l,void 0,h)}n.traverse=o;function c(l,h,p){let u=!1;if(p(l,h,()=>u=!0),u)return;let m=l.shadowRoot;m&&c(m,l,p);let v=l.children;if(v!=null&&v.length){for(let N of v)if(N&&(c(N,l,p),u))break}}}(s||(s={})),s})(),pe=(()=>{class s{constructor(){this.ae=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:I.now(),t.timestamp==null&&(t.timestamp=I.now()),csArray.prototype.forEach.call(this.ae,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.ae=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.ae,t),()=>{let e=csArray.prototype.indexOf.call(this.ae,t);csArray.prototype.splice.call(this.ae,e,1)}}}return s})(),L=(()=>{let s;return function(n){let t;(function(w){w[w.NotMasked=0]="NotMasked",w[w.Parent=1]="Parent",w[w.Child=2]="Child"})(t=n.MaskedElementState||(n.MaskedElementState={})),n.maskedProp="masked",n.maskedAttributeProp="maskedAttribute";function e(w){return Jt(w)&&"Attributes"in w&&"PIISelectors"in w?w.Attributes instanceof Array&&w.PIISelectors instanceof Array:!1}n.isSelectorUserInput=e;function i(w){if(!Jt(w)||w===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in w||(w.Attributes=[]),"PIISelectors"in w||(w.PIISelectors=[]),w}n.sanitizeSelectorUserInput=i;function r(w){var S;return(S=Z.getProperty(w,n.maskedProp))!==null&&S!==void 0?S:{state:t.NotMasked}}n.getMaskedElementDetails=r;function o(w){var S;return(S=Z.getProperty(w,n.maskedAttributeProp))!==null&&S!==void 0?S:{attributes:[]}}n.getMaskedAttributeDetails=o;function c(w){let S=Z.getProperty(w,n.maskedProp);return(S==null?void 0:S.state)===t.Parent}n.isMaskedElement=c;function l(w){let S=Z.getProperty(w,n.maskedProp);return(S==null?void 0:S.state)===t.Child}n.isMaskedElementChild=l;function h(w,S){let C=Z.getProperty(w,n.maskedAttributeProp);return((C==null?void 0:C.attributes)==null?void 0:csArray.prototype.indexOf.call(C==null?void 0:C.attributes,S))>-1}n.isMaskedAttribute=h;function p(w,S){Z.setProperty(w,n.maskedProp,S)}n.setMaskedElementProperty=p;function u(w){Z.setProperty(w,n.maskedProp,void 0)}n.unsetMaskedElementProperty=u;function y(w,S){Z.setProperty(w,n.maskedAttributeProp,S)}n.setMaskedAttributeProperty=y;function m(w,S){let C=csArray.prototype.filter.call(w.PIISelectors,F=>Pt(F));S.elementSelector.length>0&&csArray.prototype.push.call(C,...csString.prototype.split.call(S.elementSelector,","));let k=D([...C]),_={elementSelector:csArray.prototype.join.call(k,","),attrSelector:S.attrSelector,attrSelectors:S.attrSelectors};return csArray.prototype.forEach.call(w.Attributes,F=>{F!=null&&F.attrName&&(F!=null&&F.selector)&&Pt(F.selector)&&!v(_.attrSelectors,F)&&csArray.prototype.push.call(_.attrSelectors,F)}),_.attrSelector=N(_.attrSelectors),_}n.getComputedSelectorSettings=m;function v(w,S){return csArray.prototype.some.call(w,C=>C.selector===S.selector&&C.attrName===S.attrName)}function N(w){let S="";return csArray.prototype.forEach.call(w,C=>{let k=csString.prototype.split.call(C.selector,",");csArray.prototype.forEach.call(k,_=>{Pt(_)&&(S&&(S+=","),S+=_)})}),S}function D(w){if(w.length<=1)return w;let S=[];for(let C of w){let k=csString.prototype.split.call(C,",");for(let _ of k)csArray.prototype.indexOf.call(S,_)===-1&&csArray.prototype.push.call(S,_)}return S}}(s||(s={})),s})(),Yl=(()=>{class s extends pe{constructor(t){super(),this.B=null,this.Oo=null,this.D=null,this.Us=null,this.jd=["value","checked","src","data","alt"],this.Mo={state:L.MaskedElementState.Child},this.mE=e=>{for(let i of e){if(L.isMaskedElement(i.target)||L.isMaskedElementChild(i.target))for(let r=0;r<i.addedNodes.length;r+=1){let o=i.addedNodes[r];L.isMaskedElement(o)||L.isMaskedElementChild(o)||ft(o)&&this.Hd(o)}for(let r=0;r<i.removedNodes.length;r+=1){let o=i.removedNodes[r];lt.isConnected(o)||this.Bd(o)}}},this.yE=t}setMaskedElementSettings(t){this.ys=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,r;this.ys||(nt.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.ys={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.ys;(t=this.Us)!==null&&t!==void 0||(this.Us=this.EE()),o.length!==0&&((e=this.B)!==null&&e!==void 0||(this.B=this.SE()),this.B.observe(o)),c.length!==0&&((i=this.Oo)!==null&&i!==void 0||(this.Oo=this.vE(l)),this.Oo.observe(c)),(r=this.D)!==null&&r!==void 0||(this.D=new se(this.mE,(h,p)=>p==="added"&&this.wE(h))),this.D.observe(),csSetTimeout(this.yE)}onStop(){var t,e,i;this.B&&(this.Bd(document),this.B.disconnect()),(t=this.Oo)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect(),(i=this.Us)===null||i===void 0||i.disconnect()}EE(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}SE(){return new de(t=>{csArray.prototype.forEach.call(t,e=>{this._E(e)?this.Hd(e):(this.bE(e),this.AE(e))})})}vE(t){return new de(e=>{csArray.prototype.forEach.call(e,i=>this.TE(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=L.getMaskedElementDetails(t.target);if(i.state!==L.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let r={state:L.MaskedElementState.Parent,width:e.width,height:e.height};L.setMaskedElementProperty(t.target,r),this.produceEvent({type:"ResizeMaskedElement",target:ct(t.target),width:e.width,height:e.height})}AE(t){!this.Us||!ft(t)||Qi(t)||this.Us.observe(t)}_E(t){let e=csNodeparentNode.apply(t);return e?L.isMaskedElement(e)||L.isMaskedElementChild(e):ri(t)?L.isMaskedElement(t.host)||L.isMaskedElementChild(t.host):!1}wE(t){(L.isMaskedElement(t.host)||L.isMaskedElementChild(t.host))&&L.setMaskedElementProperty(t,this.Mo)}Bd(t){Ut(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{L.unsetMaskedElementProperty(i)})}bE(t){let e=t.getBoundingClientRect(),i={state:L.MaskedElementState.Parent,width:e.width,height:e.height};L.setMaskedElementProperty(t,i),this.RE(t),Ut(t).visitAll(r=>r!=t&&L.setMaskedElementProperty(r,this.Mo))}Hd(t){L.setMaskedElementProperty(t,this.Mo),Ut(t).visitAll(e=>e!=t&&L.setMaskedElementProperty(e,this.Mo))}RE(t){var e;let i=(e=Z.getProperty(t,L.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let r=0;r<this.jd.length;r+=1){let o=this.jd[r];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&L.setMaskedAttributeProperty(t,i)}TE(t,e){var i;let r=(i=Z.getProperty(t,L.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(r.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Vt.call(t,l.selector))&&csArray.prototype.push.call(r.attributes,c)}r.attributes.length!==0&&L.setMaskedAttributeProperty(t,r)}}return ue([O()],s.prototype,"resizeObserverCallback",null),s})(),Ee=(()=>{let s;return function(n){n.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",n.WHITELISTED_STATUS="whitelisted";function t(r){return Z.getProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP)===n.WHITELISTED_STATUS}n.isWhitelistedElement=t;function e(r){Z.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,n.WHITELISTED_STATUS)}n.whitelistElement=e;function i(r){Z.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,void 0)}n.removeWhitelistElement=i}(s||(s={})),s})(),Xl=(()=>{class s{constructor(){this.Uc=0,this.U=!1,this.Fd="data-cs-capture",this.Vs=t=>{for(let e of t){if(Ee.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];Ee.isWhitelistedElement(r)||ft(r)&&this.$d(r)}for(let i=0;i<e.removedNodes.length;i+=1){let r=e.removedNodes[i];lt.isConnected(r)||this.Gd(r)}}}}start(){this.Uc++,!this.U&&(this.U=!0,this.CE())}CE(){this.B||(this.B=new de(e=>W(e,i=>this.$d(i))));let t=this.Vc?`[${this.Fd}], ${this.Vc}`:`[${this.Fd}]`;this.B.observe(t),this.D||(this.D=new se(this.Vs,(e,i)=>i==="added"&&this.IE(e))),this.D.observe()}stop(){this.U&&(this.Uc--,this.Uc===0&&(this.U=!1,this.PE()))}PE(){this.B&&(this.Gd(document),this.B.disconnect()),this.D&&this.D.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Pt(t))this.Vc=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Vc}$d(t){Ut(t).visitAll(e=>{Ee.whitelistElement(e)})}IE(t){Ee.isWhitelistedElement(t.host)&&Ee.whitelistElement(t)}Gd(t){Ut(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{Ee.removeWhitelistElement(i)})}}return s})(),Te=(()=>{let s;return function(n){n.EDITABLE_NODE_PROP="editableNode";function t(r){return Z.getProperty(r,n.EDITABLE_NODE_PROP)===!0}n.isEditableNode=t;function e(r){Z.setProperty(r,n.EDITABLE_NODE_PROP,!0)}n.markEditableNode=e;function i(r){Z.setProperty(r,n.EDITABLE_NODE_PROP,void 0)}n.unmarkEditableNode=i}(s||(s={})),s})(),Kl=(()=>{class s{constructor(){this.B=null,this.D=null,this.U=!1,this.Vs=t=>{for(let e of t)if(Te.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];if(!Te.isEditableNode(r)){if(ni(r)||bl(r)){Te.markEditableNode(r);continue}ft(r)&&this.zd(r)}}}}start(){this.U||(this.U=!0,this.B=new de(t=>W(t,e=>{this.zd(e)})),this.B.observe("[contenteditable]"),this.D=new se(this.Vs,(t,e)=>e==="added"&&this.OE(t)),this.D.observe())}stop(){var t,e;this.U&&(this.U=!1,(t=this.B)===null||t===void 0||t.disconnect(),this.B=null,(e=this.D)===null||e===void 0||e.disconnect(),this.D=null)}zd(t){Ut(t).visitAll(e=>{Te.markEditableNode(e)})}OE(t){Te.isEditableNode(t.host)&&Te.markEditableNode(t)}}return s})(),le=(()=>{let s;return function(n){n.ENCRYPTED_NODE_PROP="encrypted";function t(r){return Z.getProperty(r,n.ENCRYPTED_NODE_PROP)===!0}n.shouldEncrypt=t;function e(r){Z.setProperty(r,n.ENCRYPTED_NODE_PROP,!0)}n.markEncryptedNode=e;function i(r){Z.setProperty(r,n.ENCRYPTED_NODE_PROP,void 0)}n.unmarkEncryptedNode=i}(s||(s={})),s})(),Jl=(()=>{class s{constructor(){this.B=null,this.D=null,this.jc=new Set,this.U=!1,this.Vs=t=>{for(let e of t)if(le.shouldEncrypt(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];if(!le.shouldEncrypt(r)){if(ni(r)||bl(r)){le.markEncryptedNode(r);continue}ft(r)&&this.qd(r)}}}}start(){if(this.U)return;this.U=!0,this.B=new de(e=>W(e,i=>{this.qd(i)}));let t=csArray.prototype.join.call(De(this.jc),",");this.B.observe(t),this.D=new se(this.Vs,(e,i)=>i==="added"&&this.NE(e)),this.D.observe()}stop(){var t,e;this.U&&(this.U=!1,(t=this.B)===null||t===void 0||t.disconnect(),this.B=null,(e=this.D)===null||e===void 0||e.disconnect(),this.D=null)}addSelector(t){!Pt(t)||this.jc.has(t)||(this.jc.add(t),this.B&&this.B.observe(t))}qd(t){Ut(t).visitAll(e=>{le.markEncryptedNode(e)})}NE(t){le.shouldEncrypt(t.host)&&le.markEncryptedNode(t)}}return s})(),Em="spki",pc="RSA-OAEP",Sm="SHA-256",fc="AES-CTR",vm="SHA-1",gc=190,yt=(()=>{let s;return function(n){var t;let e=!1,i=null,r,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;n.crypto=(t=st.crypto)===null||t===void 0?void 0:t.subtle,n.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}n.isKeyImported=l;function h(){return i}n.getCryptoKey=h;function p(){var k,_;return((_=(k=st.self.crypto)===null||k===void 0?void 0:k.subtle)===null||_===void 0?void 0:_.encrypt)!=null&&st.self.CryptoKey!=null}n.isSupported=p;async function u(k){r=n.crypto.importKey(Em,Vo(k),{name:pc,hash:Sm},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await r,r=void 0,i||nt.warn(`Fail to import public key '${k}'`)}n.importKey=u;async function y(k){if(!p()||e)return null;await r;let _=nr(k);_.byteLength>gc&&(_=_.slice(0,gc));try{let F=await n.crypto.encrypt({name:pc},i,_);return ao(F)}catch{return null}}n.asymmetricEncrypt=y;async function m(k,_){if(!p()||e)return null;let F={counter:_.initializationVector,name:fc,length:64},Q=o.encode(k);try{let ot=await n.crypto.encrypt(F,_.cryptoKey,Q);return ao(ot)}catch{return null}}n.symmetricEncrypt=m;async function v(k){let _=await N(k);if(!_)throw new Error("Export secret failed");let F=await y(_);if(!F)throw new Error("Encrypt secret failed");return F}n.encryptSecret=v;async function N(k){var _;if(!p())return null;try{return(_=(await n.crypto.exportKey("jwk",k)).k)!==null&&_!==void 0?_:null}catch{return null}}async function D(){if(!p()||e)return null;try{return{cryptoKey:await n.crypto.generateKey({name:fc,length:128},!0,["encrypt","decrypt"]),initializationVector:st.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}n.generateSymmetricKey=D;function w(k){c=k}n.setDigestSalt=w;async function S(k){k=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(k)),c&&(k=`${k}:${c}`);let _=o.encode(k);try{let F=await n.crypto.digest(vm,_);return Bn(F)}catch{return null}}n.digest=S;function C(){return st.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}n.generateKeyPair=C}(s||(s={})),s})(),He=(()=>{let s;return function(n){n.REGEX="regex",n.START="start",n.NOT_START="not-start",n.END="end",n.NOT_END="not-end",n.CONTAIN="contain",n.NOT_CONTAIN="not-contain",n.EXACT="exact",n.NOT_EXACT="not-exact"}(s||(s={})),s})(),rs=(()=>{let s;return function(n){n.START="start",n.NOT_START="not-start",n.END="end",n.NOT_END="not-end",n.CONTAIN="contain",n.NOT_CONTAIN="not-contain",n.EXACT="exact",n.NOT_EXACT="not-exact"}(s||(s={})),s})(),As=(()=>{let s;return function(n){n.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",n.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",n.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",n.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),sn=(()=>{class s{constructor(){this.Hc=[]}setRegexRules(t){this.Hc=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.ME(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.Hc,e=>this.Wd(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.Hc,e=>this.Wd(t,e))}Wd(t,e){var i,r;let o=this.kE(t,e);return!this.DE(e)||!this.xE(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((r=e.regex)===null||r===void 0)&&r.test(o))}DE(t){let e=new csDate,i=t.startDate&&t.startDate>e,r=t.endDate&&t.endDate<e;return!i&&!r}xE(t){let e=t.samplingRate!==100,i=e&&Oe.boolean(t.samplingRate);return!e||i}ko(t){return!Tt(t,"http://")&&!Tt(t,"https://")?`https://${t}`:t}kE(t,e){let i=Jo(this.ko(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Do(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}ME(t){let e=null,i=!1;switch(t.operator){case rs.NOT_START:case He.NOT_START:i=!0;case rs.START:case He.START:e=new csRegExp(`^${t.value}`,this.Do(t));break;case rs.NOT_END:case He.NOT_END:i=!0;case rs.END:case He.END:e=new csRegExp(`${t.value}$`,this.Do(t));break;case rs.NOT_CONTAIN:case He.NOT_CONTAIN:i=!0;case rs.CONTAIN:case He.CONTAIN:case He.REGEX:e=new csRegExp(`${t.value}`,this.Do(t));break;case rs.NOT_EXACT:case He.NOT_EXACT:i=!0;case rs.EXACT:case He.EXACT:e=new csRegExp(`^${t.value}$`,this.Do(t));break;default:nt.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let r=t.startDate?this.Yd(t.startDate):void 0,o=t.endDate?this.Yd(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:r,endDate:o}}Yd(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),ta=(()=>{class s{constructor(t,e,i,r){this.ce=t,this.er=e,this.ir=i,this.bt=r}init(){this.LE()}shouldMaskNonTextElements(){if(this.ce.anonymisationMethod!==As.replayRecordingMaskedUrlRegexRules)return!1;if(this.ce.isSMB)return this.shouldUseAnonymization();let t=this.ir.getMatchingRules(this.er.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.bt&&!this.bt.isReplayUnanonymizedAllowedByConsent()){switch(this.ce.anonymisationMethod){case null:case As.replayRecordingUnmaskedUrlRegex:return!(this.ce.replayRecordingUnmaskedUrlRegex&&this.ce.replayRecordingUnmaskedUrlRegex.test(this.er.getAnonymizedUrl()));case As.replayRecordingUnmaskedUrlRegexRules:return!this.ir.evaluateUrl(this.er.getAnonymizedUrl())}return!0}else{switch(this.ce.anonymisationMethod){case null:case As.replayRecordingMaskedUrlRegex:return!!(this.ce.replayRecordingMaskedUrlRegex&&this.ce.replayRecordingMaskedUrlRegex.test(this.er.getAnonymizedUrl()));case As.replayRecordingMaskedUrlRegexRules:return this.ir.evaluateUrl(this.er.getAnonymizedUrl())}return!1}}LE(){this.ce.anonymisationMethod===As.replayRecordingMaskedUrlRegexRules&&this.ce.replayRecordingMaskedUrlRegexRules?this.ir.setRegexRules(this.ce.replayRecordingMaskedUrlRegexRules):this.ce.anonymisationMethod===As.replayRecordingUnmaskedUrlRegexRules&&this.ce.replayRecordingUnmaskedUrlRegexRules&&this.ir.setRegexRules(this.ce.replayRecordingUnmaskedUrlRegexRules)}}return s})();function wm(s){return s.nodeType===1}function Mt(s){let n=csEventtarget.apply(s);return n&&wm(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}function _m(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function bm(){return(s,n,t)=>{let e=t.value;return e&&(t.value=function(i){if(Mt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var It=(()=>{let s;return function(n){n[n.TAP=0]="TAP",n[n.LONG_PRESS=1]="LONG_PRESS",n[n.DRAG=2]="DRAG",n[n.FLICK=3]="FLICK",n[n.PINCH_IN=4]="PINCH_IN",n[n.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Rn=(()=>{let s;return function(n){n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n[n.LEFT=3]="LEFT",n[n.RIGHT=4]="RIGHT"}(s||(s={})),s})(),Am=(()=>{class s{compute(t,e){let i=this.js(e.x)-this.js(t.x),r=this.js(e.y)-this.js(t.y),o=e.time-t.time;return{duration:o,distance:this.Xd(i,r),direction:this.UE(i,r),velocity:this.VE(i,r,o)}}computePinchMetrics(t,e){let i=this.js(e.x)-this.js(t.x),r=this.js(e.y)-this.js(t.y);return{duration:e.time-t.time,distance:this.Xd(i,r)}}getScale(t,e){return Math.abs(e/t-1)}js(t){return t/window.devicePixelRatio}Xd(t,e){return Math.round(Math.sqrt(t*t+e*e))}VE(t,e,i){let r=i/1e3,o=t/r,c=e/r;return Math.round(Math.abs(o)+Math.abs(c))}UE(t,e){return Math.abs(t)>Math.abs(e)?t>0?Rn.RIGHT:Rn.LEFT:e>0?Rn.DOWN:Rn.UP}}return s})(),Ql=typeof performance!="undefined"&&!!performance.now,mc=Ql?()=>performance.now():()=>csDate.now(),Tm=(()=>{var s;return Ql?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Cn={now(){return Math.round(mc()+Tm)},elapsed(){return mc()}};function yc(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var Rm=1e3,Cm=100,Im=.1,Eo=(()=>{class s{constructor(){this.Bt={},this.Bc=()=>{},this.xo=new Am,this.Re()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Bc=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.jE(t))return;this.HE(t)&&this.Re();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Cn.now()};if(t.touches.length===1)this.Bt.startPinchTime=e.time,this.Bt.firstTouch=e;else if(t.touches.length===2&&(this.Bt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Cn.now()},this.Bt.firstTouch&&this.Bt.secondTouch)){let i=this.xo.computePinchMetrics(this.Bt.firstTouch,this.Bt.secondTouch);this.Ji=i.distance}csArray.prototype.push.call(this.nr,e),this.Lo=Mt(t)}processActionMove(){this.Fc=!0}processActionUp(t){if(this.BE(t)){if(csArray.prototype.push.call(this.nr,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Cn.now()}),this.FE(t)&&this.Bt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Bt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Cn.now()};this.Bt.firstTouch&&(this.Bt.firstTouch=e,this.Bt.secondTouch=i),this.$E(t)}this.Ji||this.GE()&&this.zE(t)}}Re(){this.nr=[],this.Lo=null,this.Fc=!1,this.Ji=null,this.rr=!0}zE(t){let e=this.xo.compute(this.nr[0],this.nr[1]);this.rr=t.isTrusted;let i=this.Fc?this.qE(e):this.WE(e);if(this.YE(i.type,t.changedTouches)){let r=t.changedTouches[0];i.pageX=yc(r.pageX,1),i.pageY=yc(r.pageY,1)}this.Bc(i,t)}$E(t){if(!(this.Bt.firstTouch&&this.Bt.secondTouch))return;let e=this.xo.computePinchMetrics(this.Bt.firstTouch,this.Bt.secondTouch);this.rr=t.isTrusted;let i=this.XE(e);i&&this.Bc(i,t)}XE(t){return!this.Ji||this.xo.getScale(this.Ji,t.distance)<Im?void 0:{type:this.Ji>t.distance?It.PINCH_IN:It.PINCH_OUT,target:this.Lo,distance:t.distance,isTrusted:this.rr}}qE(t){return{type:t.velocity<Cm?It.DRAG:It.FLICK,target:this.Lo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.rr}}WE(t){return{type:t.duration<Rm?It.TAP:It.LONG_PRESS,target:this.Lo,isTrusted:this.rr}}YE(t,e){return t===It.TAP&&e&&e.length===1}HE(t){return t.touches.length===1}GE(){return this.nr.length===2}jE(t){return t.touches.length>0}BE(t){return t.changedTouches.length>0}FE(t){return this.Fc&&!!this.Ji&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),ea=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),Zl=!0,Ln=csSymbol("safe"),Ec=csSymbol("task");function Et(s,n=Zl){var t;(t=s[Ln])!==null&&t!==void 0||(s[Ln]=function(e){let i=arguments;Ds(()=>(e[Ec]=oe,s.listener.apply(s.boundElement,i)),Ne.EventListener,e[Ec])}),s.boundElement.addEventListener(s.type,s[Ln],n)}function St(s,n=Zl){s.boundElement.removeEventListener(s.type,s[Ln],n)}var th=(()=>{class s extends ea{constructor(t){super(),this.KE=t,this.Hs=[{boundElement:document,type:"touchstart",listener:e=>this.Q(e)},{boundElement:document,type:"touchmove",listener:e=>this.Q(e)},{boundElement:document,type:"touchend",listener:e=>this.Q(e)}],this.or=new Eo,this.or.onGesture((e,i)=>this.$c(e,i))}$c(t,e){for(let i in this.subscriptions){let r=this.subscriptions[i];r(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Hs,t=>Et(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Hs,t=>St(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Q(t){this.KE.tryToExecute("process gesture event",()=>{if(this.or.isValidTouchEvent(t))switch(t.type){case"touchstart":this.or.processActionDown(t);break;case"touchmove":this.or.processActionMove();break;case"touchend":this.or.processActionUp(t);break}})()}static isSwipe(t){return t.type===It.FLICK||t.type===It.DRAG}}return s})();var Pm=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.tt=e,this.Bs=i,this.le=r,this.lt=o}init(){this.tt.onChildMessage((t,e,i)=>this.lt.emitIframeEvent(t,e,i)),this.tt.setSentiveStatusCallback(()=>this.le.getSensitiveStatus()),this.tt.setRecordingContextCallback(()=>this.Bs.getRecordingContext())}onStartTracking(){this.f.iframesTracking&&this.tt.start()}onOptout(){this.f.iframesTracking&&this.tt.stop()}onSensitiveStatusChange(){if(this.f.iframesTracking){let t=this.le.getSensitiveStatus();this.tt.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.f.iframesTracking){let t=this.Bs.getRecordingContext();this.tt.onRecordingContextChange(t)}}}return s})(),ht=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),eh=(()=>{class s extends ht{constructor(t){super(),this.f=t,this.Gc=0,this.Ie=new Map,this.Kd={boundElement:window,type:"message",listener:e=>this.zc(e)}}onChildMessage(t){this.Jd=t}setRecordingContextCallback(t){this.JE=t}setSentiveStatusCallback(t){this.QE=t}onSensitiveStatusChange(t){let e=at.buildBaseMessage(P.SensitiveStatus,te.Parent,this.f.projectId);e.content=t;let i=at.buildBaseMessage(P.SensitiveStatus,te.Parent,this.f.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Ie.forEach(r=>{if(r.port){let o=this.Vo(r)?i:e;this.qc(r,o)}})}onRecordingContextChange(t){let e=at.buildBaseMessage(P.RecordingContext,te.Parent,this.f.projectId);e.content=t,this.Ie.forEach(i=>{!this.Vo(i)&&i.port&&this.qc(i,e)})}sendToChildren(t,e){let i=at.buildBaseMessage(t,te.Parent,this.f.projectId);i.content=e,this.ZE(i)}onStart(){Et(this.Kd,!1),this.Qd()}onStop(){this.tS(),St(this.Kd,!1),this.eS()}Qd(){let t=this.sS();this.iS(t),csArray.prototype.forEach.call(t,e=>{if(this.nS(e)===null){let r={iframe:e};this.Ie.set(this.Gc,r),this.Gc+=1}}),this.rS()}sS(){return csArray.prototype.filter.call(lt.findAllElements("iframe"),t=>this.oS(t))}iS(t){this.Ie.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.aS(i,e)})}aS(t,e){e.port&&at.closeChannelPort(e.port),this.Ie.delete(t)}eS(){this.Ie.forEach(t=>{t.port&&at.closeChannelPort(t.port)}),this.Ie.clear()}nS(t){let e=null;return this.Ie.forEach((i,r)=>{e===null&&i.iframe===t&&(e=r)}),e}oS(t){return t.id!==vl&&(!t.src||Tt(t.src,"about:")||tn(rr(t.src),this.f.hostnames))}ZE(t){this.Ie.forEach(e=>{this.qc(e,t)})}qc(t,e){let i=e.type===P.SensitiveStatus||e.type===P.RecordingContext;t.port&&(!i||t.initialStatusSent)&&at.sendChannelMessage(t.port,e)}rS(){this.Ie.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.cS(e);at.sendPostMessage(t.iframe.contentWindow,"*",i)}})}tS(){let t=this.lS();this.Ie.forEach(e=>{e.port?at.sendChannelMessage(e.port,t):e.iframe.contentWindow&&at.sendPostMessage(e.iframe.contentWindow,"*",t)})}cS(t){return at.buildBaseMessage(P.Discovery,te.Parent,this.f.projectId,t)}lS(){return at.buildBaseMessage(P.Stop,te.Parent,this.f.projectId)}hS(t,e){let i=this.Ie.get(t);if(i===void 0){x.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.Gc})`);return}i.port=e,i.port.onmessage=r=>{this.Wc(r,i)}}uS(t){if(!t.port)return;let e=at.buildBaseMessage(P.SensitiveStatus,te.Parent,this.f.projectId),i=this.QE();this.Vo(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,at.sendChannelMessage(t.port,e)}dS(t){if(!t.port)return;let e=at.buildBaseMessage(P.RecordingContext,te.Parent,this.f.projectId),i=this.JE();this.Vo(t)&&(i.isRecording=!1),e.content=i,at.sendChannelMessage(t.port,e)}Wc(t,e){if(e===void 0){x.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,r=t.data.content;i===P.EndOfBufferedMessages?(this.uS(e),this.dS(e),e.initialStatusSent=!0):this.Jd(e.iframe,i,r)}zc(t){if(at.isMessageValid(t,te.Child,this.f.projectId,this.f.hostnames))switch(t.data.type){case P.Discovery:if(t.data.id===void 0){this.Qd();return}if(t.ports&&t.ports.length===1&&this.Ie.has(t.data.id)){this.hS(t.data.id,t.ports[0]);return}x.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case P.ChildLogMessage:this.Jd(null,P.ChildLogMessage,t.data.content);break;default:x.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}Vo(t){return L.isMaskedElement(t.iframe)||L.isMaskedElementChild(t.iframe)}}return s})(),Ms;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(Ms||(Ms={}));function sh(s){return s.tagDeploymentMode===Ms.DualCollectionReview||s.tagDeploymentMode===Ms.DualCollection}function Om(s){return sh(s)||s.tagDeploymentMode===Ms.LoadClicktalePtc}var Sc=(()=>{let s;return function(n){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}n.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}n.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}n.triggerLogicalPageView=i;function r(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}n.sendPageEvent=r;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}n.sendEventTriggerRecording=o}(s||(s={})),s})();var ih=(()=>{class s{constructor(t){this.mt=t}on(t,e){return i=>{this.mt.hasValidEventTarget(i)&&this.ES(i,t)&&e(i)}}ES(t,e){let i=Mt(t);return Vt.call(i,e)}isMatchesSelectorSupported(){return!!Vt}}return s})(),Nm=(()=>{class s extends ht{constructor(){super(),this.ep=0}onStart(){x.isPerfLoggingActive()&&(this.ar=window.csSetInterval(()=>this.sp(),s.SS))}onStop(){x.isPerfLoggingActive()&&(this.sp(),csClearInterval(this.ar))}sp(){this.ep>=s.vS||q.counters.methodPerformance.flush()&&this.ep++}}return s.SS=5e3,s.vS=5,s})(),Mm=(()=>{class s{constructor(){}init(){this.ip=new Nm}onStartTracking(){this.ip.start()}onOptout(){this.ip.stop()}}return s})();var Qn=(()=>{let s;return function(n){function t(r){return T(r)||wt(r)}n.isValidIdentity=t;function e(r){let o=!1;return i(r)&&(o=!!r.hash),o}n.parseIdentityOptionsHash=e;function i(r){return pt(r)&&Jt(r)&&"hash"in r}}(s||(s={})),s})(),Fi=["identify"],nh=["getIdentity"],sa=["resetIdentity"],km=(()=>{class s{constructor(t,e){this.E=t,this.Ke=e}init(){this.E.register(Fi,(t,e)=>{if(!Qn.isValidIdentity(t))throw new Error(`Command misuse: ${Fi[0]}`);let i=Qn.parseIdentityOptionsHash(e);this.Ke.identify(t.toString(),i)}),this.E.register(sa,()=>this.Ke.resetIdentity()),this.E.register(nh,()=>this.Ke.getIdentity())}onStartTracking(){this.Ke.start()}onBeforeSessionRenewal(){this.Ke.stop()}onOptout(){this.Ke.stop()}}return s})();var Dm=s=>{let n=s*60*1e3;return`${Math.floor(csDate.now()/n)}`},xm=5e3,So=(()=>{class s extends Ll{constructor(t,e,i){super(t,e),this.Zi=null,this.TS=(i==null?void 0:i.type)||"json",this.op=i==null?void 0:i.cacheMinutes,this.Kn=i==null?void 0:i.timeout}onLoad(t){this.Ki=t}onError(t){this.Xn=t}onTimeout(t,e){this.yi=t,this.Kn=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,r=>r());let t=this.retrieveParameters();this.wc(t);let e=Bi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.RS(i,this.TS)}abort(){this.Zi&&(this.Zi.abort(),this.Zi=null)}isInProgress(){return this.Zi!==null}RS(t,e){var i;let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onerror=()=>{var o;return(o=this.Xn)===null||o===void 0?void 0:o.call(this,r)},r.ontimeout=()=>{var o;return(o=this.yi)===null||o===void 0?void 0:o.call(this,r)},r.onload=()=>{var o,c;r.status>=200&&r.status<400?((o=this.Ki)===null||o===void 0||o.call(this,this.CS(r,e)?r.response:r.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Xn)===null||c===void 0||c.call(this,r)},r.onloadend=()=>{this.Zi=null},r.timeout=(i=this.Kn)!==null&&i!==void 0?i:xm,this.Zi=r,r.send()}CS(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}wc(t){let e;this.op?e=`${Dm(this.op)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),Lm=Math.pow(2,52),Ri=null;async function rh(s){if((Ri==null?void 0:Ri.visitorId)===s)return Ri.heapUserId;let n=await Um(s),t=Number(n%BigInt(Lm));return Ri={visitorId:s,heapUserId:t},t}async function Um(s){let n=await crypto.subtle.digest("SHA-256",Vm(s)),t=new Uint8Array(n.slice(0,8));return t=Hm(t),jm(t)}function Vm(s){let n=new ArrayBuffer(s.length),t=new Uint8Array(n);for(let e=0;e<s.length;e++)t[e]=csString.prototype.charCodeAt.call(s,e);return n}function jm(s){let n=[];return Uint8Array.from(s).forEach(function(e){let i=e.toString(16);i.length%2&&(i="0"+i),csArray.prototype.push.call(n,i)}),BigInt("0x"+csArray.prototype.join.call(n,""))}function Hm(s){let n=new ArrayBuffer(s.byteLength+1),t=new Uint8Array(n);for(let e=1;e<t.byteLength;e++)t[e]=s[e-1];return t}var Zn=(()=>{let s;return function(n){function t(r){return K(r)}n.isValidProperties=t;let e=255;function i(r){let o={};for(let c of Object.keys(r)){let l=r[c];if(T(l)||wt(l)){let h=Y.truncate(csString(c),e);o[h]=Y.truncate(csString(l),e)}}return o}n.sanitizeProperties=i}(s||(s={})),s})(),Bm=(()=>{class s extends ht{constructor(t,e,i,r){super(),this.$s=t,this.Yc=e,this.O=i,this.F=r,this.Ho=null,this.ap=!1,this.Bo=null,Ho()&&(this.ap=!0,e.setRequestParametersProviders({getRequestParameters:()=>{var o;return(o=this.Bo)!==null&&o!==void 0?o:{}}}),e.after(()=>{this.Bo=null}))}async addUserProperties(t){if(!this.ap)return;if(!this.$s){nt.error("missing heap env id","UserPropertiesService");return}let e=Zn.sanitizeProperties(t);Object.keys(e).length>0&&(this.isStarted?await this.cp(e,this.$s):this.Ho=e)}async cp(t,e){let i=this.O.getVisitor();if(!i){nt.warn("could not get current visitor",!0,"UserPropertiesService");return}let r=csString(await rh(i.id));this.Bo={a:e,u:r,st:I.now().toString(),b:"web",v:"1",s:"1",tv:"4.0"};for(let o of Object.keys(t))this.Bo[`_${o}`]=t[o];this.Yc.send(),this.F.refreshSession()}onStart(){this.Ho!==null&&(this.cp(this.Ho,this.$s),this.Ho=null)}onStop(){}}return s})(),$i=["addUserProperties"],Fm="api/add_user_properties_v3",$m=(()=>{class s{constructor(t,e,i,r){this.E=t,this.f=e,this.O=i,this.F=r}init(){let t=new So(this.f.getPaProxyDomainUri(),Fm);this.Fo=new Bm(this.f.heapEnvironment.env_id,t,this.O,this.F),this.E.register($i,e=>{if(!Zn.isValidProperties(e))throw new Error(`Command misuse: ${$i[0]}`);this.Fo.addUserProperties(e)})}onStartTracking(){this.Fo.start()}onBeforeSessionRenewal(){this.Fo.stop()}onOptout(){this.Fo.stop()}}return s})();var $e={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};function Gm(s){return Z.traverse(s,n=>{if(n.nodeType===$e.DOCUMENT_FRAGMENT_NODE){let t=Z.getProperty(n,"styles");t&&(n.adoptedStyleSheets=t)}}),s}function zm(s){if(s!=null&&s.length)return Se(s,n=>Wm(n))}function qm(){Ut(document).visitAll(s=>{var n;if(ri(s)&&((n=s.adoptedStyleSheets)===null||n===void 0?void 0:n.length)>0){let t=zm(s.adoptedStyleSheets);Z.setProperty(s,"styles",t)}})}function Wm(s){let n=[];try{n=Se(s.cssRules,t=>t.cssText)}catch{}return{cssRules:n,disabled:s.disabled}}var vc=new Map,Ur=!qi&&document.implementation.createHTMLDocument("");function oh(s){var n,t;return(t=(n=s.sheet)===null||n===void 0?void 0:n.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Ym(s){if(!Xi(s))return null;let n=ah(s);if(n===null||n.length===0)return null;let t="";if(Hn(s.textContent))W(n,e=>t+=e.cssText);else{let e=Xm(s);if(e===n.length||e>n.length)return null;let i=new csArray(n.length-e);for(let r=e,o=0;r<n.length;r+=1,o+=1)i[o]=n[r];W(i,r=>t+=r.cssText)}return t}function Xm(s){if(!Ur)return 0;let n=vc.get(s.textContent);if(n)return n;let t=s.cloneNode(!0);t.textContent=s.textContent,Ur.head.appendChild(t);let e=ah(t);return n=e?e.length:0,vc.set(s.textContent,n),Ur.head.removeChild(t),n}function ah(s){try{if(s.disabled)return null;let n=s.sheet;return n?n.cssRules||n.rules:null}catch(n){if(n.name!=="SecurityError"&&n.name!=="InvalidAccessError")throw n;return null}}var Pi=s=>s instanceof HTMLFormElement?"form":s.localName;var Us=(()=>{class s{constructor(t){this.csId=ct(t),this.props=xn.getAll(t)}}return s})(),ch=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Js=(()=>{class s extends Us{constructor(t){var e,i,r;super(t),this.attributes=[],this.nodeType=$e.ELEMENT_NODE,this.localName=Pi(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=Ym(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new ch(c);csArray.prototype.push.call(this.children,l)}pi(t)&&Z.setProperty(this,"SVG",!0),(Xi(t)||zo(t))&&(this.disabledSheet=(r=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&r!==void 0?r:!1)}static isElement(t){return t.nodeType===$e.ELEMENT_NODE}static getAttribute(t,e){return Re(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Km=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Jm=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Qm=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),Zm=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),ty=(()=>{class s extends Us{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),ey=(()=>{class s{constructor(t,e,i){var r;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(r=t.namespaceURI)!==null&&r!==void 0?r:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let r=0;r<i.length;r++){let o=e[r];i[r]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&zo(t)&&(i[r].value=oh(t))}return i}}return s})(),wc={workTime:40,async:!0,initialDOM:!0};var Mi=csSymbol("InitialDom"),_c=csSymbol.for("ignoreNextSerialization");function lh(s){return s[_c]?(delete s[_c],!0):!1}function hh(s=wc){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=wc.workTime);let r=gs("serialize:callback",y=>e(y)),o=new Wi,c=(y,m)=>{y.hasChildNodes()&&o.push({node:y,serializedNode:m});let v=y instanceof Element&&csElementshadowRoot.apply(y);if(v){let N=m.shadowRoot=ki(v);s.async&&s.initialDOM&&Z.setProperty(v,Mi,!0),c(v,N)}},l,h=!0,p=8,u=gs("work",()=>{var y;if(h)l=ki(t),s.async&&s.initialDOM&&Z.setProperty(t,Mi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let m=ny(100);for(;!o.isEmpty;){if(s.async&&m.elapsed()>=s.workTime){--p<=0&&csSetTimeout(u);return}let{node:v,serializedNode:N}=o.pop(),D=(y=N.children)!==null&&y!==void 0?y:[];if(Qi(v))continue;let w=0;for(let S=csNodefirstChild.apply(v);S;S=csNodenextSibling.apply(S)){if(lh(S))continue;let C=ki(S);s.async&&s.initialDOM&&Z.setProperty(S,Mi,!0),D[w++]=C,c(S,C)}}s.async?csSetTimeout(()=>r(l)):e(l)});if(!s.async)s.workTime=1/0,u();else for(let y=0;y<p;y++)csSetTimeout(u,1)}}function sy(s){let n=ki(s),t=n;if(Qi(s))return n;let e=0;for(let r=csNodefirstChild.apply(s);r;r=csNodenextSibling.apply(r))lh(r)||(t.children[e++]=vo(r));let i=s.shadowRoot;return i&&(t.shadowRoot=vo(i)),n}var vo=xs(sy,"serializeSync");function ki(s){let n,t;switch(s.nodeType){case 1:t=n=new Js(s),n.attributes=ry(s);break;case 3:t=new ch(s);break;case 4:t=new Km(s);break;case 8:t=new Jm(s);break;case 10:t=new Qm(s);break;case 9:t=new Zm(s);break;case 11:t=new ty(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function iy(){Mi=csSymbol("InitialDom")}function ny(s){if(s<1)throw new Error("Precision should be >= 1");let n=0,t=I.elapsed();return{started:t,elapsed(){return++n%s===0&&(t=I.elapsed()),t-this.started}}}function ry(s){return Qi(s)?[]:ey.create(s)}var oy=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,ay="\uFF41",cy=/[^\s]/g,ly="a";function Ps(s){let n=csString.prototype.replace.call(s,oy,ay);return csString.prototype.replace.call(n,cy,ly)}var hy=(()=>{class s{constructor(t,e,i,r=null,o=!1){this.Je=t,this.PS=e,this.M=i,this.Go=r,this.OS=o,this.NS=Dl(this.PS)}sanitize(t,e){return Z.traverse(t,(i,r)=>{if(i.anonymized=this.Je,i.nodeType===$e.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,r?r==null?void 0:r.localName:e==null?void 0:e.targetLocalName,r?Z.getProperties(r):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(Js.isElement(i))return this.MS(i);if(i.nodeType===$e.CDATA_SECTION_NODE){let o=i;o.data=this.Je?Ps(o.data):this.M.checkAndAnonymizePII(o.data,this.Go);return}}),t}setAnonymization(t){this.Je=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let r=(i==null?void 0:i[Ee.ANONYMIZED_TEXT_STATUS_PROP])===Ee.WHITELISTED_STATUS;return this.Je&&!r?{anonymizedValue:Ps(t),withAnonymization:!0}:{anonymizedValue:this.M.checkAndAnonymizePII(t,this.Go),withAnonymization:!1}}MS(t){if(Z.getProperty(t,"SVG"))return;let e=Re(t.attributes,r=>r.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,r=>(r.anonymized=this.Je,r.value=this.getAnonymizedAttributeValue(t.localName,r.name,r.value,i),r))}getAnonymizedAttributeValue(t,e,i,r){if(this.kS(t,e,r))return i;if(tg(e))return eg(t,e,i)?this.M.anonymizePII(i):i;let o=this.OS&&e==="placeholder";return this.Je&&(sg(t,e,r)||o)?Ps(i):this.Je?"":this.M.checkAndAnonymizePII(i,null)}kS(t,e,i){return Zf(t,e,i)||this.NS.has(e)}}return s})(),uh=(()=>{let s;return function(n){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,r=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",r)}n.generate=t;function e(i){let r=0;for(let o=0;o<i.length;o+=1)r=csString.prototype.charCodeAt.call(i,o)+(r<<6)+(r<<16)-r;return Math.abs(r)}}(s||(s={})),s})();var ia=(()=>{class s{emit(t,e,i,r=document){let c=`${i!==void 0?`${i}`:`${s.HS}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&r.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.BS();if(i===null)return null;let{bubbles:r=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,r,o,c),i}static BS(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.HS="cs.tracking.",s})();var dh=(()=>{class s{constructor(){this.XS=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.il=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return ji(this.XS,r=>Xn(i,r))}canCollect(t,e){return this.KS(t,e)&&this.JS(e)}KS(t,e){return t>=400||t>=200&&t<300&&this.il.statusCodes.has(t)&&this.QS(e)}QS(t){return ji(this.il.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}JS(t){return $o(this.il.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),ph=(()=>{class s extends dh{constructor(){super(),this.U=!1,this.rn=null,this.ZS=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.L=t}start(){this.U||this.sv()&&(this.iv(),this.rn&&this.rn.activate(),this.U=!0)}stop(){this.U&&(this.rn&&this.rn.deactivate(),this.U=!1)}sv(){return!!window.fetch&&typeof window.fetch=="function"}nv(t){if(t[0]&&typeof t[0].clone=="function"){let e=ms(t);return e[0]=t[0].clone(),e}return t}iv(){this.rn||(this.rn=Xt({target:window,methodName:"fetch",hook:this.ZS,hookPrepareArgs:this.nv,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let r=e[0],o=e[1],c=new Request(r,o);if(!T(c.url))return;let l=I.now(),h;try{h=await t}catch(m){if(this.rv(m)||this.fp(m)||this.ov(m)||this.av(m))return;throw m}let[p,u]=csString.prototype.split.call(c.url,"?"),y=Pe(p);if(h&&super.canCollect(h.status,y)){let m={library:i,method:c.method,url:y,queryParameters:u,requestTime:l,responseTime:I.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.gp(c.headers),responseHeaders:this.gp(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(m.responseHeaders))try{m.responseBody=await h.clone().text()}catch(v){if(this.fp(v))return}super.isValidBodyType(m.requestHeaders)&&(m.requestBody=await c.text()),this.L(m)}}rv(t){return t instanceof TypeError}fp(t){return t instanceof DOMException&&t.name==="AbortError"}av(t){return t instanceof DOMException&&t.name==="TimeoutError"}ov(t){return t instanceof DOMException&&csArray.prototype.some.call(s.cv,e=>e===t.name)}gp(t){let e={};return t.forEach((i,r)=>{i&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(i))}),e}}return s.cv=["NoModificationAllowedError","InvalidStateError","OperationError"],B([O("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),uy=0,fh=(()=>{class s extends dh{constructor(){super(),this.$t=csSymbol("ApiCall"),this.U=!1,this.an=null,this.cn=null,this.zo=null,this.lv=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.hv=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.uv=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.L=t}start(){this.U||(this.nl(),this.an&&this.an.activate(),this.cn&&this.cn.activate(),this.zo&&this.zo.activate(),this.U=!0)}stop(){this.U&&(this.an&&this.an.deactivate(),this.cn&&this.cn.deactivate(),this.U=!1)}nl(){this.an||(this.an=Xt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.lv,options:{withCallerName:!0}})),this.cn||(this.cn=Xt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.hv})),this.zo||(this.zo=Xt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.uv}))}interceptOpen(t,e,i){if(!e[1]||!T(e[1]))return;let[r,o]=csString.prototype.split.call(e[1],"?");t[this.$t]={library:i,requestTime:I.now(),method:e[0],url:Pe(r),queryParameters:o,statusCode:uy,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.$t]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.$t].url)&&(t[this.$t].responseTime=I.now(),t[this.$t].statusCode=t.status,t[this.$t].responseHeaders=this.pv(t.getAllResponseHeaders()),super.isValidBodyType(t[this.$t].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.$t].responseBody=t.responseText),this.L(t[this.$t]))}interceptSetRequestHeader(t,e){if(!t[this.$t])return;let i=e[0],r=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||r.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),r=csString.prototype.trim.call(r),t[this.$t].requestHeaders[i]?t[this.$t].requestHeaders[i]+=`, ${r}`:t[this.$t].requestHeaders[i]=r)}interceptSend(t,e){t[this.$t]&&super.isValidBodyType(t[this.$t].requestHeaders)&&typeof e[0]=="string"&&(t[this.$t].requestBody=e[0])}pv(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[r,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(o))}),e}}return B([O("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),B([O("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),B([O("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),B([O("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),gh=(()=>{class s{constructor(){}onLoad(t){this.Ki=t}onLoadCallbackExecute(){this.Ki()}start(){let t=this.onLoadCallbackExecute.bind(this);this.fv(t)}fv(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return B([O("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),dy=(()=>{class s{constructor(t){this.qo=t.performance}getRequestParameters(){if(this.gv())return{};let t=this.mv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}mv(){let t=this.qo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}gv(){return!(this.qo&&this.qo.timing&&this.qo.timing.loadEventEnd>0)}}return s})(),Yt=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(r,o)=>o.enhanceAnalysisEvent(t,r),e)}}return s})(),z=(()=>{let s;return function(n){n[n.RESIZE=0]="RESIZE",n[n.SCROLL=1]="SCROLL",n[n.MOUSEMOVE=2]="MOUSEMOVE",n[n.MOUSEDOWN=3]="MOUSEDOWN",n[n.MOUSEUP=4]="MOUSEUP",n[n.CLICK=5]="CLICK",n[n.MOUSEOVER=6]="MOUSEOVER",n[n.MOUSEOUT=7]="MOUSEOUT",n[n.CHANGE=10]="CHANGE",n[n.FOCUSIN=11]="FOCUSIN",n[n.FOCUSOUT=12]="FOCUSOUT",n[n.TAP=14]="TAP",n[n.KEYDOWN=15]="KEYDOWN",n[n.KEYUP=16]="KEYUP",n[n.COMMAND=17]="COMMAND",n[n.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",n[n.PERFORMANCE=19]="PERFORMANCE",n[n.DRAG=20]="DRAG",n[n.FLICK=21]="FLICK",n[n.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",n[n.ZOOM=23]="ZOOM",n[n.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",n[n.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",n[n.DEAD_CLICK=30]="DEAD_CLICK",n[n.DEAD_ZOOM=31]="DEAD_ZOOM",n[n.PAGE_RELOAD=32]="PAGE_RELOAD",n[n.THRASHED_CURSOR=33]="THRASHED_CURSOR",n[n.BLANK_PAGE=34]="BLANK_PAGE",n[n.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",n[n.SUBMIT=36]="SUBMIT",n[n.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),Vr=(()=>{let s;return function(n){n.SUCCESS="success",n.FAILURE="failure",n.ATTEMPT="attempt"}(s||(s={})),s})(),Cs=(()=>{let s;return function(n){n.APPCUES="appcues",n.CHAMELEON="chameleon",n.CONTENTSQUARE="contentsquare",n.SEGMENT="segment",n.WEB="web"}(s||(s={})),s})();function bc(s){return"text"in s}function jr(s){return"hrchy"in s}function py(s){return s.tgtHM!==void 0}function mh(s){return s.tgt!==void 0}function fy(s){return s.tgtLk!==void 0}function gy(s){return s.x!==void 0&&s.y!==void 0}function my(s){return s===Vr.SUCCESS||s===Vr.FAILURE||s===Vr.ATTEMPT}function yy(s){return s===Cs.APPCUES||s===Cs.CHAMELEON||s===Cs.CONTENTSQUARE||s===Cs.SEGMENT||s===Cs.WEB}var yh=(()=>{class s{constructor(t,e,i){this.Zt=t,this.xt=e,this.At=i}processGesture(t,e){switch(t.type){case It.TAP:this.yv(e);break;case It.FLICK:this.Ev(t,e);break;case It.DRAG:this.Sv(t,e);break;default:break}}yv(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=Yt.build(t,e,this.Zt);i.tgt!==Ie.INVALID_ELEMENT&&this.L(i)}Sv(t,e){var i,r;let o={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.At)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.At)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=Yt.build(e,o,this.Zt);c.tgt!==Ie.INVALID_ELEMENT&&this.L(c)}Ev(t,e){var i,r;let o={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.At)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.At)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=Yt.build(e,o,this.Zt);c.tgt!==Ie.INVALID_ELEMENT&&this.L(c)}onEvent(t){this.L=t}start(){this.xt.subscribe(s.mp,(t,e)=>this.processGesture(t,e))}stop(){this.xt.unsubscribe(s.mp)}}return s.mp="AnalysisGestureTracker",B([mt()],s.prototype,"processGesture",null),s})();function lr(s,n){typeof n=="number"&&(n={wait:n});let t=n.wait,e=n.mode||"leading",i,r=[],o=null,c=0,l,h=()=>{c=I.now(),o=null,l=s.apply(i,r),r=[],i=null},p=function(...u){if(i=this!==null&&this!==void 0?this:st,r=[...u],e==="trailing")return o||(o=st.csSetTimeout(h,t)),l;let y=I.now(),m=t-(y-c);return m<=0||m>t?(c=y,l=s.apply(i,r),o?(st.csClearTimeout(o),o=null):r=[]):o||(o=st.csSetTimeout(h,m)),l};return p.cancel=()=>{o&&(st.csClearTimeout(o),c=0,o=null,r=[])},p.flushPending=()=>{o&&(st.csClearTimeout(o),h())},p}var Vs=s=>(n,t,e)=>{e.value=lr(e.value,s)},Ac="data-cs-scroll-container";function Ey(s){try{if(pt(csEventtarget.apply(s)))return!0}catch{}return!1}var Qs=(()=>{let s;return function(n){function t(i){return!!(pt(i)&&Ey(i)&&ze(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Ac)!==null)}n.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Ac}]`)}n.getScrollContainer=e}(s||(s={})),s})(),Zs=(()=>{let s;return function(n){n[n.COPY=0]="COPY",n[n.CUT=1]="CUT",n[n.PASTE=2]="PASTE"}(s||(s={})),s})(),X=(()=>{let s;return function(n){n[n.SPACE=0]="SPACE",n[n.ENTER=1]="ENTER",n[n.BACKSPACE=2]="BACKSPACE",n[n.DELETE=3]="DELETE",n[n.ARROWUP=4]="ARROWUP",n[n.ARROWDOWN=5]="ARROWDOWN",n[n.ARROWLEFT=6]="ARROWLEFT",n[n.ARROWRIGHT=7]="ARROWRIGHT",n[n.CAPSLOCK=8]="CAPSLOCK",n[n.SHIFT=9]="SHIFT",n[n.TAB=10]="TAB",n[n.ALPHANUMERICAL=11]="ALPHANUMERICAL",n[n.ESCAPE=12]="ESCAPE",n[n.END=13]="END",n[n.ALT=14]="ALT",n[n.CTRL=15]="CTRL",n[n.META=16]="META"}(s||(s={})),s})(),Eh=(()=>{class s{constructor(t,e,i,r=["submit"]){this.Zt=t,this.mt=e,this.Lt=i,this.vv=r,this.yp="select, select *, input, textarea",this.wv="select, select *, input, textarea",this.Ep="a, a *, button, button *, select, select *, input, textarea",this.ur="input, select, textarea",this._v="form",this.Wo=150,this.bv=400,this.Sp=!1,this.pr=ii((o,c)=>this.scrollListener(o,c),this.Wo),this.vp=ii(o=>this.resizeListener(o),this.Wo),this.Av=lr(o=>this.mouseMoveListener(o),this.bv),this.Tv=[{boundElement:window,type:"resize",listener:()=>this.vp()},{boundElement:document,type:"scroll",listener:o=>this.pr(o)},{boundElement:window,type:"mousemove",listener:o=>{this.Av(_m(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.wp=[{type:"change",listener:this.Lt.on(this.wv,o=>this.changeListener(o))},{type:"submit",listener:this.Lt.on(this._v,o=>this.submitListener(o))}],this.Rv=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.Ep,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.Ep,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.yp,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.yp,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.ur,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.Lt.on(this.ur,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.Lt.on(this.ur,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.Lt.on(this.ur,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.Lt.on(this.ur,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.wp,o=>({...o,boundElement:document}))],this.V={},this.rl=(o,c)=>{switch(c){case"initial":case"added":this.wi(o);break;case"removed":this._i(o);break}},this.ue=new fi(this.rl),this.ol()}wi(t){if(Gn(t)){let e=this._p();csArray.prototype.forEach.call(e,i=>Et(i))}else{let e=this.bp();csArray.prototype.forEach.call(e,i=>{Et({...i,boundElement:t})})}}_i(t){if(Gn(t)){let e=this._p();csArray.prototype.forEach.call(e,i=>St(i))}else{let e=this.bp();csArray.prototype.forEach.call(e,i=>{St({...i,boundElement:t})})}}onEvent(t){this.L=t}start(){this.ue.observe(),this.wi(document),this.resizeListener()}stop(){this._i(document),this.ue.disconnect()}flushPendingDebouncedListeners(){this.pr.flushPending(),this.vp.flushPending()}Ap(t){return csArray.prototype.some.call(this.vv,e=>e===t)}bp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.wp,t=>!this.Ap(t.type)):(x.warn("Element.matches is not implemented yet"),[])}_p(){let t=[];return csArray.prototype.push.call(t,...this.Tv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.Rv):x.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Ap(e.type))}resizeListener(t){let e=Qs.getScrollContainer(),i=ze(e);i&&(this.Sp=!0);let r={type:z.RESIZE,ts:0,x:i?e.clientWidth:bt.windowWidth(),y:i?e.clientHeight:bt.windowHeight()};t!==void 0&&(r.d=t),this.L(r)}scrollListener(t,e){let i=Qs.isEventOnScrollContainer(e);!this.Sp&&i&&this.resizeListener();let r={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:bt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:bt.windowOffsetY(),d:t},o=Yt.build(e,r,this.Zt);this.L(o)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Yt.build(t,e,this.Zt);this.L(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Yt.build(t,e,this.Zt);this.de(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Yt.build(t,e,this.Zt);this.de(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Yt.build(t,e,this.Zt);this.de(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Yt.build(t,e,this.Zt);this.de(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.mt.getEventTargetPath(t)},i=Yt.build(t,e,this.Zt);this.de(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.mt.getEventTargetPath(t)},i=Yt.build(t,e,this.Zt);this.de(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.mt.getEventTargetPath(t)},i=Yt.build(t,e,this.Zt);this.de(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=Yt.build(t,e,this.Zt);this.de(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=Yt.build(t,e,this.Zt);this.de(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Zs.COPY};this.de(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Zs.CUT};this.de(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Zs.PASTE};this.de(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.Tp(t)};this.de(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.Tp(t)};this.de(e)}Tp(t){let e=this.V[t.key];return e===void 0?X.ALPHANUMERICAL:e}de(t){mh(t)&&t.tgt!==Ie.INVALID_ELEMENT&&this.L(t)}ol(){this.V[" "]=X.SPACE,this.V.Spacebar=X.SPACE,this.V.Enter=X.ENTER,this.V.Backspace=X.BACKSPACE,this.V.Delete=X.DELETE,this.V.ArrowUp=X.ARROWUP,this.V.ArrowDown=X.ARROWDOWN,this.V.ArrowLeft=X.ARROWLEFT,this.V.ArrowRight=X.ARROWRIGHT,this.V.Up=X.ARROWUP,this.V.Down=X.ARROWDOWN,this.V.Left=X.ARROWLEFT,this.V.Right=X.ARROWRIGHT,this.V.CapsLock=X.CAPSLOCK,this.V.Shift=X.SHIFT,this.V.Tab=X.TAB}}return B([O("Event handler type: resize")],s.prototype,"resizeListener",null),B([O("Event handler type: scroll")],s.prototype,"scrollListener",null),B([O("Event handler type: mouseMove"),mt()],s.prototype,"mouseMoveListener",null),B([O("Event handler type: mouseDown"),mt()],s.prototype,"mouseDownListener",null),B([O("Event handler type: mouseUp"),mt()],s.prototype,"mouseUpListener",null),B([O("Event handler type: click"),mt()],s.prototype,"clickListener",null),B([O("Event handler type: mouseOver"),mt()],s.prototype,"mouseOverListener",null),B([O("Event handler type: mouseOut"),mt()],s.prototype,"mouseOutListener",null),B([O("Event handler type: focusIn")],s.prototype,"focusInListener",null),B([O("Event handler type: focusOut")],s.prototype,"focusOutListener",null),B([O("Event handler type: change")],s.prototype,"changeListener",null),B([O("Event handler type: submit"),mt()],s.prototype,"submitListener",null),B([O("Event handler type: copy")],s.prototype,"copyListener",null),B([O("Event handler type: cut")],s.prototype,"cutListener",null),B([O("Event handler type: paste")],s.prototype,"pasteListener",null),B([O("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([O("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Sy=(()=>{class s{constructor(){this.Rp=100,this.fr=0,this.gr=bt.documentHeight(),this.Cp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.fr=this.al(Qs.getScrollContainer()).maxScrollRate}onEvent(t){this.L=t}start(){Et(this.Cp)}stop(){St(this.Cp)}reset(){let t=Qs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.al(t);this.gr=i,this.fr=e,this.L()}al(t){let e=0,i=0;if(t===null)i=bt.documentHeight(),e=this.Cv(i);else{let r=this.Iv(t);i=this.Ip(t,r),e=this.Pv(t,r)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Qs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:r}=this.al(e);(i>this.fr||r>this.gr)&&(this.fr=i,r>this.gr&&(this.gr=r),this.L())}Cv(t){let e=Math.round(this.Ov()/t*100);return Math.min(e,this.Rp)}Ov(){let t=bt.windowHeight();return bt.windowOffsetY()+t}Pv(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,r=this.Ip(t,e),o=Math.round(i/r*100);return Math.min(o,this.Rp)}Iv(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Ip(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.fr}`,mdh:`${this.gr}`}}}return B([O("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),he=(()=>{let s;return function(n){n.Visible="visible",n.Hidden="hidden",n.Blur="blur",n.PagehideVisible="pagehideVisible",n.PagehideHidden="pagehideHidden",n.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Sh=(()=>{class s{constructor(){this.U=!1,this.zs=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.te(he.Hidden):this.te(he.Visible);case"pagehide":return document.visibilityState==="hidden"?this.te(he.PagehideHidden):this.te(he.PagehideVisible);case"blur":return this.te(he.Blur);case"navigate":return this.Nv(t)?this.te(he.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.U||(this.U=!0,this.cl(),this.Mv(),this.kv(),Wa()&&this.Dv())}stop(){this.U&&(this.U=!1,this.ll(),this.xv(),this.Lv(),Wa()&&this.Uv())}onEvent(t){this.te=t}Dv(){window.navigation.addEventListener("navigate",this.zs)}Uv(){window.navigation.removeEventListener("navigate",this.zs)}cl(){document.addEventListener("visibilitychange",this.zs)}ll(){document.removeEventListener("visibilitychange",this.zs)}Mv(){window.addEventListener("pagehide",this.zs)}xv(){window.removeEventListener("pagehide",this.zs)}kv(){window.addEventListener("blur",this.zs)}Lv(){window.removeEventListener("blur",this.zs)}Nv(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})();var vy=1024,wy=512,Hr=1024,Br="||",_y=(()=>{class s extends ht{constructor(t,e,i,r,o,c,l,h,p,u,y,m,v,N,D,w,S,C,k,_,F){super(),this.f=t,this.qs=e,this.xt=i,this.ln=r,this.ul=o,this.Ge=c,this.Pe=l,this.dl=h,this.F=p,this.Qt=u,this.Z=y,this.pl=m,this.ze=v,this.W=N,this.Yo=D,this.Es=w,this.Ss=S,this.gl=C,this.bi=k,this.Ai=_,this.Ti=F,this.Gs=new ia,this.Xo=!1,this.ml=[]}init(){var t,e,i,r,o,c,l;this.qs.onEvent(h=>this.Nt(h)),this.xt.onEvent(h=>this.Nt(h)),this.ln.onEvent(()=>{let h=this.ln.getRequestParameters();this.W.setQueryParams(h),this.Pe.setQueryParams(h)}),this.pl.onEvent(h=>this.Oe(h)),this.yl(),(t=this.Yo)===null||t===void 0||t.onEvent(h=>this.Nt(h)),(e=this.bi)===null||e===void 0||e.onEvent(h=>this.Nt(h)),(i=this.Es)===null||i===void 0||i.onEvent(h=>this.Nt(h)),(r=this.Ss)===null||r===void 0||r.onEvent(h=>this.Nt(h)),this.jv(),(o=this.gl)===null||o===void 0||o.onEvent(h=>this.Oe(h)),(c=this.Ai)===null||c===void 0||c.onEvent(h=>this.Oe(h)),(l=this.Ti)===null||l===void 0||l.onEvent(h=>this.Oe(h))}jv(){this.Pe.onBeaconSuccess(()=>{this.Ge.clearEvents()}),this.Pe.onBeaconFailure(t=>{this.Hv(t)})}initStates(){let t=this.dl.getRequestParameters(),e=this.ul.getRequestParameters(),i=this.ln.getRequestParameters();this.W.setQueryParams(t),this.W.setQueryParams(e),this.W.setQueryParams(i),this.Pe.setQueryParams(t),this.Pe.setQueryParams(e),this.Pe.setQueryParams(i),this.El()}clearStates(t){var e,i;this.qs.flushPendingDebouncedListeners(),(e=this.Es)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Ss)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.Sl(),this.sendLastMessageBeacon()):this.sendEvents(),this.ln.reset(),this.W.removeQueryParams()}onStart(t){var e,i,r,o,c,l,h;t||(e=this.gl)===null||e===void 0||e.start(),this.ze.start(),this.qs.start(),this.ln.start(),this.xt.start(),(i=this.Yo)===null||i===void 0||i.start(),(r=this.Ss)===null||r===void 0||r.start(),t||this.pl.start(),(o=this.Es)===null||o===void 0||o.start(),(c=this.bi)===null||c===void 0||c.start(),(l=this.Ai)===null||l===void 0||l.start(),(h=this.Ti)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.ml,p=>{this.Oe(p)}),this.ml=[]}collectInitialEvents(){var t;(t=this.Yo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Oe(t)}onIframeAnalysisUserEvent(t){this.Nt(t)}onExternalEvent(t){this.Q(t)}Oe(t){this.F.isCurrentPageviewValid()&&this.Q(t)}Nt(t){this.F.refreshSession(),this.F.isSessionValid()&&this.Q(t)}Q(t){this.Ge.addEvent(this.Bv(t)),this.Ge.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.Gs.emit("analysisEvent",{...t,typeName:z[t.type]})}Bv(t){return t.ts=this.Ri(),t}Sl(){this.Pe.setQueryParams({hlm:"true"}),this.Xo=!0}sendLastMessageBeacon(){this.Pe.removeQueryParams(["i"]),this.Pe.setQueryParams(this.dl.getRequestParameters()),this.Pe.setQueryParams(this.ul.getRequestParameters()),this.Pe.send(this.Ge.stringifyEvents()),this.Pe.removeQueryParams(["hlm"]),this.Xo=!1}sendEvents(){this.Ge.isEmpty()||(this.Pe.removeQueryParams(["i"]),this.W.setQueryParams(this.dl.getRequestParameters()),this.W.setQueryParams(this.ul.getRequestParameters()),this.W.send(this.Ge.getEvents()),this.Ge.clearEvents())}onStop(){var t,e,i,r,o,c,l;this.ze.stop(),this.qs.stop(),this.ln.stop(),this.xt.stop(),this.pl.stop(),(t=this.Yo)===null||t===void 0||t.stop(),(e=this.Es)===null||e===void 0||e.stop(),(i=this.Ss)===null||i===void 0||i.stop(),(r=this.bi)===null||r===void 0||r.stop(),this.Ge.empty(),(o=this.gl)===null||o===void 0||o.stop(),(c=this.Ai)===null||c===void 0||c.stop(),(l=this.Ti)===null||l===void 0||l.stop()}El(){this.Ze=I.now()}Ri(){return I.now()-this.Ze}yl(){this.ze.onEvent(t=>{var e,i;t!==he.Visible&&((e=this.Es)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Ss)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===he.PagehideVisible?this.Sl():t===he.PagehideHidden?(this.Sl(),this.sendLastMessageBeacon()):(!this.Ge.isEmpty()||this.Xo)&&this.sendLastMessageBeacon())})}Hv(t){try{(!this.Ge.isEmpty()||this.Xo)&&this.Qt.save({requestParameters:t,events:this.Ge.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!my(t)||!ze(e))throw new Error(`Command misuse: ${ca}`);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.Z.getElementPath(e)};i.tgt!==Ie.INVALID_ELEMENT&&this.Oe(i)}pushCustomEvent(t,e,i){if(!(T(t)&&!Hn(t))||i!==void 0&&!K(i))throw new Error(`Command misuse: ${Ro}`);let r=yy(e)?e:Cs.WEB,o=this.Fv(i),c={type:z.CUSTOM_EVENT,ts:0,customEventName:Y.truncate(t,vy),sourceLibrary:r,...oo(o)?{}:{properties:o}};this.isStarted?this.Oe(c):csArray.prototype.push.call(this.ml,c)}Fv(t){let e={};for(let i in t){if(i.length>wy)continue;let r=t[i];if(wt(r)||Ui(r))e[i]=csString(r);else if(this.Pp(r))e[i]=Y.truncate(r,Hr);else if(this.$v(r)){let o=this.Gv(r);o!==""&&(e[i]=o)}}return e}Gv(t){let e="";for(let i=0;i<t.length;i++){let r=t[i];if(!wt(r)&&!Ui(r)&&!this.Pp(r))continue;let o=csString(r);if(e==="")e=Y.truncate(o,Hr);else if(e.length+Br.length+o.length<=Hr)e+=Br+o;else break}return e}Pp(t){return T(t)&&!Hn(t)&&!csString.prototype.includes.call(t,Br)}$v(t){return csArray.isArray(t)&&t.length>0}}return s})(),Gi=(()=>{class s{constructor(...t){this.Op=t}addProvider(t){csArray.prototype.push.call(this.Op,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Op,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),by=(()=>{class s{constructor(t,e){this.Qt=t,this.W=e,this.Np=()=>{document.visibilityState==="visible"&&this.Mp()}}start(){this.Mp(),this.cl()}stop(){this.ll()}getRecoveryStorage(){return this.Qt}Mp(){let t=this.Qt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.W.send(i,e)}}cl(){document.addEventListener("visibilitychange",this.Np)}ll(){document.removeEventListener("visibilitychange",this.Np)}}return s})(),vh=(()=>{class s{constructor(t){this.kp=[],this.Dp=[],this.Kt={},this.Jt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]}):this.Kt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.kp,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Dp,t)}send(t){let e=Bi.toQuery({...this.Kt,ct:ar.UNCOMPRESSED}),i=this.zv(e,t);return i?csArray.prototype.forEach.call(this.kp,r=>r()):csArray.prototype.forEach.call(this.Dp,r=>r(this.Kt)),i}zv(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Jt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Jt}?${t}`,e||"")}}return s})(),Ay=(()=>{class s{constructor(t){this.hn=t}save(t){localStorage.setItem(this.hn,csJSON.stringify(t))}clear(){localStorage.removeItem(this.hn)}recover(){let t=localStorage.getItem(this.hn);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{x.error(`Invalid item in localStorage.
         (key:${this.hn}; value:${t})`)}finally{this.clear()}return e}}return s})(),Ty=(()=>{class s{constructor(t){this.mr=t,this.yr=e=>this.processMetric(e),this.U=!1}onEvent(t){this.L=t}start(){this.U||(this.U=!0,this.mr.onFCP(this.yr),this.mr.onCLS(this.yr),this.mr.onLCP(this.yr),this.mr.onTTFB(this.yr),this.mr.onINP(this.yr))}stop(){this.U=!1}processMetric(t){if(!this.U)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.L(e)}}return B([O("Performance metric handler")],s.prototype,"processMetric",null),s})(),wh=-1,gi=s=>{addEventListener("pageshow",n=>{n.persisted&&(wh=n.timeStamp,s(n))},!0)},Me=(s,n,t,e)=>{let i,r;return o=>{n.value>=0&&(o||e)&&(r=n.value-(i!=null?i:0),(r||i===void 0)&&(i=n.value,n.delta=r,n.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(n.value,t),s(n)))}},na=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},ra=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},nn=()=>{var n;let s=ra();return(n=s==null?void 0:s.activationStart)!=null?n:0},ke=(s,n=-1)=>{let t=ra(),e="navigate";return wh>=0?e="back-forward-cache":t&&(document.prerendering||nn()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:n,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Fr=new WeakMap;function oa(s,n){return Fr.get(s)||Fr.set(s,new n),Fr.get(s)}var wo=class{constructor(){Ue(this,"t");Ue(this,"i",0);Ue(this,"o",[])}h(n){var i;if(n.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&n.startTime-e.startTime<1e3&&n.startTime-t.startTime<5e3?(this.i+=n.value,this.o.push(n)):(this.i=n.value,this.o=[n]),(i=this.t)==null||i.call(this,n)}},rn=(s,n,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{n(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},aa=s=>{let n=!1;return()=>{n||(s(),n=!0)}},Ks=-1,Tc=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,tr=s=>{document.visibilityState==="hidden"&&Ks>-1&&(Ks=s.type==="visibilitychange"?s.timeStamp:0,Ry())},Rc=()=>{addEventListener("visibilitychange",tr,!0),addEventListener("prerenderingchange",tr,!0)},Ry=()=>{removeEventListener("visibilitychange",tr,!0),removeEventListener("prerenderingchange",tr,!0)},_h=()=>{var s;if(Ks<0){let n=nn(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>n)[0])==null?void 0:s.startTime;Ks=t!=null?t:Tc(),Rc(),gi(()=>{setTimeout(()=>{Ks=Tc(),Rc()})})}return{get firstHiddenTime(){return Ks}}},hr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Cc=[1800,3e3],bh=(s,n={})=>{hr(()=>{let t=_h(),e,i=ke("FCP"),r=rn("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(r.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-nn(),0),i.entries.push(c),e(!0)))});r&&(e=Me(s,i,Cc,n.reportAllChanges),gi(o=>{i=ke("FCP"),e=Me(s,i,Cc,n.reportAllChanges),na(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},Ic=[.1,.25],Cy=(s,n={})=>{bh(aa(()=>{let t,e=ke("CLS",0),i=oa(n,wo),r=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=rn("layout-shift",r);o&&(t=Me(s,e,Ic,n.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(o.takeRecords()),t(!0))}),gi(()=>{i.i=0,e=ke("CLS",0),t=Me(s,e,Ic,n.reportAllChanges),na(()=>t())}),setTimeout(t))}))},Ah=0,$r=1/0,In=0,Iy=s=>{for(let n of s)n.interactionId&&($r=Math.min($r,n.interactionId),In=Math.max(In,n.interactionId),Ah=In?(In-$r)/7+1:0)},_o,Pc=()=>{var s;return _o?Ah:(s=performance.interactionCount)!=null?s:0},Py=()=>{"interactionCount"in performance||_o||(_o=rn("event",Iy,{type:"event",buffered:!0,durationThreshold:0}))},Oc=0,bo=class{constructor(){Ue(this,"u",[]);Ue(this,"l",new Map);Ue(this,"m");Ue(this,"p")}v(){Oc=Pc(),this.u.length=0,this.l.clear()}P(){let n=Math.min(this.u.length-1,Math.floor((Pc()-Oc)/50));return this.u[n]}h(n){var i,r;if((i=this.m)==null||i.call(this,n),!n.interactionId&&n.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(n.interactionId);if(e||this.u.length<10||n.duration>t.T){if(e?n.duration>e.T?(e.entries=[n],e.T=n.duration):n.duration===e.T&&n.startTime===e.entries[0].startTime&&e.entries.push(n):(e={id:n.interactionId,entries:[n],T:n.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(r=this.p)==null||r.call(this,e)}}},Th=s=>{let n=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(n(s=aa(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Nc=[200,500],Oy=(s,n={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&hr(()=>{var c;Py();let t,e=ke("INP"),i=oa(n,bo),r=l=>{Th(()=>{for(let p of l)i.h(p);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=rn("event",r,{durationThreshold:(c=n.durationThreshold)!=null?c:40});t=Me(s,e,Nc,n.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(o.takeRecords()),t(!0))}),gi(()=>{i.v(),e=ke("INP"),t=Me(s,e,Nc,n.reportAllChanges)}))})},Ao=class{constructor(){Ue(this,"m")}h(n){var t;(t=this.m)==null||t.call(this,n)}},Mc=[2500,4e3],Ny=(s,n={})=>{hr(()=>{let t=_h(),e,i=ke("LCP"),r=oa(n,Ao),o=l=>{n.reportAllChanges||(l=l.slice(-1));for(let h of l)r.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-nn(),0),i.entries=[h],e())},c=rn("largest-contentful-paint",o);if(c){e=Me(s,i,Mc,n.reportAllChanges);let l=aa(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>Th(l),{capture:!0,once:!0});gi(h=>{i=ke("LCP"),e=Me(s,i,Mc,n.reportAllChanges),na(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},kc=[800,1800],To=s=>{document.prerendering?hr(()=>To(s)):document.readyState!=="complete"?addEventListener("load",()=>To(s),!0):setTimeout(s)},My=(s,n={})=>{let t=ke("TTFB"),e=Me(s,t,kc,n.reportAllChanges);To(()=>{let i=ra();i&&(t.value=Math.max(i.responseStart-nn(),0),t.entries=[i],e(!0),gi(()=>{t=ke("TTFB",0),e=Me(s,t,kc,n.reportAllChanges),e(!0)}))})},ky=(()=>{class s{onFCP(t){try{bh(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Cy(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{Ny(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{My(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{Oy(t,{reportAllChanges:!0})}catch{q.counters.webVitalsErrors.count("INP")}}}return s})();var on=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Dy=(()=>{class s extends on{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.Ew=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=Mt(t);return Ki(i)&&csArray.prototype.indexOf.call(this.Ew,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Rh=(()=>{class s extends on{constructor(t){super(),this.mt=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.mt.getEventTargetPath(t)),e}}return s})(),Dc=65535,xy=(()=>{let s;return function(n){function t(e){let i=Mt(e);if(!i||!ft(i)||!$t(i.getBoundingClientRect)||!pt(e.pageX)||!pt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let r=i.getBoundingClientRect(),o=e.pageX-r.left-bt.windowOffsetX(),c=e.pageY-r.top-bt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,r.width),h=Math.max(i.scrollHeight,r.height),p=Math.round(o/l*Dc),u=Math.round(c/h*Dc);return{xRel:p,yRel:u,valid:!0}}n.getRelativePosition=t}(s||(s={})),s})(),Ly=Math.pow(2,31);function Uy(s,n=0){let l=n>>>0,h=s.length;for(let m=0;m<h-3;m+=4){let v=(csString.prototype.charCodeAt.call(s,m)&255|(csString.prototype.charCodeAt.call(s,m+1)&255)<<8|(csString.prototype.charCodeAt.call(s,m+2)&255)<<16|(csString.prototype.charCodeAt.call(s,m+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let p=0,u=h&3,y=h-u;switch(u){case 3:p^=(csString.prototype.charCodeAt.call(s,y+2)&255)<<16;case 2:p^=(csString.prototype.charCodeAt.call(s,y+1)&255)<<8;case 1:p^=csString.prototype.charCodeAt.call(s,y)&255,p=Math.imul(p,3432918353),p=p<<15|p>>>17,p=Math.imul(p,461845907),l^=p}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Ch(s){return Uy(s)+Ly>>>0}var Vy=(()=>{class s extends on{constructor(t,e){super(),this.ps=t,this.mt=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this.Il=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:r,yRel:o}=xy.getRelativePosition(t);if(i){let c=this.mt.getEventTargetPath(t);c!==Ie.INVALID_ELEMENT&&(e.xRel=r,e.yRel=o,e.type===z.MOUSEMOVE&&(c!==this.Il||this.ps.iframesTracking?(this.Il=c,e.tgtHM=c,this.ps.isChild||(e.tgtHMH=Ch(e.tgtHM))):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this.Il="");return e}}return s})(),zt=(()=>{let s;return function(n){n[n.ANONYMIZED=0]="ANONYMIZED",n[n.CAPTURED=1]="CAPTURED",n[n.MASKED=2]="MASKED",n[n.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),xc=100,Ih=(()=>{class s extends on{constructor(t,e,i){super(),this.f=t,this.le=e,this.M=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}Sw(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),r=i.nextNode();for(;r;){if(e+=r.textContent,qo(r.parentElement)||Ji(r.parentElement)||this.le.getElementSensitiveStatus(r.parentElement)!==zt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=xc)break;r=i.nextNode()}return!1}vw(t){let e=ci(t,"button,a");return e||(this.f.collectTargetText===fo.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(ze(csEventtarget.apply(t))){let i=this.vw(csEventtarget.apply(t));if(i&&T(i.textContent)&&!this.Sw(i)&&!this.M.hasPII(i.textContent,this.f.anonymizeDigits)){let r=Y.truncate(csString.prototype.trim.call(i.textContent),xc);r.length>0&&(e.text=r)}}return e}}return s})(),Ph=(()=>{class s extends on{constructor(t,e){super(),this.mt=t,this.le=e,this.supportedEventTypes=[z.CLICK,z.SUBMIT,z.CHANGE,z.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.le.getSensitiveStatus().useAnonymization,{path:r,hierarchy:o}=this.mt.getEventTargetPathAndHierarchy(t,i);return e.tgt=r,e.hrchy=o,e}}return s})();function Oh(s,n,t){let e=[];return csArray.prototype.push.call(e,new Vy(s,n)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Ih(s,t,new Ls)),s.collectHierarchy&&csArray.prototype.push.call(e,new Ph(n,t)),csArray.prototype.push.call(e,new Dy,new Rh(n)),e}function Nh(s,n,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Ih(s,t,new Ls)),s.collectHierarchy&&csArray.prototype.push.call(e,new Ph(n,t)),csArray.prototype.push.call(e,new Rh(n)),e}var jy=50,Hy=(()=>{class s{constructor(t=[]){this.Ut=t}stringifyEvents(){return csJSON.stringify(this.Ut)}addEvent(t){csArray.prototype.push.call(this.Ut,t)}eventsCount(){return this.Ut.length}clearEvents(){this.Ut=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=jy}isEmpty(){return this.Ut.length===0}getEvents(){return this.Ut}}return s})(),By="csAnalysisEventsPersisted",Lc="v2/events",ca=["submit"],Ro=["trackEvent"],Fy="track",$y=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,y,m,v){this.f=t,this.St=e,this.O=i,this.Z=r,this.Lt=o,this.E=c,this.F=l,this.xt=h,this.lt=p,this.Vt=u,this.K=y,this.le=m,this.Sn=v}init(){let t=new Hy,e=this.Vt.create(`${this.f.getTrackerUri()}/${Lc}`,!0,"base64");this.Zo=this._w(e),this.pe=this.bw(t,this.Zo.getRecoveryStorage(),e),this.pe.init(),this.K.addListener(this.pe),this.lt.addListener(this.pe),this.E.register(ca,(i,r)=>{this.pe.pushSubmitCommandEvent(i,r)}),this.E.register(Ro,i=>{if(!K(i))throw new Error(`Command misuse: ${Ro}`);this.pe.pushCustomEvent(i.name,i.source,i.properties)}),this.Sn&&this.Sn.register(Fy,(i,r,o)=>{T(i)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"chameleon")!==-1&&(o=Cs.CHAMELEON),this.pe.pushCustomEvent(i,o,r)})}onStartTracking(t){this.Zo.start(),this.pe.start(t)}onAfterNaturalPageView(){this.pe.initStates()}onAfterArtificialPageView(){this.pe.initStates(),this.pe.collectInitialEvents()}onArtificialPageViewEnd(){this.pe.clearStates(!0)}onBeforeSessionRenewal(){this.pe.clearStates(),this.pe.stop(),this.Zo.stop()}onOptout(){this.pe.stop(),this.Zo.stop()}bw(t,e,i){var r;let o=new dy(window),c=new Sy,l=Oh(this.f,this.Z,this.le),h=[];this.f.collectSubmit||csArray.prototype.push.call(h,"submit");let p=new Eh(l,this.Z,this.Lt,h),u=Nh(this.f,this.Z,this.le),y=new yh(u,this.xt),m=new Ty(new ky),v=new Sh,N,D,w,S=new vh(`${this.f.getTrackerUri()}/${Lc}`),C=new Gi(this.St,this.O),k,_,F,Q;return new _y(this.f,p,y,c,o,t,S,C,this.F,e,this.Z,m,v,i,N,D,w,k,_,F,Q)}_w(t){return new by(new Ay(By),t)}}return s})(),Gy=(()=>{class s extends ht{constructor(t,e,i,r){super(),this.ft=t,this.Pl=e,this.St=i,this.fe=r,this.ta=[],this.Xs=0}init(){this.ft.init()}initStates(){this.Ol(),this.ta=[],this.Xs=0,this.El()}El(){this.Ze=I.now()}Ri(){return I.now()-this.Ze}onStart(){this.ft.subscribe(s.jt,t=>this.Q(t))}onStop(){this.ft.unsubscribe(s.jt)}onIframeApiError(t){this.Q(t)}Q(t){this.isStarted&&this.Xs<s.vr&&(t.relativeTime=this.Ri(),csArray.prototype.push.call(this.ta,this.fe.anonymize(t)),this.wr(),q.counters.networkRequests.count("collected"))}Ol(){this.Pl.removeQueryParams(),this.Pl.setQueryParams(this.St.getRequestParameters())}wr(){this.Pl.send({errors:this.ta}),this.ta=[],this.Xs+=1}}return s.jt="ApiErrorsService",s.vr=20,s})(),zy="api-errors",zi=["api-errors:maskUrl"],qy=(()=>{class s{constructor(t,e,i,r,o,c,l){this.ft=t,this.fe=e,this.f=i,this.St=r,this.lt=o,this.E=c,this.Vt=l}init(){let t=this.Vt.create(`${this.f.getTrackerUri()}/${zy}`,!0);this.Pi=new Gy(this.ft,t,this.St,this.fe),this.Pi.init(),this.lt.addListener(this.Pi),this.ut()}ut(){this.E.register(zi,t=>{if(!T(t))throw new Error(`Command misuse: ${zi[0]}`);this.fe.addUrlMaskingPattern(t)})}onStartTracking(){this.Pi.start()}onAfterNaturalPageView(){this.Pi.initStates()}onAfterArtificialPageView(){this.Pi.initStates()}onBeforeSessionRenewal(){this.Pi.stop()}onOptout(){this.Pi.stop()}}return s})(),Wy=(()=>{class s{constructor(t){this.Nl=t}buildApiErrors(t,e){let i=this.Nl.collectDataPoints(t,e);if(i===null)return null;let r=this.Aw(t,i);if(e){let o=this.Tw(t,i);return{apiError:r,detailedApiError:o}}return{apiError:r}}Tw(t,e){let i=this.sf(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}sf(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}Aw(t,e){let i=this.sf(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),Mh=(()=>{class s extends ea{constructor(t,e,i){super(),this.sa=t,this.ia=e,this.Nl=i,this.Ml=0,this.Rw=new Wy(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.Ml++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.Ml--,super.unsubscribe(t)}init(){let t=this.Nl.computeApiErrorCollectionOptions();this.sa.setCollectionOptions(t),this.sa.onEvent(e=>this.nf(e)),this.ia.setCollectionOptions(t),this.ia.onEvent(e=>this.nf(e))}onStartTracking(){this.sa.start(),this.ia.start()}onStopTracking(){this.sa.stop(),this.ia.stop()}nf(t){let e=this.Rw.buildApiErrors(t,this.Ml!==0);if(e)for(let i in this.subscriptions){let r=this.subscriptions[i];r.hasOwnProperty("detailedEvent")?e.detailedApiError&&r(e.detailedApiError):r(e.apiError)}}}return s})(),kh=(()=>{class s{constructor(t,e,i=!1){this.pt=t,this.J=e,this._r=i}addUrlMaskingPattern(t){this.pt.addUrlMaskingPattern(t)}anonymize(t){let e=this.J.removeQueryString(t.url),i={maskingPatterns:this.pt.getUrlMaskingPatterns(),partialMaskingPatterns:this.pt.getPartialUrlMaskingPatterns(),maskNames:this._r};return{...t,url:this.J.anonymizeUrl(e,i),library:t.library?this.J.anonymizeUrl(t.library,i):void 0}}}return s})(),Yy=(()=>{class s{constructor(){this.Cw=64e3,this.Iw=5e3,this.Pw=2e3,this.rf=8e3,this.bs=!!self.TextEncoder,this.bs&&(this.Ow=new TextEncoder)}br(t){return this.Ow.encode(t).byteLength}of(t,e,i){let r=0;t[e]&&(r+=this.br(t[e]),r>this.rf&&(r=0,t[e]=Y.ELLIPSIS)),t[i]&&(r+=this.br(csJSON.stringify(t[i])),r>this.rf&&(t[i]=s.truncatedObjectMarker))}Nw(t){t.queryParameters&&this.br(t.queryParameters)>this.Pw&&(t.queryParameters=Y.ELLIPSIS)}Mw(t){t.requestBody&&this.br(t.requestBody)>this.Cw&&(t.requestBody=Y.ELLIPSIS),t.responseBody&&this.br(t.responseBody)>this.Iw&&(t.responseBody=Y.ELLIPSIS)}truncate(t){this.bs?(this.Nw(t),this.Mw(t),this.of(t,"customResponseHeaders","plainCustomResponseHeaders"),this.of(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[Y.ELLIPSIS]:Y.ELLIPSIS},s})(),Xy=(()=>{let s;return function(n){function t(r){let o="[",c="]",l=[];for(let h=0;h<r.length;++h)if(r[h]===o)csArray.prototype.push.call(l,r[h]);else if(r[h]===c)if(csString.prototype.indexOf.call(r,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(r){if(!r)return!0;if(!t(r))return!1;let o=csString.prototype.split.call(r,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let p=csString.prototype.split.call(c,".");return p[0].length===0&&csArray.prototype.shift.call(p),csArray.prototype.every.call(p,u=>{let y=/^\-?\d+$/.exec(u);return y?parseInt(y[0],10)>=0:u==="$"||/\w+/.test(u)})})}n.isValidJSONPath=e;function i(r,o){if(!r)return;let c=csString.prototype.split.call(r,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,p=>{if(p[0]==="'"||p[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(p,1,p.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(p,"."),u=>u.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let p of l)if(h[p]!==void 0)h=h[p];else return;return h}n.getJSONPathValue=i}(s||(s={})),s})(),Ky=(()=>{class s{constructor(){this.kw=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.kw.has(t)}}return s})(),Jy=(()=>{class s{constructor(){this.Dw=64e3,this.xw=100,this.et={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.af=new Ky}Lw(t){return t.length<=this.Dw}Uw(t){let e=t["content-type"];return e!==void 0&&(Tt(e,"application/json")||Tt(e,"application/graphql"))}Vw(t,e){return t&&this.Lw(t)&&this.Uw(e)}na(t,e,i,r){let o=r==="request"?this.jw:this.Hw;if(o!==void 0||this.Vw(e,i)){if(o===void 0)try{o=csJSON.parse(e),r==="request"?this.jw=o:this.Hw=o}catch{return}let c=Xy.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!Jt(c))){let l=T(c)?c:csJSON.stringify(c);return Y.truncate(l,this.xw,Y.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,r;return(e.type==="request-response"||e.type==="response")&&(i=this.na(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(r=this.na(e.path,t.requestBody,t.requestHeaders,"request")),J(i)||J(r)}collectBodyAttribute(t,e,i){let r;(e.type==="request-response"||e.type==="response")&&(r=this.na(e.path,t.responseBody,t.responseHeaders,"response"),r&&(e.encrypted?this.et.responseBodyAttributes[e.path]=r:(r=i(r),this.et.plainResponseBodyAttributes[e.path]=r))),(e.type==="request-response"||e.type==="request")&&(r=this.na(e.path,t.requestBody,t.requestHeaders,"request"),r&&(e.encrypted?r&&(this.et.requestBodyAttributes[e.path]=r):(r=i(r),this.et.plainRequestBodyAttributes[e.path]=r)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.et.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.et.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let r=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[r]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.et.customResponseHeaders[r]=t.responseHeaders[r]:this.et.plainCustomResponseHeaders[r]=i(t.responseHeaders[r])),t.requestHeaders[r]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.et.customRequestHeaders[r]=t.requestHeaders[r]:this.et.plainCustomRequestHeaders[r]=i(t.requestHeaders[r]))}collectStandardHeaders(t){if(!(Object.keys(this.et.standardRequestHeaders).length>0||Object.keys(this.et.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.af.isValidStandardHeader(e)&&(this.et.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.af.isValidStandardHeader(e)&&(this.et.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.et.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.et.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.et.collectRequestBody=!0)}getCollectedDataPoints(){return this.et}}return s})(),Ci=(()=>{let s;return function(n){n.CONTENTSQUARE="contentsquare.net",n.CLICKTALE="clicktale.net",n.FAKE_TRACKER="fake-tracker.content-square.fr",n.HEAP_API="heap-api.com",n.HEAP_ANALYTICS="heapanalytics.com"}(s||(s={})),s})(),Dh=(()=>{class s{constructor(t,e){this.ra=t,this.M=e}collectDataPoints(t,e){this.et=new Jy;let i=!1;if(this.ra.collectionRules)for(let r of this.ra.collectionRules)this.Bw(r,t)&&this.Fw(r,t)&&this.$w(r,t)&&(i=!0,this.Gw(t,r,e));return i||(i=this.zw(t)),i&&e&&this.ra.collectStandardHeaders&&this.et.collectStandardHeaders(t),i?this.et.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.ra.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let r=[Ci.CONTENTSQUARE,Ci.CLICKTALE,Ci.HEAP_API,Ci.HEAP_ANALYTICS];return csArray.prototype.push.call(r,Ci.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}Bw(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}Fw(t,e){return t.bodyContent?this.et.isBodyContentMatching(e,t.bodyContent):!0}$w(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,r=>r.primary);return i===void 0?!0:this.et.isBodyAttributeValueFound(e,i)}zw(t){return t.statusCode>=400}Gw(t,e,i){e.bodyContent&&this.et.collectBodyContent(e.bodyContent);let r=Re(e.bodyAttributePaths,o=>o.primary===1);if(r&&this.et.collectBodyAttribute(t,r,o=>this.M.anonymizePII(o)),i){this.et.setCollectQueryParam(e.collectQueryParam),this.et.setCollectResponseBody(e.collectResponseBody),this.et.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.et.collectCustomHeaders(t,c,l=>this.M.anonymizePII(l));let o=Hi(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.et.collectBodyAttribute(t,c,l=>this.M.anonymizePII(l))}}}return s})(),Gr=(()=>{let s;return function(n){n.Info="info",n.Log="log",n.Debug="debug",n.Warning="warn",n.Error="error"}(s||(s={})),s})(),xh=(()=>{class s{static observe(t,e){for(let i of e.levels){let r=s.addConsoleMessageInterceptor(t,i);(r==null?void 0:r.callbacks.size)===1&&r.interceptor.activate()}}static addConsoleMessageInterceptor(t,e){if(s.interceptors.has(e)){let i=s.interceptors.get(e);return i.callbacks.add(t),i}if(s.isTrackedLogLevel(e)&&Gr[e]in window.console){let i=Xt({target:window.console,methodName:Gr[e],hook:({args:o,callerName:c})=>{s.onConsoleMessage(o,e,c)},options:{withCallerName:!0}});if(i===null)return null;let r={interceptor:i,callbacks:new Set([t])};return s.interceptors.set(e,r),r}return null}static disconnect(t,e){for(let i of e.levels){let r=s.interceptors.get(i);r&&(r.callbacks.delete(t),r.callbacks.size===0&&r.interceptor.deactivate())}}static isTrackedLogLevel(t){return t in Gr}static onConsoleMessage(t,e,i){if(!s.kl)try{let r=s.interceptors.get(e);s.kl=!0,r==null||r.callbacks.forEach(o=>{o({level:e,logs:t,origin:i})})}finally{s.kl=!1}}constructor(t,e){this.A=t,this.At=e}observe(){s.observe(this.A,this.At)}disconnect(){s.disconnect(this.A,this.At)}}return s.interceptors=new Map,s.kl=!1,s})();function Qy(s=300){let n=null,t=0,e="[Object]";return function(i,r){var o;if(!(t>=s))return n||(n=r),t+=i.length,typeof r=="object"&&r!==null&&this===n?(t+=e.length,e):(t+=r===null?4:r===void 0?0:typeof(r==null?void 0:r.toString)=="function"&&((o=r.toString())===null||o===void 0?void 0:o.length)||0,r)}}function Un(s){switch(typeof s){case"string":return s;case"object":try{return csJSON.stringify(s)}catch{return csJSON.stringify(s,Qy())}default:return csString(s)}}function Zy(s,n){let t="";for(;s<n.length;)t=t+" "+Un(n[s]),s++;return t}function Lh(s,...n){if(n.length===0)return Un(s);let t=0;if(typeof s=="string"){let e=/(%?)(%([oOdisf]))/g;s=csString.prototype.replace.call(s,e,i=>{let r;if(t>=n.length)return i;switch(i){case"%i":case"%d":r=parseInt(n[t],10);break;case"%s":r=csString(n[t]);break;case"%f":r=parseFloat(n[t]);break;case"%o":case"%O":r=Un(n[t]);break;default:r=n[t]}return t++,r})}else s=Un(s);return t<n.length&&(s+=Zy(t,n)),s}var la=(()=>{let s;return function(n){function o(h,p,u=!1){let m={message:Y.truncate(h,300,Y.ELLIPSIS),errorType:"customError"};return(u||l(p))&&(c(p),m.attributes=p),m}n.buildCustomErrorEvent=o;function c(h){for(let p in h){let u=h[p];if(typeof u=="string"&&u.length>30&&(u=Y.truncate(u,30,Y.ELLIPSIS),h[p]=u),p.length>30){let y=Y.truncate(p,30,Y.ELLIPSIS);delete h[p],h[y]=u}}}function l(h){let p=Object.keys(h).length;return p>0&&p<=5}}(s||(s={})),s})(),Uh=(()=>{class s{constructor(t){var e;this.f=t,this.U=!1,this.z=new xh(i=>{this.onMessageConsole(i.logs,i.level,i.origin)},{levels:(e=t.customErrors.consoleMessageLogLevels)!==null&&e!==void 0?e:[]})}start(){this.U||(this.z.observe(),this.U=!0)}stop(){this.U&&(this.z.disconnect(),this.U=!1)}onEvent(t){this.qw=t}Dl(t){for(let e=0;e<t.length;e++)if($t(t[e]))return[];return t}xl(t){if(t===void 0||t==="")return!1;let e=rr(t);return!!tn(e,this.f.hostnames)}onMessageConsole(t,e,i){let r=this.Dl(t);if(r.length===0||!this.xl(i))return;let o=ms(r),c=o[0],l=csArray.prototype.slice.call(o,1),h=la.buildCustomErrorEvent(Lh(c,...l),{csLogLevel:e},!0);this.qw(h)}}return B([O("ConsoleMessageTracker: onMessageConsole")],s.prototype,"onMessageConsole",null),s})(),js=["trackError"],tE=20,eE=(()=>{class s extends ht{constructor(t,e,i,r,o){super(),this.Ll=t,this.St=e,this.Ks=i,this.K=r,this.As=o,this.oa=[],this.Oi=0,this.Ni=[]}initStates(){var t;this.Ol(),this.Ze=I.now(),this.oa=[],this.Oi=0,(t=this.As)===null||t===void 0||t.onEvent(e=>this.Q(e))}trackCustomError(t,e={}){if(!(T(t)&&Jt(e)&&pt(e)))throw new Error(`Command misuse: ${js[0]}`);let i=la.buildCustomErrorEvent(t,e);this.Ar(i)}onIframeCustomError(t){this.Q(t)}onStart(){var t;this.Ul(),(t=this.As)===null||t===void 0||t.start()}onStop(){var t;(t=this.As)===null||t===void 0||t.stop()}Ul(){this.isStarted&&(csArray.prototype.forEach.call(this.Ni,t=>this.Ar(t)),this.Ni=[])}Ar(t){if(this.isStarted){let e=this.Q(t);e&&this.K.emitCustomErrorEvent(e)}else csArray.prototype.push.call(this.Ni,t)}Q(t){if(this.isStarted&&this.Oi<tE){let e=this.Ww(t);return csArray.prototype.push.call(this.oa,e),this.wr(),e}return null}Ww(t){let e={...t,rt:this.Ri()};return e.message=this.Ks.anonymize(t.message),e}Ol(){this.Ll.removeQueryParams(),this.Ll.setQueryParams(this.St.getRequestParameters())}Ri(){return I.now()-this.Ze}wr(){this.Ll.send({errors:this.oa}),this.oa=[],this.Oi+=1}}return s})(),sE="custom-errors",iE=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.Ks=t,this.f=e,this.St=i,this.E=r,this.Js=o,this.Vt=c,this.lt=l,this.As=h}init(){let t=this.Vt.create(`${this.f.getTrackerUri()}/${sE}`,!0);this.Mi=new eE(t,this.St,this.Ks,this.Js,this.As),this.lt.addListener(this.Mi),this.ut()}ut(){this.E.register(js,(t,e)=>{this.Mi.trackCustomError(t,e)})}onStartTracking(){this.Mi.start()}onAfterNaturalPageView(){this.Mi.initStates()}onAfterArtificialPageView(){this.Mi.initStates()}onBeforeSessionRenewal(){this.Mi.stop()}onOptout(){this.Mi.stop()}}return s})(),nE=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,rE="$1$4CS_ANONYMIZED_NAME$3$6",oE=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,aE="CS_ANONYMIZED_PHONE",Vh=(()=>{class s{constructor(t,e){this.M=t,this.J=e}anonymize(t){return this.J?csArray.prototype.join.call(csArray.prototype.map.call(Kf(t),({content:e,isUrl:i})=>{var r;return i?(r=this.J)===null||r===void 0?void 0:r.anonymizeUrl(e,{maskNames:!0}):this.cf(e)}),""):this.cf(t)}cf(t){t=this.M.anonymizePII(t);let e=t;t=this._r(t),t!==e&&(q.counters.redactedPII.count("name"),q.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.Yw(t),t!==i&&(q.counters.redactedPII.count("phone"),q.counters.redactedPII.count("phone-in-custom-error")),t}_r(t){return csString.prototype.replace.call(t,nE,rE)}Yw(t){return csString.prototype.replace.call(t,oE,aE)}}return s})(),cE=20,lE="Custom Error:",hE="https://cserror.com/texterror.js",uE=(()=>{class s extends ht{constructor(t,e,i,r,o,c){super(),this.Ts=t,this.Vl=e,this.St=i,this.ge=r,this.Js=o,this.w=c,this.aa=[],this.ki=0,this.Ni=[]}initStates(){this.Ze=I.now(),this.Vl.removeQueryParams(),this.Vl.setQueryParams(this.St.getRequestParameters()),this.aa=[],this.ki=0}onStart(){this.Ts.subscribe(s.jt,t=>this.Q(t)),this.Ul()}onStop(){this.Ts.unsubscribe(s.jt)}onIframeJavascriptError(t){this.Q(t)}trackCustomError(t){let e={errorType:"jsError",message:`${lE} ${t}`,lineno:1,colno:1,filename:hE};this.Ar(e)}Ar(t){if(this.isStarted){let e=this.Q(t);e&&this.Js.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.Ni,t)}Ul(){this.isStarted&&(csArray.prototype.forEach.call(this.Ni,t=>this.Ar(t)),this.Ni=[])}Q(t){if(this.isStarted&&this.ki<cE){let e={...t,pageUrl:this.w.getAnonymizedUrl(),rt:this.Ri()};return this.ge.anonymize(e),csArray.prototype.push.call(this.aa,e),this.wr(),e}return null}Ri(){return I.now()-this.Ze}wr(){this.Vl.send({errors:this.aa}),this.aa=[],this.ki+=1}}return s.jt="JavaScriptErrorsService",s})(),dE="errors",pE=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this.Ts=t,this.ge=e,this.f=i,this.St=r,this.lt=o,this.E=c,this.Js=l,this.w=h,this.Vt=p}init(){let t=this.Vt.create(`${this.f.getTrackerUri()}/${dE}`,!0);this.Di=new uE(this.Ts,t,this.St,this.ge,this.Js,this.w),this.lt.addListener(this.Di),this.ut()}ut(){this.f.jsCustomErrorsEnabled&&!this.f.customErrors.enabled&&this.E.register(js,t=>{this.Di.trackCustomError(t)})}onStartTracking(){this.Di.start()}onAfterNaturalPageView(){this.Di.initStates()}onAfterArtificialPageView(){this.Di.initStates()}onBeforeSessionRenewal(){this.Di.stop()}onOptout(){this.Di.stop()}}return s})(),jh=(()=>{class s{constructor(t){this.A=t,this.Qs=!1,this.Gt={boundElement:st,type:"error",listener:e=>this.Xw(e)}}observe(){Et(this.Gt,this.Qs)}disconnect(){St(this.Gt,this.Qs)}Xw(t){this.A(t)}}return s})(),Hh=(()=>{class s extends ea{constructor(){super(),this.z=new jh(t=>this.errorListener(t))}onStartTracking(){this.z.observe()}onStopTracking(){this.z.disconnect()}errorListener(t){let e=this.Kw(t);for(let i in this.subscriptions){let r=this.subscriptions[i];r(e)}}Jw(t){return t=t!=null?t:"[NO ERROR MESSAGE]",Y.truncate(t,s.jl,Y.ELLIPSIS)}Qw(t){return!t||ee(t)?"":Y.truncate(t,s.Hl,Y.ELLIPSIS)}Kw(t){return{errorType:"jsError",message:this.Jw(t.message),filename:this.Qw(t.filename),lineno:t.lineno,colno:t.colno}}}return s.jl=1024,s.Hl=150,B([O("Event handler type: error")],s.prototype,"errorListener",null),s})(),fE="CS_ANONYMIZED_VALUE",Bh=(()=>{class s{constructor(t,e){this.M=t,this.w=e}anonymize(t){return T(t.message)&&(t.message=this.Zw(t.message),t.message=this.M.anonymizePII(t.message)),T(t.filename)&&(t.filename=this.w.computeOverriddenUrl(t.filename)),t}Zw(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${fE}'`)}}return s})(),gE=512,mE=255,Di=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,gE),this.value=T(e)?csString.prototype.slice.call(e,0,mE):e}static isKeyValid(t){return T(t)}static isValueValid(t){return T(t)||Ge(t)}}return s})(),yE=(()=>{class s extends ht{constructor(t,e){super(),this.zt=t,this.M=e,this.Bl=[]}onStart(){csArray.prototype.forEach.call(this.Bl,t=>this.lf(t.key,t.value)),this.Bl=[]}onStop(){}lf(t,e){let i=this.M.anonymizePII(t),r=Ge(e)?e:this.M.anonymizePII(e);this.zt.add(new Di(i,r))}trackDynamicVariable(t,e){if(Di.isKeyValid(t)&&Di.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Bl,{key:t,value:e});return}this.lf(t,e)}else throw new Error(`Command misuse: ${an[0]}`)}}return s})(),EE=(()=>{class s{constructor(t){this.ye=t,this.zt=[]}add(t){csArray.prototype.push.call(this.zt,t),this.setBatchReadyCall()}clear(){this.zt=[]}onBatchReady(t){this.t_=t}getRequestParameters(){let t={};for(let e of this.zt)t[e.key]=e.value;return{dv:this.ye.compressSync(csJSON.stringify(t),"base64"),ct:this.ye.algorithm}}setBatchReadyCall(){this.t_()}}return B([Vs({wait:0,mode:"trailing"}),O("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),SE="dvar",an=["trackDynamicVariable"],vE=(()=>{class s{constructor(t,e,i,r,o,c){this.E=t,this.R=e,this.f=i,this.Ue=r,this.ye=o,this.M=c,this.fs=new oi(this.f.getTrackerUri(),SE),this.zt=new EE(this.ye),this.xi=new yE(this.zt,this.M)}init(){this.fs.setRequestParametersProviders(this.Ue,this.zt),this.R.setDynamicVariablesService(this.xi),this.zt.onBatchReady(()=>this.fs.send()),this.fs.after(()=>this.zt.clear()),this.E.register(an,({key:t,value:e}={})=>{this.xi.trackDynamicVariable(t,e)})}onStartTracking(){this.xi.start()}}return s})(),Co=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),T(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return pt(t)&&wt(t.revenue)&&T(t.currency)&&t.currency.length<=10&&(!pt(t.id)||T(t.id))}}return s})(),Fh=100,wE=100,_E=(()=>{class s{constructor(t,e,i,r){this.id=t,this.name=e,this.price=i,this.quantity=r}static from(t){if(!s.Kc(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return J(t.sku)&&(e.sku=t.sku),J(t.category)&&(e.category=t.category),J(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,Fh)),e}static Kc(t){return pt(t)&&T(t.id)&&T(t.name)&&wt(parseFloat(t.price))&&Ge(parseInt(t.quantity,10))&&(!J(t.sku)||T(t.sku))&&(!J(t.category)||T(t.category))&&(!J(t.merchant)||T(t.merchant))}}return s})(),$h=(()=>{class s extends ht{constructor(t,e,i){super(),this.M=t,this.hf=e,this.F=i,this.Fl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Fl,t=>{this.Ee=t.transaction,this.Tr=t.transactionItems,this.sendTransaction()}),this.Fl=[]}onStop(){}addTransaction(t){let e=this.M.anonymizeFields(t,["id"]);this.Ee=Co.from(e)}getTransaction(){return this.Ee}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Fl,{transaction:this.Ee,transactionItems:[...this.Tr]}),this.clear();return}if(!(this.hf===null||this.F===null)&&(this.F.refreshSession(),!!this.F.isSessionValid())){if(!this.Ee.hasValidRevenue()){x.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.hf.send()}}addItem(t){if($t(t))throw new Error(`Command misuse: ${mi[1]}`);let e=this.M.anonymizeFields(t,["id","name","sku","category"]),i=_E.from(e);i!==null&&csArray.prototype.push.call(this.Tr,i)}getItems(){return this.Tr}clear(){this.Ee=Co.from({revenue:NaN}),this.Tr=[]}getRequestParameters(){let t={id:this.Ee.id?`${this.Ee.id}`:"",revenue:`${this.Ee.revenue}`};return J(this.Ee.tax)&&(t.tax=`${this.Ee.tax}`),J(this.Ee.shipping)&&(t.shipping=`${this.Ee.shipping}`),J(this.Ee.currency)&&(t.cu=`${this.Ee.currency}`),t.items=window.csJSON.stringify(this.Tr),t}}return s})(),bE=(()=>{class s extends ht{constructor(t,e){super(),this.e_=t,this.F=e,this.Ne=null,this.$l=[]}onStart(){csArray.prototype.forEach.call(this.$l,t=>{this.Ne=t,this.uf()}),this.$l=[]}onStop(){}addToCart(t){let e={};T(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,wE)),T(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,Fh)),(e.sku||e.merchant)&&(this.Ne=e,this.uf())}getCartItem(){return this.Ne}uf(){if(!this.isStarted&&this.Ne!==null){csArray.prototype.push.call(this.$l,this.Ne),this.clear();return}this.F.refreshSession(),this.F.isSessionValid()&&this.e_.send()}clear(){this.Ne=null}getRequestParameters(){if(!this.Ne)return{};let t={};return T(this.Ne.sku)&&this.Ne.sku.length>0&&(t.sku=this.Ne.sku),T(this.Ne.merchant)&&this.Ne.merchant.length>0&&(t.me=this.Ne.merchant),t}}return s})(),Gh=["ecommerce:addToCart","ec:cart:add"],cn=["ecommerce:addTransaction","ec:transaction:create"],mi=["ecommerce:addItem","ec:transaction:items:add"],ln=["ecommerce:send","ec:transaction:send"],AE=(()=>{class s{constructor(t,e,i,r,o,c,l){this.f=t,this.St=e,this.O=i,this.E=r,this.M=o,this.F=c,this.w=l}init(){let t=new oi(this.f.getTrackerUri(),"transaction"),e=new oi(this.f.getTrackerUri(),"addtocart");this.ss=new $h(this.M,t,this.F),this.ca=new bE(e,this.F);let i=new Gi(this.St,this.O,this.w,this.ss);t.setRequestParametersProviders(i),t.after(()=>{this.ss.clear()});let r=new Gi(this.St,this.O,this.w,this.ca);e.setRequestParametersProviders(r),e.after(()=>{this.ca.clear()}),this.E.register(cn,o=>{this.ss.addTransaction(o)}),this.E.register(mi,o=>this.ss.addItem(o)),this.E.register(ln,()=>this.ss.sendTransaction()),this.E.register(Gh,o=>{this.ca.addToCart(o)})}onStartTracking(){this.ss.start(),this.ca.start()}}return s})();var TE=2,ha=(()=>{class s{constructor(t){this.l_=t,this.ha=0}addString(t){this.ha+=t.length*TE}addArrayBuffer(t){this.ha+=t.byteLength}isThresholdReached(){return this.ha>this.l_}reset(){this.ha=0}}return s})();var Uc=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.u_(t)),new csIntersectionObserver(t,e)}static isSupported(){return!!window.csIntersectionObserver&&!!window.IntersectionObserverEntry}static u_(t){return(e,i)=>t(Se(e,RE),i)}}return s})();function RE(s){return s.isVisible||!lt.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var Io=()=>(s,n,t)=>{t.value=CE(t.value)};function CE(s){let n=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var r;let o=(r=this)!==null&&r!==void 0?r:e;if(t=arguments,o[n])return;o[n]=!0,Bo(()=>{o[n]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=n,i}Io.isScheduled=(s,n)=>{let t=n.oncePerTickSymbol;return s[t]};var IE=(()=>{class s{constructor(t){this.A=t,this.ti=new Map,this.gf=e=>{let i=e.target;if(this.ti.has(i))return!0;let r=!1;return this.ti.forEach((o,c)=>{r||!this.ti.get(c).subtree||(r=c.contains(i))}),r},_t.general.nbOfMutationObservers.increase(),this.D=new csMutationObserver(e=>{Io.isScheduled(this,this.garbageCollect)&&(e=Hi(e,this.gf)),e.length&&qt(()=>t(e,this))})}disconnect(){_t.general.nbOfMutationObservers.decrease(),this.D.disconnect(),this.ti=new Map}takeRecords(){return this.D.takeRecords()}observe(t,e){return _t.mutations.elementMutationObserved.increase(),this.ti.set(t,e),this.D.observe(t,e)}unobserve(t){this.ti.has(t)&&(_t.mutations.elementMutationObserved.decrease(),this.ti.delete(t),this.garbageCollect())}garbageCollect(){_t.mutations.unobserveGarbageCollection.measure(()=>{let t=Hi(this.takeRecords(),this.gf);t.length&&this.A(t,this),this.D.disconnect(),this.ti.forEach((e,i)=>this.D.observe(i,e))})}}return it([Io()],s.prototype,"garbageCollect",null),s})(),PE=(()=>{class s{constructor(t){this.A=t,this.pa=new Set}onMutations(t){if(ji(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.pa.values())lt.isConnected(e)||(this.pa.delete(e),this.A(e))}observe(t){this.z||(this.z=new se(e=>csSetTimeout(()=>this.onMutations(e))),this.z.observe()),this.pa.add(t)}disconnect(){var t;(t=this.z)===null||t===void 0||t.disconnect(),this.pa.clear(),this.z=void 0}}return it([O("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),OE=300,fs=(()=>{class s{constructor(t){this.fa=new Set,this.d_=new PE(e=>this.mf(e)),this.G=!1,this.At=t?{...Vc,...t}:Vc}stop(){var t,e;this.G=!1,(t=this.Pr)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect()}start(t){if(this.G)throw new Error("VisibilityObserver is already started");this.A=gs("VisibilityObserver:callback",(i,r)=>t(i,r));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:OE};this.Pr=Uc.create(i=>this.handleIntersection(i),e),this.D=new IE(i=>csSetTimeout(()=>{W(i,r=>this.mf(r.target))})),this.Gl(),this.G=!0}observe(t){if(!this.G)throw new Error("Observer is stopped.");this.At.reobserve===!1&&t[this.zl]||(_t.visibilityObserver.nbElements.increase(),t[this.zl]=!0,this.watchIntersection(t))}Gl(){this.ga=csSymbol("isVisible"),this.zl=csSymbol("ObservedElement"),this.ql=csSymbol("LinkedElement"),this.yf=csSymbol("Tracked")}mf(t){this.fa.add(t);for(let e of this.p_(t))this.fa.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){W(this.fa.keys(),t=>{!t.isConnected||lt.areAncestorsHiddenByCSS(t)||t[this.zl]&&this.watchIntersection(t)}),this.fa.clear()}watchIntersection(t){this.D.unobserve(t),this.Pr.unobserve(t);let e=lt.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.Ef(e,t),this.watchMutation(e)),this.watchMutation(t)):this.Pr.observe(t)}watchMutation(t,e=!0){e&&delete t[this.ga],this.Pr.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.D.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){lt.isVisibleInDocument(i)||this.f_(i);continue}let r=this.At.allowSameMatch||!e.target[this.ga];e.target[this.ga]=!0,r&&!this.At.delay&&this.onVisibilityChanged(e.target,ti.VisibleInViewPort)}this.At.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.ga]&&i&&this.onVisibilityChanged(e.target,ti.VisibleInViewPort)}},this.At.delay)}f_(t){_t.visibilityObserver.hiddenElements.increase();let e=lt.getTopElement(t);this.watchMutation(t),e&&(this.d_.observe(e),this.Ef(e,t),this.watchMutation(e,!1))}Ef(t,e){var i;(t[this.ql]=(i=t[this.ql])!==null&&i!==void 0?i:new Set).add(e)}p_(t){var e,i;let r=[],o=(i=(e=t[this.ql])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return W(o,c=>csArray.prototype.push.call(r,c)),r}onVisibilityChanged(t,e){if(e===ti.VisibleInViewPort&&this.At.trackOnce){if(this.Pr.unobserve(t),this.D.unobserve(t),t[this.yf])return;t[this.yf]=!0}this.A(t,e)}static isSupported(){return Uc.isSupported()}}return it([O()],s.prototype,"observe",null),it([Vs({wait:50}),O(),Ot("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),it([O()],s.prototype,"watchIntersection",null),it([O()],s.prototype,"watchMutation",null),it([O(),Ot("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),it([O()],s.prototype,"onVisibilityChanged",null),s})(),ti=(()=>{let s;return function(n){n.VisibleInViewPort="VisibleInViewPort",n.HiddenByAnother="HiddenByAnother",n.Hidden="Hidden"}(s||(s={})),s})(),Vc={delay:1e3,trackOnce:!0,reobserve:!1};var zr;function NE(s){if(zr||(zr=document.createElement("div")),!(!!s&&T(s)))return x.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Vt.call(zr,s),!0}catch{return x.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}var Oi=(()=>{let s;return function(n){n[n.NOT_NEEDED=1]="NOT_NEEDED",n[n.NOT_EXPRESSED=2]="NOT_EXPRESSED",n[n.WITHDRAWN=3]="WITHDRAWN",n[n.GRANTED=4]="GRANTED"}(s||(s={})),s})(),ds=(()=>{let s;return function(n){function t(r){return r.replayConsentRequiredForSession}n.isReplayConsentNeeded=t;function e(r){return r.collectState===H.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||r.collectState===H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingBlockedByConsent=e;function i(r){return r.collectState===H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingWithDrawn=i}(s||(s={})),s})(),ME=(()=>{class s{constructor(t,e,i,r){this.O=t,this.R=e,this.f=i,this.cs=r,this.Cf=!1}isNaturalPageViewSent(){return this.Cf}setNaturalPageViewSent(t){this.Cf=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,r=this.f.uxaDomain,o=t.pageNumber,c=this.cs.getPageViewType(),l=this.R.isReplayRecorded(),h=this.j_(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:r,recordingConsentState:h,...this.f.smbConfig}}getSessionKey(){let t=this.O.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}j_(t){return ds.isReplayConsentNeeded(this.f)?t.collectState===H.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?Oi.NOT_EXPRESSED:t.collectState===H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?Oi.WITHDRAWN:Oi.GRANTED:Oi.NOT_NEEDED}}return s})(),kE=(()=>{class s{constructor(t){this.Rt=t,this.se=[]}handleCommand(t){if($t(t)&&(this.Mr(t),this.Rt.isNaturalPageViewSent())){let e=this.Rt.getTrackingContext();e!==null&&this.Ht(t,e)}}Mr(t){csArray.prototype.push.call(this.se,t)}executeRegisteredCallbacks(){let t=this.Rt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.se,e=>this.Ht(e,t))}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})(),DE=(()=>{class s{constructor(t){this.Rt=t,this.Li=[]}handleCommand(t){if(this.Rt.isNaturalPageViewSent())return this.H_(t);this.kr(t)}H_(t){let e=this.Rt.getSessionKey();return this.If(t)&&e!==null&&this.Ht(t.callback,e),e}kr(t){this.If(t)&&csArray.prototype.push.call(this.Li,t.callback)}flushPendingCallbacks(){let t=this.Rt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Li,e=>{this.Ht(e,t)}),this.Li=[]}If(t){return t&&typeof t.callback=="function"}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})(),xE=(()=>{class s{constructor(t,e){this.tt=t,this.Rt=e}onTrackingContextRequestCallback(t){let e=this.Rt.getTrackingContext();e!==null&&this.tt.sendToChildren(P.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.Rt.isNaturalPageViewSent())return;let e=this.Rt.getTrackingContext();e!==null&&(t.trackingContext=e,this.tt.sendToChildren(P.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.Rt.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:ai.AfterPageView};this.tt.sendToChildren(P.IntegrationCallback,e)}}return s})();function zh(s,n){let{isRecording:t,pageNumber:e,projectId:i,siteId:r,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,p,u]=l;r?h=`${c}/sites/${r}/player?uu=${p}&sn=${u}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${p}&sn=${u}&pvid=${e}&recordingType=cs`,n.withTimestamp&&(h+=`&t=${I.now()-n.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var LE=(()=>{class s{constructor(t){this.Rt=t}handleCommand(t,e){Jt(t)&&$t(e)&&this.Ht(t,e)}Ht(t,e){csSetTimeout(()=>{let i=this.Rt.getTrackingContext();if(i){let r=zh(i,t);e(r)}})}}return s})(),qh=(()=>{class s{constructor(){this.se=new Set}handleCommand(t,e){return!$t(t)||this.se.has(t)?null:(this.se.add(t),e&&(this.ke=e,this.Pf(t,e)),()=>this.se.delete(t))}executeCallbacks(t){this.B_(t)&&(this.ke=t,this.se.forEach(e=>this.Pf(e,t)))}Pf(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}B_(t){let{isRecording:e,recordingStartTimestamp:i,etrState:r,etrStatus:o,collectState:c}=t;return this.ke&&(this.ke.isRecording!==e||this.ke.recordingStartTimestamp!==i||this.ke.etrState!==r||this.ke.etrStatus!==o||this.ke.collectState!==c)}}return s})(),ur=["afterPageView"],Wh=["getSessionKey"],Yh=["onRecordingContextChange","onRecordingStateChange"],Xh=["replay:link:generate"],UE=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.O=t,this.R=e,this.E=i,this.lt=r,this.tt=o,this.f=c,this.cs=l,this.Bs=h,this.Ea=null}init(){this.Rt=new ME(this.O,this.R,this.f,this.cs),this.Yl=new kE(this.Rt),this.Of=new DE(this.Rt),this.Dr=new qh,this.F_=new LE(this.Rt),this.Ea=new xE(this.tt,this.Rt),this.lt.addListener(this.Ea),this.E.register(Wh,t=>this.Of.handleCommand(t)),this.E.register(ur,t=>this.Yl.handleCommand(t)),this.E.register(Yh,t=>this.Dr.handleCommand(t,this.Bs.getRecordingContext())),this.E.register(Xh,(t,e)=>{this.Tn&&this.F_.handleCommand({...t,recordingStartTimestamp:this.Bs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.Rt.setNaturalPageViewSent(!0),this.Of.flushPendingCallbacks(),this.Yl.executeRegisteredCallbacks(),(t=this.Ea)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.Yl.executeRegisteredCallbacks(),(t=this.Ea)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.Dr.executeCallbacks(this.Bs.getRecordingContext())}setRecordingService(t){this.Tn=t}}return B([Vs({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),VE=(()=>{class s{constructor(t){this.E=t}init(){this.Nf(s.$_,jl),this.Nf(s.G_,Vl)}Nf(t,e){this.E.register([t],(i,r)=>{!T(i)||!(T(r)||qe(r))||x.error(r,`${e}${i}`)})}}return s.G_="logSnippetError",s.$_="logImplementationSnippetError",s})(),jE="@ETP@",jc="@user-identifier@",HE=(()=>{class s extends ht{constructor(t,e,i,r){super(),this.f=t,this.z_=e,this.ye=i,this.K=r,this.Xl=[],this.Ui=[]}onStart(){csArray.prototype.forEach.call(this.Xl,t=>this.Mf(t)),this.Xl=[],csArray.prototype.forEach.call(this.Ui,t=>this.kf(t)),this.Ui=[]}onStop(){}Mf(t){this.q_(t)?yt.isSupported()&&this.W_(t):this.Y_(t)}trackPageEvent(t){if(!s.Df(t))throw new Error(`Command misuse: ${dr[0]}`);this.isStarted?this.Mf(t):csArray.prototype.push.call(this.Xl,t)}q_(t){return Xn(t,jc)}async W_(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,jc.length);if(e.length>yt.MAX_DIGEST_INPUT_SIZE){x.warn("UserIdentifier event: invalid user identifier");return}let i=await yt.digest(e);i?(this.Rn={eventName:i,isETR:!1,isCustomHashId:!0},this.Sa()):x.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.K.emitUserIdentifierEvent(e)}Y_(t){this.K.emitPageEvent(t),this.Rn={eventName:t,isETR:!1,isCustomHashId:!1},this.Sa(),this.f.tagDeploymentMode===Ms.LoadClicktalePtc&&Sc.sendPageEvent(t)}kf(t){this.f.malkaEtrEnabled?this.X_(t):this.K_(t)}trackEventTriggerRecording(t){if(!s.Df(t))throw new Error(`Command misuse: ${yi[0]}`);this.isStarted?this.kf(t):csArray.prototype.push.call(this.Ui,t)}X_(t){Xn(t,jE)?this.K.emitEventTriggerRecording(t,ps.ETR_PAGE):this.K.emitEventTriggerRecording(t,ps.ETR_SESSION),this.Rn={eventName:t,isETR:!0,isCustomHashId:!1},this.Sa()}K_(t){Om(this.f)&&(this.K.emitEventTriggerRecording(t,ps.ETR_LEGACY),this.Rn={eventName:t,isETR:!0,isCustomHashId:!1},this.Sa(),this.f.tagDeploymentMode===Ms.LoadClicktalePtc&&Sc.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.ye.compressSync(this.Rn.eventName,"base64"),ct:this.ye.algorithm,isETR:`${this.Rn.isETR}`,isCustomHashId:`${this.Rn.isCustomHashId}`}}Sa(){this.z_.send()}static Df(t){return T(t)&&!!csString.prototype.trim.call(t)}}return s})(),dr=["trackPageEvent"],yi=["trackEventTriggerRecording"],BE=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.E=e,this.ye=i,this.Ue=r,this.K=o}init(){let t=new oi(this.f.getTrackerUri(),"pageEvent");this.va=new HE(this.f,t,this.ye,this.K),t.setRequestParametersProviders(this.va,this.Ue),this.E.register(dr,e=>{this.va.trackPageEvent(e)}),this.E.register(yi,e=>{this.va.trackEventTriggerRecording(e)})}onStartTracking(){this.va.start()}}return s})(),FE=["hidePageTitle"],$E=["resetHidePageTitle"],GE="onNextPageviewOnly",zE=(()=>{class s{constructor(t,e){this.ve=t,this.E=e}init(){this.E.register(FE,t=>{let e=t===GE;this.ve.setHidePageTitle(e)}),this.E.register($E,()=>this.ve.resetHidePageTitle())}onAfterNaturalPageView(){this.ve.updateStateOnAfterPageview()}onAfterArtificialPageView(){this.ve.updateStateOnAfterPageview()}}return s})(),Kh=(()=>{class s{constructor(){this.xf=255,this.J_="****",this.Q_="data-cs-hide-title",this.Z_="data-heap-redact-text",this.wa={value:!1,onNextPageviewOnly:!1}}getRequestParameters(){return{t:this.getPageTitle()}}getPageTitle(){return this.wa.value||this.tb()?this.J_:this.eb(window.document.title)}setHidePageTitle(t){this.wa={value:!0,onNextPageviewOnly:t}}resetHidePageTitle(){this.wa={value:!1,onNextPageviewOnly:!1}}updateStateOnAfterPageview(){this.wa.onNextPageviewOnly&&this.resetHidePageTitle()}tb(){let t=window.csquerySelector[document.nodeType].call(document,"head > title");return t===null?!1:t.getAttribute(this.Q_)!==null||t.getAttribute(this.Z_)!==null}eb(t){return t.length>this.xf?csString.prototype.substring.call(t,0,this.xf):t}}return s})(),Vn=(()=>{let s;return function(n){n.Artificial="a",n.Renewal="r",n.Natural="n"}(s||(s={})),s})(),qE=(()=>{class s{constructor(){this.Kl=Vn.Natural}setPageViewType(t){this.Kl=t}getPageViewType(){return this.Kl}getRequestParameters(){return{pvt:this.Kl}}}return s})();var WE=(()=>{class s extends ht{constructor(t,e,i,r,o){super(),this.S=t,this.K=e,this.Jl=i,this.w=r,this.cs=o}init(){this.sb()}onStart(t){t?this.ib():this.nb()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.Lf(t,e):pt(t)&&this.w.overridePath(t,e),this.isStarted||(this.K.emitTargetingRulesArtificialPageview(this.w.getUrl()),this.w.cleanupOverrideLifespan())}nb(){this.cs.setPageViewType(Vn.Natural),this.S.emitBeforeNaturalPageView(this.w.getAnonymizedUrl()),this.Jl.send(),this.w.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}ib(){this.cs.setPageViewType(Vn.Renewal),this.S.emitBeforeNaturalPageView(this.w.getAnonymizedUrl()),this.Jl.send(),this.S.emitAfterNaturalPageView()}Lf(t,e){let i=this.w.getAnonymizedUrl();this.cs.setPageViewType(Vn.Artificial),this.S.emitArtificialPageViewEnd(),pt(t)&&this.w.overridePath(t,e),this.S.emitBeforeArtificialPageView(i,this.w.getAnonymizedUrl()),this.Jl.send(),this.w.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}sb(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.Lf()})}}return s})(),YE=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function XE(){return{la:YE}}var KE=99999,JE=(()=>{class s{constructor(t){this.R=t,this.rb=this.ob()&&window.CSCurrentScript}ab(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.cb(e)?null:Math.round(e.responseEnd-e.fetchStart)}cb(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.rb||this.lb()!==1)return{};let t=this.ab();return t===null?{}:{dt:`${Math.min(t,KE)}`}}lb(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}ob(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),pr=["trackPageview"],er=["setPath"],sr=["setQuery"],Hc=["referrer:maskUrl"],QE=["referrer:removeQueryString"],ZE=["referrer:keepQueryString"],qr=s=>Jt(s)&&s!==null,tS=(s,n,t,e)=>{s.register(pr,(i,r)=>{if(!T(i)){n.triggerArtificialPageView();return}qr(r)?n.triggerArtificialPageView(i,r):n.triggerArtificialPageView(i)}),s.register(er,(i,r)=>{if(!T(i))throw new Error(`Command misuse: ${er[0]}`);qr(r)?t.overridePath(i,r):t.overridePath(i)}),s.register(sr,(i,r)=>{if(!T(i))throw new Error(`Command misuse: ${sr[0]}`);qr(r)?t.overrideQuery(i,r):t.overrideQuery(i)}),e&&(s.register(Hc,i=>{if(!T(i))throw new Error(`Command misuse: ${Hc[0]}`);e.addUrlMaskingPattern(i)}),s.register(QE,()=>e.enableRemoveQueryString()),s.register(ZE,()=>e.disableRemoveQueryString()))};var eS=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,y,m,v,N,D){this.f=t,this.E=e,this.S=i,this.Ue=r,this.O=o,this.R=c,this.Rs=l,this.bt=h,this.wt=p,this.w=u,this.ie=y,this.cs=m,this.K=v,this.ve=N,this.Qi=D}init(){let t=new oi(this.f.getTrackerUri(),"pageview");this.ei=new WE(this.S,this.K,t,this.w,this.cs),this.ei.init();let e=new Gi(this.Ue,this.O,bt,this.Rs,this.w,this.bt,Uo,this.wt,this.cs,new JE(this.R),this.ie);this.ve&&e.addProvider(this.ve),this.Qi&&e.addProvider(this.Qi);let i=this.f.isCsCrosswritingHeap();if(i||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let r=this.f.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return r&&(o.happid=r),o}})}t.setRequestParametersProviders(e),tS(this.E,this.ei,this.w,this.Rs)}start(t){this.ei.start(t)}onBeforeSessionRenewal(){this.ei.stop()}}return s})();function sS(s,n){let t=!1,e=function(){if(!t)return s.apply(n,arguments)};return e.cancel=()=>t=!0,e}var Fe=csSymbol(),ua=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,p,u,y,m,v,N;this.A=t,this.Ql=null,this.Zl=null,this.th=null,this.eh=null,this.ih=null,this.hb=cr(D=>this.processUpdateRulesInATick(D)),this.nh=null,this.rh=null,this.oh=null,this.A=D=>qt(()=>t(D)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Ql=Xt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:D,args:w})=>{this.processInsertRule(D,w)}})),typeof((o=(r=window.CSSStyleSheet)===null||r===void 0?void 0:r.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Zl=Xt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:D,args:w})=>{this.processDeleteRule(D,w)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.th=Xt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:D})=>this.processUpdateRule(D)})),typeof((p=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||p===void 0?void 0:p.deleteRule)=="function"&&(this.eh=Xt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:D})=>this.processUpdateRule(D)})),!((u=window.StyleSheet)===null||u===void 0)&&u.prototype&&"disabled"in window.StyleSheet.prototype&&(this.ih=Jn(window.StyleSheet.prototype,"disabled",(D,w,S)=>{w!==S&&this.db(D,w)})),typeof((m=(y=window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||m===void 0?void 0:m.setProperty)=="function"&&(this.nh=Xt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:D})=>{let w=D.parentRule;w instanceof CSSStyleRule&&this.processUpdateRule(w)}})),typeof((N=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||N===void 0?void 0:N.removeProperty)=="function"&&(this.rh=Xt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:D})=>{let w=D.parentRule;w instanceof CSSStyleRule&&this.processUpdateRule(w)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.oh=dm(window.CSSStyleRule.prototype,"style",D=>{this.processUpdateRule(D)}))}observe(){var t,e,i,r,o,c,l,h;(t=this.Ql)===null||t===void 0||t.activate(),(e=this.Zl)===null||e===void 0||e.activate(),(i=this.th)===null||i===void 0||i.activate(),(r=this.eh)===null||r===void 0||r.activate(),(o=this.ih)===null||o===void 0||o.activate(),(c=this.nh)===null||c===void 0||c.activate(),(l=this.rh)===null||l===void 0||l.activate(),(h=this.oh)===null||h===void 0||h.activate()}disconnect(){var t,e,i,r,o,c,l,h;(t=this.Ql)===null||t===void 0||t.deactivate(),(e=this.Zl)===null||e===void 0||e.deactivate(),(i=this.th)===null||i===void 0||i.deactivate(),(r=this.eh)===null||r===void 0||r.deactivate(),(o=this.ih)===null||o===void 0||o.deactivate(),(c=this.nh)===null||c===void 0||c.deactivate(),(l=this.rh)===null||l===void 0||l.deactivate(),(h=this.oh)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Fe]==null&&!t.ownerNode)return;let r={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(r)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.hb.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,r=csArray.prototype.indexOf.call(ms(i.cssRules),e);if(r===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:r};this.A(o)}}processDeleteRule(t,[e]){if(t[Fe]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}db(t,e){if(t[Fe]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return it([O()],s.prototype,"observe",null),it([O()],s.prototype,"disconnect",null),it([O()],s.prototype,"processInsertRule",null),it([O()],s.prototype,"processUpdateRule",null),it([O()],s.prototype,"processUpdateRulesInATick",null),it([O()],s.prototype,"processDeleteRule",null),s})(),iS=(()=>{class s{constructor(t){this.pb=1,this._a=new Set,this.ah=null,this.ch=null,this.rl=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.fb=e=>{let i=e.sheet;if(this._a.has(i)){if(e.type==="cssRuleInserted"){let r={type:"adoptedStyleSheetRuleInserted",sheetId:i[Fe],rule:e.rule,index:e.index};this.A(r)}else if(e.type==="cssRuleDeleted"){let r={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Fe],index:e.index};this.A(r)}else if(e.type==="cssRuleUpdated"){let r={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Fe],rule:e.rule,index:e.index};this.A(r)}else if(e.type==="cssStyleSheetDisabled"){let r={type:"adoptedStyleSheetDisabled",sheetId:i[Fe],disabled:e.disabled};this.A(r)}}},this.A=e=>qt(async()=>{await El(2),t(e)}),this.ue=new fi(this.rl),"adoptedStyleSheets"in Document.prototype&&(this.ah=Jn(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.ch=Jn(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Uf=new ua(this.fb)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ue.observe(),(t=this.ah)===null||t===void 0||t.activate(),(e=this.ch)===null||e===void 0||e.activate(),this.Uf.observe()}disconnect(){var t,e;this._a.clear(),this.ue.disconnect(),(t=this.ah)===null||t===void 0||t.deactivate(),(e=this.ch)===null||e===void 0||e.deactivate(),this.Uf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.gb(e);let i=Se(e,o=>o[Fe]),r={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(r)}gb(t){W(t,e=>{if(this._a.has(e))return;let i=this.pb++;e[Fe]=i,this._a.add(e);let r=this.mb(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:r,disabled:e==null?void 0:e.disabled};this.A(o)})}mb(t){let e=[];try{e=Se(t.cssRules,i=>i.cssText)}catch{}return e}}return it([O()],s.prototype,"observe",null),it([O()],s.prototype,"disconnect",null),it([O()],s.prototype,"setStyleSheets",null),s})(),nS=xs(cS,"optimizeMutations"),rS=csSymbol.for("ignoreNextSerialization");function oS(){let s=new Set,n=new Set,t=new Set,e=new Set,i=new Map,r=new Map,o=new Map,c=new Set,l=new Set,h=new Map,p=new Set;return{isMovedNode(u){return s.has(u)},markAsMovedNode(u){p.delete(u),s.add(u)},isDetachedMove(u){return!!lt.findAncestor(u,y=>p.has(y),!0)},isAddedNode(u){let y=lt.findAncestor(u,m=>n.has(m)||l.has(m)||s.has(m),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(u){return s.has(u)&&!!lt.findAncestor(u,y=>n.has(y)||l.has(y),!0)},markAsAddedNode(u){p.delete(u),l.delete(u),n.add(u)},markAsPendingInsert(u){l.add(u)},isPendingInsert(u){return l.has(u)},isRemovedNode(u){return!!lt.findAncestor(u,y=>t.has(y),!0)},markAsRemovedNode(u){t.add(u)},isUselessNode(u){return e.has(u)},markAsUselessNode(u){e.add(u)},getPlaceholder(u,y){let m=y==="previous"?r:i;return u&&m.has(u)?m.get(u)||null:u},getSiblings(u){let y=u.addedNodes.length,m=this.getPlaceholder(u.previousSibling,"previous"),v=this.getPlaceholder(u.nextSibling,"next");if(y){let N=m,D=v,w=u.previousSibling!==m,S=u.nextSibling!==v;for(let C=0;C<y;C++){let k=u.addedNodes[C],_=u.addedNodes[y-C-1];this.isLatestNodeMutation(k,u)?(r.delete(k),u.previousSibling&&w&&(i.set(u.previousSibling,k),w=!1),N=k):r.set(k,N),this.isLatestNodeMutation(_,u)?(i.delete(_),u.nextSibling&&S&&(r.set(u.nextSibling,_),S=!1),D=_):i.set(_,D)}}else u.previousSibling&&u.previousSibling!==m&&i.set(u.previousSibling,v),u.nextSibling&&u.nextSibling!==v&&r.set(u.nextSibling,m);return{previousSibling:m,nextSibling:v}},setAttributeMutation(u,y){let m=o.get(u)||new Set;m.add(y),o.set(u,m)},isAttributeMutated(u,y){var m;return!!(!((m=o.get(u))===null||m===void 0)&&m.has(y))},setLatestNodeMutation(u,y){h.set(u,y)},isLatestNodeMutation(u,y){return h.get(u)===y},markAsFutureAddedNode(u){h.has(u)||p.add(u)},isTextMutated(u){return c.has(u)},setTextMutated(u){return c.add(u)}}}function aS(s,n){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];n.markAsFutureAddedNode(e),n.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];n.setLatestNodeMutation(e,s)}}function cS(s){let n=oS(),t=[];for(let e of s)e.type==="childList"&&aS(e,n);for(let e of s)switch(e.type){case"attributes":hS(e,n,t);break;case"characterData":lS(e,n,t);break;case"childList":pS(e,n,t);break}return t}function lS(s,n,t=[]){let e=s.target;return lt.isConnected(e)&&!n.isTextMutated(e)&&!n.isAddedNode(e)&&!dS(e,"characterData")&&(n.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function hS(s,n,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return lt.isConnected(e)&&!n.isAttributeMutated(e,i)&&!n.isAddedNode(e)&&(n.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var uS=30;function dS(s,n,t){let e=csSymbol.for(t?`${n}:${t}`:n),i=I.now(),r=s[e];return r&&i<r?!0:(s[e]=i+uS,!1)}function pS(s,n,t=[]){let e=lt.isConnected(s.target),i=!e&&n.isRemovedNode(s.target),r=e&&n.isAddedNode(s.target),o=n.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,p=()=>{if(h){let{childListType:m,movedNodes:v,...N}=h;csArray.prototype.push.call(t,m==="added"?N:{...N,movedNodes:v}),h=null}},u=m=>m===(h==null?void 0:h.childListType)?h:(p(),{childListType:m,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let m=0;m<s.addedNodes.length;m++){let v=s.addedNodes[m];n.isLatestNodeMutation(v,s)?(n.isMovedNode(v)?(h=u("moved"),csArray.prototype.push.call(h.movedNodes,v)):(n.markAsAddedNode(v),r||(h=u("added"),csArray.prototype.push.call(h.addedNodes,v))),l=v):lt.isConnected(v)?n.isMovedNode(v)||n.markAsPendingInsert(v):n.markAsUselessNode(v)}p()}let y=Hi(s.removedNodes,m=>{if(lt.isConnected(m)){if(!i&&!n.isPendingInsert(m)){if(n.isDetachedMove(m))return!0;n.markAsMovedNode(m),n.isMovedNodeIntoAddedNode(m)&&(m[rS]=!0)}return!1}return n.isUselessNode(m)?!1:(n.markAsRemovedNode(m),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var fS=(()=>{class s{constructor(t){this.A=t,this.lh=!1,this.yb=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>qt(()=>t(e)),this.Vf=new ua(e=>qt(async()=>{await El(),this.yb(e)})),"adoptedStyleSheets"in Document.prototype&&(this.jf=new iS(t))}observe(){var t;this.lh=!1,this.D=new se(e=>this.Eb(e),(e,i)=>{i==="added"&&this.Sb(e)}),this.D.observe(),this.Vf.observe(),(t=this.jf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.D)===null||t===void 0||t.disconnect(),this.Vf.disconnect(),(e=this.jf)===null||e===void 0||e.disconnect(),this.lh=!0}Eb(t){if(this.lh)return;let e=nS(t);for(let i=0;i<e.length;i++){let r=e[i];if(!r){nt.error("processRawMutations: empty record");continue}switch(r.type){case"attributes":this.processAttributeChanged(r);break;case"characterData":this.processCharacterDataChanged(r);break;case"childList":this.processChildListChanged(r);break;default:nt.error(`processRawMutations: unknown record type '${r.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:lt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,r;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:ms(t.addedNodes)};this.A(o)}if(!((r=t.removedNodes)===null||r===void 0)&&r.length){let o={type:"nodesRemoved",target:t.target,nodes:Se(t.removedNodes,c=>c)};this.A(o)}}Sb(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return it([O()],s.prototype,"processAttributeChanged",null),it([O()],s.prototype,"processCharacterDataChanged",null),it([O()],s.prototype,"processChildListChanged",null),s})(),fr=(()=>{class s{constructor(t){this.type="asyncEvent",this.hh=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.hh)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Ws=t,this.hh=!0,this.A&&this.A(this.Ws)}complete(t){this.hh&&t(this.Ws),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),gS=hh(),Jh=(()=>{class s extends pe{constructor(){super(...arguments),this.ba=!1}onStart(){this.ba=!0,this.A=sS(this.vb,this),this.z=new fS(this.A),this.z.observe();let t=_t.mutations.initialDOM.asyncMeasure(),e=()=>{this.ba=!1,iy(),t()};this.produceEvent(new fr(i=>gS(document,r=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:r})})))}onStop(){var t,e;this.ba=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.z)===null||e===void 0||e.disconnect()}qt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=ct(e.target),i.targetProps=Z.getProperties(e.target)),[e,i]}vb(t){if(!this.wb(t))switch(t.type){case"attributeChanged":{let[e,i]=this.qt(t.type,t);i.attribute=e.attribute,i.isSvg=pi(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=Pi(e.target),i.linkRel=Al(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?Pi(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.qt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?Pi(e.target.parentElement):null,i.parentProps=e.target.parentElement?Z.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.qt(t.type,t);i.targetLocalName=ft(e.target)?Pi(e.target):null,i.nextSibling=e.nextSibling?ct(e.nextSibling):null,i.previousSibling=e.previousSibling?ct(e.previousSibling):null,_t.mutations.serializedMutations.measure(()=>{i.nodes=Se(e.nodes,vo)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.qt(t.type,t);i.previousSibling=e.previousSibling?ct(e.previousSibling):null,i.nextSibling=e.nextSibling?ct(e.nextSibling):null,i.nodesIds=Se(e.nodes,ct),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.qt(t.type,t);i.nodesIds=Se(e.nodes,ct),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.qt(t.type,t);i.shadowRoot=ki(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.qt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.qt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.qt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.qt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.qt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}Aa(t){return this.ba&&!Z.getProperty(t,Mi)}wb(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.Aa(t.target)||L.isMaskedElement(t.target)||L.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.Aa(e)||L.isMaskedElement(e)||L.isMaskedElementChild(e))}case"attributeChanged":return this.Aa(t.target)||L.isMaskedElementChild(t.target)||L.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.Aa(t.target)||L.isMaskedElementChild(t.target);default:return!1}}}return s})(),Ei=(()=>{let s;return function(n){function t(e){return e.type==="DomEvent"}n.isDOMEvent=t}(s||(s={})),s})(),ys=(()=>{class s{constructor(){this.ae=[]}start(){}stop(){this.ae.length=0,this.ae=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.ae;csSetTimeout(()=>{let r=gs("Processor:processEvent",o=>this.processEvent(o))(t);r!=null&&csArray.prototype.forEach.call(e,o=>o(r)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.ae,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.ae,t),()=>{this.ae=csArray.prototype.filter.call(this.ae,e=>e!==t)}}emitEvent(t){qt(()=>csArray.prototype.forEach.call(this.ae,e=>e(t)))}}return s.pendingEvents=0,s})(),Qh=(()=>{class s extends ys{isListening(t){return Ei.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let r of i){if(r instanceof Js){let c=L.getMaskedAttributeDetails(r);r.attributes=this.$o(r,c)}if(L.getMaskedElementDetails(r).state===L.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==r);continue}Z.traverse(r,c=>{if(c instanceof Js){let l=L.getMaskedAttributeDetails(c);c.attributes=this.$o(c,l);let h=L.getMaskedElementDetails(c);h.state===L.MaskedElementState.Parent&&(this.Jc(c,h),e++)}})}return e>0&&q.counters.sensitiveElements.count("masked-elements",e),t}$o(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Jc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),Js.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return ue([Ot("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),mS=(()=>{class s{constructor(t){this.A=t,this.Cs=new en,this._b=e=>{qt(()=>{for(let i of e)i.type==="childList"&&W(i.addedNodes,r=>{Ut(r,NodeFilter.SHOW_TEXT).visitAll(c=>{this.Cs.has(c)||(this.Cs.add(c),this.A(c))})})})},this.xr=new se(this._b)}observe(){this.xr.observe(),Ut(document,NodeFilter.SHOW_TEXT).visitAll(e=>{this.Cs.add(e),this.A(e)})}disconnect(){this.Cs.clear(),this.xr.disconnect()}}return s})(),Zh=(()=>{class s extends pe{constructor(){super(),this.si=new Set,this.uh=new Set,this.ph=new Set,this.Je=!1,this.It=new fs,this.Hf=new mS(t=>{let e=lt.getParentElement(t);!e||!e.isConnected||L.isMaskedElement(e)||L.isMaskedElementChild(e)||le.shouldEncrypt(e)||Te.isEditableNode(e)||Xi(e)||Qi(e)||Ji(e)||Hn(t.data)||(this.si.add(e),this.watchElements())})}onStart(){fs.isSupported()&&(this.It.start((t,e)=>this.onVisibilityChanged(t,e)),this.Hf.observe())}onStop(){fs.isSupported()&&(this.It.stop(),this.Hf.disconnect(),this.si.clear(),this.uh.clear(),this.ph.clear())}setAnonymization(t){this.Je=t}watchElements(){if(!this.isStarted)return;let t=this.si;this.si=new Set;for(let e of De(t))!e.isConnected||this.uh.has(e)||(this.uh.add(e),ji(csNodechildNodes.apply(e),i=>i.nodeType===3)&&this.It.observe(e))}onVisibilityChanged(t,e){e!==ti.VisibleInViewPort||this.Je&&!Ee.isWhitelistedElement(t)||W(csNodechildNodes.apply(t),i=>{if(i.nodeType!==3)return;let r=i.data;this.ph.has(r)||(this.ph.add(r),this.produceEvent({type:"TextVisibility",text:r,state:e}))})}}return ue([O(),Vs({wait:50,mode:"trailing"})],s.prototype,"watchElements",null),ue([O()],s.prototype,"onVisibilityChanged",null),s})(),Bc=(()=>{let s;return function(n){function t(e){return e.type==="TextVisibility"}n.isTextVisibilityEvent=t}(s||(s={})),s})(),tu=(()=>{class s extends ys{constructor(t,e,i,r=null,o=!1){super(),this.M=i,this.Go=r,this.captureAnonymizedPlaceholders=o,this.Ta=new hy(t,e,i,r,o)}setAnonymization(t){this.Ta.setAnonymization(t)}isListening(t){return Bc.isTextVisibilityEvent(t)||Ei.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(Bc.isTextVisibilityEvent(t))return t.text=this.M.checkAndAnonymizePII(t.text,this.Go),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.fh(t);break;case"attributeChanged":this.bb(t);break;case"characterDataChanged":this.Ab(t);break}return t}fh(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let r of e)this.Ta.sanitize(r,i)}bb(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Ta.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}Ab(t){t.newValue=this.Ta.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return ue([Ot("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),eu=(()=>{class s extends ys{constructor(t){super(),this.Tb=t,this.Bf=new Set}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Ei.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){var e;if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.Rb(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.fh(t);break;case"characterDataChanged":if(!((e=t.targetProps)===null||e===void 0)&&e[le.ENCRYPTED_NODE_PROP])return this.gh(t.timestamp,t.target,t.newValue,t),null}return t}Cb(t,e){var i;return this.Bf.has(e)||((i=t.metadata)===null||i===void 0?void 0:i[le.ENCRYPTED_NODE_PROP])&&t.type===$e.TEXT_NODE&&typeof t.data=="string"}Rb(t){let e=0,i=t.type==="DOM_PATCH"?t.diff:t.state;for(let[r,o]of Object.entries(i)){let c=+r;this.Cb(o,c)&&(this.Bf.add(c),this.gh(t.timestamp,c,o.data),o.data=Ps(o.data),e++)}return e>0&&q.counters.sensitiveElements.count("encrypted-text-elements",e),t}fh(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let r of i)Z.traverse(r,(o,c)=>{if(le.shouldEncrypt(o)&&(o.nodeType===$e.TEXT_NODE||o.nodeType===$e.COMMENT_NODE)){let l=o;this.gh(t.timestamp,o.csId,l.data),l.data=Ps(l.data),e++}});e>0&&q.counters.sensitiveElements.count("encrypted-text-elements",e)}gh(t,e,i,r){if(!(i!=null&&i.length))return;let o=new fr(async c=>{let l=await yt.asymmetricEncrypt(i);if(l)c({timestamp:t,type:"encryptedCharacterDataChanged",target:e,rawData:Ps(i),encryptedData:l,encryptionMetadata:this.Tb});else if(r)r.newValue=Ps(r.newValue),c(r);else{let h={type:"warning",message:`Failed to encrypt data of length ${i.length}`,timestamp:t};c(h)}});this.emitEvent(o)}}return s})();function da(s){let n=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=yS(n);return e?(di(t,",")||(e=ES(e)),[Fc(t),...da(e)]):[Fc(t)]}function yS(s){return csString.prototype.split.call(s,/\s(.+)/)}function Fc(s){return csString.prototype.split.call(s,/,$/)[0]}function ES(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var SS=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function vS(s,n){return csString.prototype.replace.call(s,SS,(...e)=>{let i=e[3]||e[4],r=e[9]||e[10]||e[11],o=_S((i||r).trim()),c=i?"@import ":"",l=n(o)||o;return`${c}url(${wS(l)})`})}function wS(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function xi(s){let n=new Set;return vS(s,t=>{var e,i;return n.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),De(n)}function _S(s){let n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,n,(t,e,i,r)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(r)return r;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var $c=(()=>{class s{static async toStaticResourceEvent(t,e,i){let r=await s.Ib(t);if(!r)return null;let o=await s.Ff(r),c=ee(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:r}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,r){let o=await s.Pb(t,r),c=Pe(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(p=>{p&&csArray.prototype.push.call(h.nestedResources,{hash:p.hash,data:p.data})})),h}static async Ff(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.$f,e);return Bn(i)}static async Ib(t){let e;if(!ee(t))e=await(await window.fetch(t)).blob();else{let i=Ga(t);if(!i)return null;e=i}return e}static async Pb(t,e){let i=new Map,r=Pe(t),c=[{resourceRawPath:t,resourceAbsolutePath:r}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!ee(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let m=await fetch(l.resourceAbsolutePath);l.data=await m.text()}l.nestedResources||(l.nestedResources=xi(l.data));let u=!1,y=!1;for(let m of l.nestedResources){let v=ee(m)?m:l.resourceAbsolutePath?Hl(m,l.resourceAbsolutePath):Pe(m),N=i.get(v);if(N!==void 0){if(N!==null){let w=s.Ob(N,m);l.data=Y.stringReplaceAll(l.data,m,w)}continue}Re(c,w=>w.resourceAbsolutePath===v)!==void 0||(u=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:m,resourceAbsolutePath:v}))}if(!u){let m=await s.Nb(l.data);i.set(l.resourceAbsolutePath,{hash:m.hash,data:m.data})}}else{let u;if(!ee(l.resourceAbsolutePath))u=await(await fetch(l.resourceAbsolutePath)).blob();else{let m=Ga(l.resourceAbsolutePath);if(!m){i.set(l.resourceAbsolutePath,null);continue}u=m}let y=await s.Ff(u);i.set(l.resourceAbsolutePath,{hash:y,data:u})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static Ob(t,e){let i=`cs://resources/${t.hash}`;return ee(e)||(i+=`?${s.mh}=${e}`),i}static async Nb(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),r=await crypto.subtle.digest(s.$f,i);return{data:e,hash:Bn(r)}}}return s.$f="SHA-256",s.mh="original-resource-name",s})(),li=(()=>{class s extends ys{constructor(){super(),this.Ra="cssrm://",this.we=0,this.Is=!1}isListening(t){return!s.isSupported()||!Ei.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Mb(t);break;case"attributeChanged":this.kb(t);break;case"characterDataChanged":this.Db(t);break}return t}disableOnlineAssets(){this.Is=!1}enableOnlineAssets(){this.Is=!0}isOnlineAssetsActivated(){return this.Is}Mb(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)Z.traverse(i,(r,o)=>{if(r.nodeType===$e.TEXT_NODE&&o){this.xb(r,o.localName);return}if(!Js.isElement(r))return;let c=Re(r.attributes,l=>l.name==="style");if(c&&(c.value=this.Ca(c.value)),this.Lb(r)||this.Ub(r,o)){let l=Re(r.attributes,p=>p.name==="src");l&&l.value&&(l.value=this.Gf(l.value));let h=Re(r.attributes,p=>p.name==="srcset");if(h){h.value=this.zf(h.value);return}}if(this.Vb(r)&&this.Is){let l=Re(r.attributes,h=>h.name==="href");if(!l||!l.value)return;this.we++,this.Cn(Pe(l.value),this.we,!0),this.jb(r,l,this.we)}})}jb(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.Ra+i}xb(t,e){if(!t||e!=="style")return;let i=this.Ca(t.data);i!==null&&(t.data=i)}Db(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.Ca(t.newValue);e!==null&&(t.newValue=e)}kb(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.Ca(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.Gf(t.newValue)),i&&(t.newValue=this.zf(t.newValue)))}Gf(t){return ee(t)||this.Is?(this.we++,this.Cn(t,this.we,!1,I.now()),this.Ra+this.we):t}zf(t){if(!this.Is)return t;let e=t,i=da(t),r=I.now();for(let o of i)this.we++,this.Cn(Pe(o),this.we,!1,r),e=csString.prototype.replace.call(e,o,this.Ra+this.we);return e}Ca(t){let e=xi(t),i=t,r=I.now();for(let o of e){let c=ee(o);if(!(c||this.Is)||this.Hb(o))continue;this.we++,i=csString.prototype.replace.call(i,o,this.Ra+this.we);let l=Wn(o);c?this.Cn(o,this.we,!1,r):this.Is&&(l?this.Cn(o,this.we,!0,r):this.Cn(Pe(o),this.we,!1,r))}return i}Cn(t,e,i,r=I.now()){let o=i?$c.toCSSStaticResourceEvent:$c.toStaticResourceEvent,c=new fr(async l=>{try{let h=await o(t,e,r,this.Is);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}});this.emitEvent(c)}Lb(t){return t.localName==="img"}Ub(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}Vb(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return ml()&&Ho()&&!!csArray.from}Hb(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return ue([Ot("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),su=(()=>{class s extends ys{constructor(t){super(),this.J=t}isListening(t){return Ei.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.J.anonymizeUrl(t.initialDOM.baseURI)),t}}return ue([Ot("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Wr="textarea",iu=(()=>{class s extends ys{isListening(t){return Ei.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.Bb(t);break;case"nodesAdded":this.Fb(t);break;case"characterDataChanged":this.$b(t);break}return t}Bb(t){Z.traverse(t.initialDOM,(e,i)=>{(this.qf(e,i)||this.Wf(e))&&(e.data=this.yh(e.data))})}Fb(t){for(let e of t.nodes)Z.traverse(e,(i,r)=>{(this.Gb(i,r,t)||this.Wf(i))&&(i.data=this.yh(i.data))})}$b(t){var e;(t.parentLocalName===Wr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.yh(t.newValue))}yh(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}Gb(t,e,i){return this.zb(t,i)||this.qf(t,e)}zb(t,e){return t.nodeType===3&&e.targetLocalName===Wr}qf(t,e){return t.nodeType===3&&J(e)&&e.localName===Wr}Wf(t){return t.nodeType===3&&Te.isEditableNode(t)}}return ue([Ot("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),bS=(()=>{class s{constructor(t){this.A=t,this.Gt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){Et(this.Gt),this.Eh()}Eh(){this.resizeListener()}disconnect(){St(this.Gt)}resizeListener(){let t={width:bt.windowWidth(),height:bt.windowHeight()};this.A(t)}}return it([O("resize")],s.prototype,"resizeListener",null),s})(),ls=(()=>{let s;return function(n){n.PORTRAIT="Portrait",n.LANDSCAPE="Landscape"}(s||(s={})),s})(),Pn=(()=>{let s;return function(n){n.PORTRAIT_PRIMARY="portrait-primary",n.PORTRAIT_SECONDARY="portrait-secondary",n.LANDSCAPE_PRIMARY="landscape-primary",n.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),On=(()=>{let s;return function(n){n[n.PORTRAIT=0]="PORTRAIT",n[n.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",n[n.LANDSCAPE=-90]="LANDSCAPE",n[n.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),AS=(()=>{let s;return function(n){let t=null;n.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=st.screen)===null||c===void 0)&&c.orientation)},n.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in st;function e(){return ls.LANDSCAPE}function i(){var c;switch((c=st.screen.orientation)===null||c===void 0?void 0:c.type){case Pn.PORTRAIT_PRIMARY:case Pn.PORTRAIT_SECONDARY:return ls.PORTRAIT;case Pn.LANDSCAPE_PRIMARY:case Pn.LANDSCAPE_SECONDARY:return ls.LANDSCAPE;default:return ls.PORTRAIT}}function r(){switch(window.orientation){case On.PORTRAIT:case On.PORTRAIT_REVERSE:return ls.PORTRAIT;case On.LANDSCAPE:case On.LANDSCAPE_REVERSE:return ls.LANDSCAPE;default:return ls.PORTRAIT}}function o(){return n.isScreenOrientationApiSupported()?i():n.isDeprecatedScreenOrientationApiSupported()?r():e()}n.getCurrentOrientation=o}(s||(s={})),s})(),TS=(()=>{class s extends pe{constructor(){super(...arguments),this.Sh=null,this.vh=null,this.Us=new bS(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=AS.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.qb(t);if(e!==this.Sh||i!==this.vh){this.Sh=e,this.vh=i;let r={type:"screenResize",width:e,height:i};this.produceEvent(r)}}qb(t){let e,i,r=bt.screenWidth(),o=bt.screenHeight();return t===ls.PORTRAIT?(e=r,i=o):(e=Math.max(r,o),i=Math.min(r,o)),{screenWidth:e,screenHeight:i}}onStart(){this.Us.observe()}onStop(){this.Sh=null,this.vh=null,this.Us.disconnect()}}return s})();function RS(s){let n=csEventtarget.apply(s);return n&&ft(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}var CS=(()=>{class s extends pe{constructor(){super(),this.Yf=t=>{let e=RS(t);e&&this._h(e,t.type)},this.ue=new fi((t,e)=>{switch(e){case"initial":case"added":this.Xf(t);break;case"removed":this.Kf(t);break}}),this.B=new de((t,e)=>{(e==="initial"||e==="added")&&this.Wb(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&lt.isConnected(t)&&!L.isMaskedElement(t)&&!L.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Xf(document),this.ue.observe(),this.B.observe("video")}onStop(){this.Kf(document),this.ue.disconnect(),this.B.disconnect()}_h(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let r=ct(t),o={type:"VideoEvent",videoEventType:i,nodeId:r};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),Bo(()=>this.produceEvent(o))}}Wb(t){for(let e of t)this._h(e,"seeked"),s.isPlaying(e)&&this._h(e,"play")}Xf(t){for(let e of["play","pause","seeked"])Et({type:e,listener:this.Yf,boundElement:t})}Kf(t){for(let e of["play","pause","seeked"])St({type:e,listener:this.Yf,boundElement:t})}}return s})();function IS(s){return s.nodeName==="SELECT"}function pa(s){return s.nodeName==="INPUT"}function PS(s){return s.nodeName==="TEXTAREA"||pa(s)&&!nu(s)&&!ru(s)}function nu(s){return pa(s)&&s.type==="number"}function ru(s){return pa(s)&&(s.type==="checkbox"||s.type==="radio")}var ou=(()=>{class s extends pe{constructor(t){super(),this.ot=t,this.bh=new rm("low"),this.In=e=>this.inputHandler(e),this.Ii=[],this.Yb(),this.Xb(),this.B=new de(e=>{for(let i of e)this.Ah(i)&&qt(()=>{this.Th(i,ct(i))},"low")}),this.ue=new fi((e,i)=>{switch(i){case"initial":case"added":Et({type:"change",listener:this.In,boundElement:e});break;case"removed":St({type:"change",boundElement:e,listener:this.In});break}})}onStart(){Et({type:"keyup",boundElement:document,listener:this.In}),Et({type:"change",boundElement:document,listener:this.In}),W(this.Ii,t=>t.activate()),this.B.observe(csArray.prototype.join.call(s.Kb,",")),this.ue.observe()}onStop(){St({type:"keyup",boundElement:document,listener:this.In}),St({type:"change",boundElement:document,listener:this.In}),W(this.Ii,t=>t.deactivate()),this.B.disconnect(),this.ue.disconnect(),this.bh.clear()}Th(t,e){var i,r,o;if(this.bh.has(t))return;if(this.bh.add(t),IS(t)){let h={type:"InputEvent",inputType:"select",target:ct(t),selectedIndex:t.selectedIndex,timestamp:I.now()};this.produceEvent(h);return}if(ru(t)){let h={type:"InputEvent",inputType:"checkable",target:ct(t),checked:t.checked,timestamp:I.now()};this.produceEvent(h);return}let c=PS(t),l=nu(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((r=this.ot)===null||r===void 0)&&r.shouldEncrypt(t)){(o=this.ot)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:I.now()});return}let p=l?"0":"\u2022",u={type:"InputEvent",inputType:"text",target:ct(t),value:csString.prototype.replace.call(h,/\S/g,p),timestamp:I.now()};this.produceEvent(u)}}inputHandler(t){if(!this.isStarted)return;let e=Mt(t),i=ct(e);!i||!this.Ah(e)||lt.isConnected(e)&&qt(()=>{this.Th(e,i)},"low")}Yb(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}Xb(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let r=Jn(t.prototype,e,(o,c,l)=>{if(l!==c&&lt.isConnected(o)){let h=i?o.parentElement:o;this.Jb(h)}});r&&csArray.prototype.push.call(this.Ii,r)}Ah(t){return!L.isMaskedElement(t)&&!L.isMaskedElementChild(t)&&(Ki(t)||qo(t)||Ji(t))}Jb(t){if(this.isStarted&&lt.isConnected(t)){let e=ct(t);e&&this.Ah(t)&&qt(()=>{this.Th(t,e)},"low")}}}return s.Kb=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],ue([mt()],s.prototype,"inputHandler",null),ue([O()],s.prototype,"trackChanges",null),s})();var OS=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.ii=[],this.nt=[],this.Qb=t}next(t){this.nt.length===this.Qb&&csArray.prototype.shift.call(this.nt),csArray.prototype.push.call(this.nt,t),this.nt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.ii)e(t)}subscribe(t){if(Re(this.ii,i=>t===i))return()=>{this.ii=csArray.prototype.filter.call(this.ii,i=>i!==t)};csArray.prototype.push.call(this.ii,t);for(let i of this.nt)t(i);return()=>{this.ii=csArray.prototype.filter.call(this.ii,i=>i!==t)}}clear(){this.nt=[]}hasObservers(){return this.ii.length>0}}return s})(),au=(()=>{var s;class n{constructor(e){this.A=e}observe(){this.Zb=s.Lr.subscribe(e=>this.A(e)),s.Ia||(s.Ia=!0,s.xr.observe(),Ut(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Cs.add(i),s.Lr.next(i)}))}disconnect(){s.Ia&&(this.Zb(),s.Lr.hasObservers()||(s.Ia=!1,s.xr.disconnect(),s.Lr.clear(),s.Cs.clear()))}}return s=n,n.Cs=new en,n.Lr=new OS,n.tA=xs(t=>{qt(()=>{for(let e of t)e.type==="childList"&&W(e.addedNodes,i=>{Ut(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Cs.has(o)||(s.Cs.add(o),s.Lr.next(o))})})})},"ElementObserver.findAllElements"),n.Ia=!1,n.xr=new se(s.tA),it([O()],n.prototype,"observe",null),it([O()],n.prototype,"disconnect",null),n})(),cu=(()=>{class s extends pe{constructor(){super(),this.bs=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.eA=gs("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)L.isMaskedElement(i)||L.isMaskedElementChild(i)||bf(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=cr(this.eA);this.Ur=new au(e=>t.push(e)),this.si=new Set}onStart(){this.bs&&this.Ur.observe()}onStop(){this.si.clear(),this.Ur.disconnect()}async register(t){this.si.has(t)||(this.si.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return ue([O()],s.prototype,"register",null),s})(),Gc=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Jf(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.sA(t))}static sA(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Vi=i,s.Pn(i))}static Jn(t){this.iA(t),this.Vi&&t(this.Vi),this.Ve||this.nA()}static iA(t){this.Mt.add(t)}static rA(t){this.Mt.delete(t)}static nA(){if(this.Vr||(this.Vr=this.Jf()),!this.Vr){this.Vi||(this.Vi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Pn(this.Vi);return}this.Vr.observe({type:"navigation",buffered:!0}),this.Ve=!0}static Pn(t){this.Mt.forEach(e=>e(t))}static Zn(t){this.rA(t),this.Mt.size===0&&this.jr()}static jr(){var t;this.Ve&&((t=this.Vr)===null||t===void 0||t.disconnect(),this.Ve=!1,this.Vi=null,this.Vr=this.Jf())}constructor(t){this.A=t}observe(){s.Jn(this.A)}disconnect(){s.Zn(this.A)}}return s.Ve=!1,s.Mt=new Set,s.Vi=null,s})(),lu=(()=>{class s extends pe{constructor(){super(...arguments),this.Pa=null,this.Qf=new Gc(t=>{if(this.Pa)return;let e=this.oA(t);e&&(this.Pa=e,this.produceEvent(e))})}onStart(){if(this.Pa){this.produceEvent(this.Pa);return}this.Qf.observe()}onStop(){this.Qf.disconnect()}oA(t){let e=Gc.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:I.now()}}}return s})(),NS="touchstart",MS="touchmove",kS="touchend",hu=(()=>{class s{constructor(t){this.A=t}observe(){s.Zf&&s.Rh(this.A)}disconnect(){s.Zf&&s.Ch(this.A)}static aA(t,e){csArray.prototype.forEach.call(De(s.Mt),i=>i(t,e))}static Rh(t){s.Mt.has(t)||(s.Mt.add(t),s.Mt.size===1&&(s.Hr.onGesture(s.aA),csArray.prototype.forEach.call(s.Hs,e=>Et(e))))}static Ch(t){s.Mt.delete(t),s.Mt.size===0&&csArray.prototype.forEach.call(s.Hs,e=>St(e))}static Ih(t){if(s.Hr.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Hr.processActionDown(t);break;case"touchmove":s.Hr.processActionMove();break;case"touchend":s.Hr.processActionUp(t);break}}}return s.Hs=[{boundElement:st.document,type:NS,listener:n=>s.Ih(n)},{boundElement:st.document,type:MS,listener:n=>s.Ih(n)},{boundElement:st.document,type:kS,listener:n=>s.Ih(n)}],s.Zf=Eo.isGestureDetectionSupported(),s.Mt=new Set,s.Hr=new Eo,s})(),uu=(()=>{class s extends pe{constructor(){super(),this.Br=new hu(this.$c.bind(this))}onStart(){this.Br.observe()}onStop(){this.Br.disconnect()}$c(t){let e=this.cA(t);e&&this.produceEvent(e)}cA(t){return this.lA(t)?{type:"Gesture",targetId:ct(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}lA(t){return t.target!==null&&!(ft(t.target)&&L.isMaskedElementChild(t.target))}}return s})(),DS=(()=>{class s extends pe{constructor(){super(...arguments),this.tg=new jh(t=>this.Oa(t))}Oa({message:t,filename:e,lineno:i,colno:r}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||ee(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:r})}onStart(){this.tg.observe()}onStop(){this.tg.disconnect()}}return s})(),xS=(()=>{class s extends ys{constructor(t){super(),this.hA=t,this.jl=1024,this.Hl=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=Y.truncate(t.message,this.jl,Y.ELLIPSIS),t.filename=Y.truncate(t.filename,this.Hl,Y.ELLIPSIS),this.hA(t)}}return s})(),LS=(()=>{class s extends pe{constructor(t){super(),this.At=t,this.eg=new xh(e=>{this.uA(e)},{levels:this.At.consoleMessageLevels})}uA(t){let e=this.Dl(t.logs);if(e.length===0||!this.xl(t.origin,this.At.validHostnames))return;let i=ms(e),r=i[0],o=csArray.prototype.slice.call(i,1);this.produceEvent({type:"CustomError",message:Lh(r,...o),attributes:{csLogLevel:t.level}})}Dl(t){for(let e=0;e<t.length;e++)if($t(t[e]))return[];return t}xl(t,e){if(t===void 0||t==="")return!1;let i=rr(t);return!!tn(i,e)}onStart(){this.eg.observe()}onStop(){this.eg.disconnect()}}return s})(),US=(()=>{class s extends ys{constructor(t){super(),this.dA=t,this.pA=300}isListening(t){return t.type==="CustomError"}processEvent(t){return t.message=Y.truncate(t.message,this.pA,Y.ELLIPSIS),this.dA(t)}}return ue([Ot("CustomErrorProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Xs=[],Po=!1,du=xs(jS,"executeTasks");function VS(s){if(csArray.prototype.push.call(Xs,s),!Po){for(let n=0;n<3;n++)csSetTimeout(du);Po=!0}}function jS(){let s=csDate.now();for(let n=0;n<Xs.length;n++)if(Xs[n](),csDate.now()-s>=35){Xs=csArray.prototype.slice.call(Xs,n+1),csSetTimeout(du);return}Xs=[],Po=!1}var os=(()=>{let s;return function(n){n[n.Started=0]="Started",n[n.Stopped=1]="Stopped",n[n.Processing=2]="Processing",n[n.Completed=3]="Completed"}(s||(s={})),s})(),pu=(()=>{class s{constructor(){this.kt=new Wi,this.Pt=os.Stopped,this.A=null,this.sg=t=>{this.Pt===os.Stopped||!t||(this.A(t),this.ig())}}get queueLength(){return this.kt.length}start(t){if(this.A)throw new Error("callback already set");this.Pt=os.Started,this.A=t}push(t){this.kt.push(t),this.Ph()}stop(){this.A=null,this.Pt=os.Stopped,this.kt.clear()}static pipe(t,e){let i=t,r=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(r,l),W(i,h=>h.subscribe(p=>l.push(p))),i=[c]}let o=new HS(r);return W(i,c=>c.subscribe(l=>o.push(l))),o}ng(){return this.Pt===os.Stopped}as(){return this.Pt===os.Processing}ig(){if(!this.ng()){if(this.kt.isEmpty){this.Pt=os.Completed;return}this.Pt=os.Processing,VS(()=>{let t=this.kt.pop();t instanceof fr?t.complete(this.sg):this.sg(t)})}}Ph(){this.ng()||this.as()||this.ig()}}return s})(),HS=(()=>{class s extends pu{constructor(t){super(),this.rg=t}get queueLength(){return csArray.prototype.reduce.call(this.rg,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),W(this.rg,t=>t.stop())}}return s})(),fu=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.G=!1,this.Mt=[]}get pendingEvents(){var t,e;return(e=(t=this.kt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.G)throw new Error("Recording is already started.");let t=this.Mt;this.kt=pu.pipe(this.producers,this.processors),this.kt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),W(this.producers,e=>e.start()),W(this.processors,e=>e.start()),this.G=!0}stop(){this.kt.stop(),this.Mt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.G=!1,this.Mt=[]}subscribe(t){if(this.G)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Mt,t),()=>this.Mt=csArray.prototype.filter.call(this.Mt,e=>e!==t)}}return s})(),BS=(()=>{class s{constructor(t){this.Na={},this.De=new ha(t)}save({key:t,metadata:e,events:i}){this.De.isThresholdReached()||(this.De.addString(t),typeof i=="string"?this.De.addString(i):this.De.addArrayBuffer(i),!this.De.isThresholdReached()&&(this.Na[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.fA(),i=>{let r=this.Na[i];r!==void 0&&(delete r.metadata.datatype,csArray.prototype.push.call(e,r),this.gA(i))}),e.length!==0&&(t(e),this.De.reset())}fA(){return Object.keys(this.Na)}gA(t){delete this.Na[t]}}return s})(),as=(()=>{let s;return function(n){n[n.NOT_STARTED=0]="NOT_STARTED",n[n.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",n[n.OPEN_FAILED=2]="OPEN_FAILED",n[n.READY=3]="READY"}(s||(s={})),s})(),FS=(()=>{class s{constructor(t,e,i){this.hn=t,this.mA=i,this.ji=as.NOT_STARTED,this.Ma=[],this.Oh=0,this.yA=self.origin,this.ke=typeof window=="object"?"":"worker-",this.De=new ha(e),this.Gl()}async Gl(){await this.og(),this.ji===as.READY?this.EA():this.mA(this.Ma)}EA(){csArray.prototype.forEach.call(this.Ma,t=>{this.save(t)}),this.Ma=[]}async save(t){try{if(this.ji===as.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Ma,t);return}if(this.ji!==as.READY||this.De.isThresholdReached())return;let{key:e,metadata:i,events:r}=t;if(this.De.addString(e),typeof r=="string"?this.De.addString(r):this.De.addArrayBuffer(r),this.De.isThresholdReached())return;await this.ne.put(`${this.yA}/${e}`,new Response(r,{headers:i}))}catch{}}async recover(t){!this.ne&&(await this.og(),this.ji!==as.READY)||this.SA(t)}async og(){try{this.ji=as.OPEN_IN_PROGRESS,this.ne=await self.caches.open(`${this.ke}${this.hn}`),this.ji=as.READY}catch{this.ji=as.OPEN_FAILED}}async SA(t){try{if(this.Oh++,this.Oh>1)return;let e=await this.ne.keys();if(e.length===0)return;let i=await this.ne.matchAll(),r=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((p,u)=>{l[u]=p}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(p=>({metadata:l,events:p})):c.arrayBuffer().then(p=>({metadata:l,events:p}))}),o=await Promise.all(r);await Promise.all(csArray.prototype.map.call(e,c=>this.ne.delete(c))),t(o),this.De.reset()}catch{}finally{this.Oh--}}}return s})(),$S=(()=>{class s{constructor(t){try{this.vA(t)}catch{this.Nh()}}vA(t){self.caches?this.wA(t):this.Nh()}save(t){this.ka.save(t)}recover(t){this.ka.recover(t)}wA(t){this.ka=new FS(t,s.ag,e=>{this.Nh(e)})}Nh(t){this.ka=new BS(s.ag),t&&csArray.prototype.forEach.call(t,e=>{this.ka.save(e)})}}return s.ag=1024*1024*16,s})(),GS=(()=>{class s{constructor(t,e){this.S=t,this.R=e,this.Fr=ae.ETR_DISABLED,this.Da=ae.ETR_PENDING,this.Mh=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.cg()&&e===ae.ETR_SAVED_SESSION?e:this.Fr}onEventTriggerRecording(t,e){switch(e){case ps.ETR_PAGE:this.lg(ae.ETR_SAVED_PAGE);break;case ps.ETR_LEGACY:case ps.ETR_SESSION:this.lg(ae.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===H.RECORDING_TEMPORARILY?this.Mh=!0:this.Mh=!1,t===H.ANALYTICS_ONLY&&e===Kt.ETR_ON?this.hg(this.Da):this.hg(ae.ETR_DISABLED)}hg(t){this.Fr=t,this.Da=ae.ETR_PENDING,this.ug(t),this.S.emitRecordingContextChange()}lg(t){this.Mh?Number(t)>Number(this.Da)&&(this.Da=t):this.cg()&&Number(t)>Number(this.Fr)&&(this.Fr=t,this.ug(t),this.S.emitRecordingContextChange())}ug(t){let e=this.R.getSession();e!==null&&e.etrStatus===ae.ETR_NOT_SAVED_SESSION&&t===ae.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}cg(){return this.Fr!==ae.ETR_DISABLED}}return s})(),U=(()=>{let s;return function(n){n[n.MUTATION_INSERT=1]="MUTATION_INSERT",n[n.MUTATION_REMOVE=2]="MUTATION_REMOVE",n[n.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",n[n.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",n[n.INITIAL_DOM=5]="INITIAL_DOM",n[n.SCROLL=6]="SCROLL",n[n.CLICK=8]="CLICK",n[n.RESIZE=9]="RESIZE",n[n.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",n[n.INPUT_SELECT=11]="INPUT_SELECT",n[n.INPUT_TEXT=12]="INPUT_TEXT",n[n.HASH_CHANGE=13]="HASH_CHANGE",n[n.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",n[n.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",n[n.MOUSE_OVER=16]="MOUSE_OVER",n[n.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",n[n.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",n[n.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",n[n.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",n[n.ATTACH_SHADOW=22]="ATTACH_SHADOW",n[n.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",n[n.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",n[n.PAGE_EVENT=27]="PAGE_EVENT",n[n.API_ERROR=28]="API_ERROR",n[n.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",n[n.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",n[n.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",n[n.KEY_DOWN=32]="KEY_DOWN",n[n.KEY_UP=33]="KEY_UP",n[n.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",n[n.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",n[n.USER_IDENTIFIER=38]="USER_IDENTIFIER",n[n.TOUCH_START=41]="TOUCH_START",n[n.TOUCH_MOVE=42]="TOUCH_MOVE",n[n.TOUCH_END=43]="TOUCH_END",n[n.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",n[n.POINTER_DOWN=47]="POINTER_DOWN",n[n.POINTER_MOVE=48]="POINTER_MOVE",n[n.POINTER_UP=49]="POINTER_UP",n[n.CUSTOM_ERROR=50]="CUSTOM_ERROR",n[n.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",n[n.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",n[n.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",n[n.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",n[n.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",n[n.SCREEN_RESIZE=65]="SCREEN_RESIZE",n[n.RESOURCE_HASHES=66]="RESOURCE_HASHES",n[n.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",n[n.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",n[n.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",n[n.TEXT_REF=73]="TEXT_REF",n[n.TOUCH_CANCEL=74]="TOUCH_CANCEL",n[n.MUTATION_MOVE=75]="MUTATION_MOVE",n[n.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",n[n.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",n[n.VIDEO_PLAY=78]="VIDEO_PLAY",n[n.VIDEO_PAUSE=79]="VIDEO_PAUSE",n[n.VIDEO_SEEK=80]="VIDEO_SEEK",n[n.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",n[n.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",n[n.DEBUG=999]="DEBUG"}(s||(s={})),s})();var Ii=(()=>{let s;return function(n){n[n.SWIPE=0]="SWIPE",n[n.PINCH_IN=1]="PINCH_IN",n[n.PINCH_OUT=2]="PINCH_OUT",n[n.LONG_PRESS=3]="LONG_PRESS",n[n.TAP=4]="TAP",n[n.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),gu=(()=>{class s{constructor(t=100){this._A=t,this.xa={},this.$r=null,this.mh="original-resource-name"}onEvent(t){this.bA=t}processEvent(t){this.AA(t.resourceId,t.resource.hash,t.originalResourceName),this.TA(t)}flushEvents(){this.$r&&csClearTimeout(this.$r),this.dg()}onSendStaticResource(t){this.TA=t}dg(){if(!Object.keys(this.xa).length)return;let t={type:U.RESOURCE_HASHES,date:I.now(),args:[this.xa]};this.$r=null,this.xa={},this.bA(t)}AA(t,e,i){let r=e;i&&(r+=`?${this.mh}=${i}`),this.xa[t]=r,!this.$r&&(this.$r=window.csSetTimeout(()=>this.dg(),this._A))}}return s})();function zS(s,n,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,r={type:U.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(r);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{n({type:U.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)n({type:U.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{n({type:U.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:r,attribute:o,newValue:c}=s;n({type:U.MUTATION_ATTRIBUTE,date:e,args:[i,r,o,c]});break}case"characterDataChanged":{let{target:i,newValue:r}=s;n({type:U.MUTATION_CHARACTER_DATA,date:e,args:[i,r]});break}case"cssRuleInserted":{let{target:i,rule:r,index:o}=s,c=J(o)?[i,r,o]:[i,r];n({type:U.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:r}=s;n({type:U.STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"cssRuleUpdated":{let{target:i,rule:r,index:o}=s;n({type:U.STYLESHEET_RULE_UPDATE,date:e,args:[i,r,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:r}=s;n({type:U.STYLESHEET_DISABLED,date:e,args:[i,r]});break}case"shadowRootAttached":{let{target:i,shadowRoot:r}=s;n({type:U.ATTACH_SHADOW,date:e,args:[i,r]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:r,disabled:o}=s;n({type:U.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:r,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:r}=s;n({type:U.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:r,index:o}=s,c=J(o)?[i,r,o]:[i,r];n({type:U.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:r}=s;n({type:U.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:r,index:o}=s,c=[i,r,o];n({type:U.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:r}=s,o=[i,r];n({type:U.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:x.error("translateDOMEvent: DOMEvent not supported");break}}function qS(s){let n=WS(s.data);return{type:U.GESTURE_RECOGNITION,args:[s.targetId,n],date:s.timestamp}}function WS(s){let n={type:YS(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(n[t]=e)}return n}function YS(s){switch(s){case It.DRAG:case It.FLICK:return Ii.SWIPE;case It.LONG_PRESS:return Ii.LONG_PRESS;case It.TAP:return Ii.TAP;case It.PINCH_IN:return Ii.PINCH_IN;case It.PINCH_OUT:return Ii.PINCH_OUT}}function XS(s,n){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===n.batchSize){this.flush();return}n.autoFlushDelay&&n.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},n.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var KS=20;function JS(s){return XS(n=>{let t={visibleInViewPort:n},e={type:U.TEXT_VISIBILITY,date:I.now(),args:[t]};s(e)},{batchSize:KS,autoFlushDelay:1e3})}var Yr=(()=>{let s;return function(n){n.REQUEST_START="requestStart",n.DOM_INTERACTIVE="domInteractive",n.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})(),mu={connectEnd:"ce",connectStart:"cs",decodedBodySize:"dbs",domainLookupEnd:"dle",domainLookupStart:"dls",duration:"d",fetchStart:"fs",initiatorType:"it",name:"n",nextHopProtocol:"nhp",redirectEnd:"re",redirectStart:"rs",requestStart:"rqs",responseEnd:"rse",responseStart:"rss",responseStatus:"rst",secureConnectionStart:"scs",startTime:"st",transferSize:"ts"},QS={...mu,domComplete:"dc",domContentLoadedEventEnd:"dclee",domContentLoadedEventStart:"dcles",domInteractive:"di",loadEventEnd:"lee",loadEventStart:"les",type:"t"};function ZS(s){return{type:U.PERFORMANCE_TIMINGS,args:[{performanceTiming:Yr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Yr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Yr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function tv(s){switch(s.inputType){case"text":return{type:U.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:U.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:U.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var ev=500,Xr=0;function sv(){return{processEvent(s,n){if(s.originalEvent.type===U.PERFORMANCE_RESOURCE_TIMING)return Xr>=ev?null:(Xr+=1,n({...s.originalEvent,date:s.timestamp}));n(s.originalEvent)},reset(){Xr=0}}}function iv(s){switch(s.videoEventType){case"play":return{type:U.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:U.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let n=s;return{type:U.VIDEO_SEEK,args:[n.nodeId,n.newTimePositionInSec],date:s.timestamp}}default:return null}}var yu=(()=>{class s{get pendingEvents(){return this.La.pendingEvents}constructor(t,e,i,r,o){this.La=t,this.S=e,this.xe=i,this.ls=r,this.hs=o,this.re=()=>{},this.Ua=()=>{},this.pg=JS(c=>this.re(c))}start(){var t,e;this.fg=sv(),this.La.subscribe(i=>{var r,o,c,l,h,p;let u=i,{timestamp:y}=u;switch(u.type){case"Legacy":{let m=u.eventType==="user"?(r=this.Ua)!==null&&r!==void 0?r:()=>{}:this.re;this.fg.processEvent(u,m)}break;case"CustomElementRegistration":{this.re({type:U.CUSTOM_ELEMENT_REGISTRATION,date:y,args:[u.tagName]});break}case"DomEvent":{zS(u,this.re,this.S);break}case"InputEvent":{let m=tv(u);(o=this.Ua)===null||o===void 0||o.call(this,m);break}case"encryptedCharacterDataChanged":{let{target:m,rawData:v,encryptedData:N,encryptionMetadata:D}=u;this.re({type:U.MUTATION_ENCRYPTED_CHARACTER_DATA,date:y,args:[m,v,N,D]});break}case"StaticResource":{let{url:m}=u;this.re({type:U.STATIC_RESOURCE_URL,date:y,args:[m]});break}case"ResizeMaskedElement":{let{target:m,width:v,height:N}=u;this.re({type:U.MUTATION_ATTRIBUTE,date:y,args:[m,"","style",`width:${v}px !important;height:${N}px !important;`]});break}case"Gesture":{let m=qS(i);(c=this.Ua)===null||c===void 0||c.call(this,m);break}case"TextVisibility":{this.pg.push(u.text);break}case"StaticResourceManagerEvent":{(l=this.xe)===null||l===void 0||l.processEvent(u);break}case"screenResize":{let{width:m,height:v}=u,N={type:U.SCREEN_RESIZE,date:y,args:[m,v]};this.re(N);break}case"viewportResize":{let{width:m,height:v}=u,N={type:U.RESIZE,date:y,args:[m,v]};this.re(N);break}case"PerformanceTiming":{this.re(ZS(u));break}case"CustomError":{let m=(h=this.hs)===null||h===void 0?void 0:h.translate(u);m&&this.re(m);break}case"JSError":{let m=(p=this.ls)===null||p===void 0?void 0:p.translate(u);m&&this.re(m);break}case"VideoEvent":{let m=iv(u);m&&this.re(m);break}case"warning":{x.warn(u.message);break}default:x.error(`WebRecorderEventTranslator: Event not supported (${u.type})`);break}}),this.S.emitInitialDomStart(),(t=this.ls)===null||t===void 0||t.start(),(e=this.hs)===null||e===void 0||e.start(),this.La.start()}stop(){var t,e,i;this.reset(),this.flush(),this.La.stop(),(t=this.xe)===null||t===void 0||t.flushEvents(),(e=this.ls)===null||e===void 0||e.stop(),(i=this.hs)===null||i===void 0||i.stop()}flush(){this.pg.flush()}onEvent(t,e){var i;this.re=t,this.Ua=e,(i=this.xe)===null||i===void 0||i.onEvent(r=>this.re(r))}reset(){this.fg.reset()}}return s})(),nv=(()=>{class s{constructor(){this.vr=20,this.Oi=0,this.U=!1}translate(t){if(this.Oi>=this.vr)return null;this.Oi+=1;let{message:e,attributes:i,timestamp:r}=t;return{type:U.CUSTOM_ERROR,date:r,args:[{errorType:"customError",message:e,attributes:i}]}}start(){this.U||(this.Oi=0,this.U=!0)}stop(){this.U=!1}}return s})(),rv=(()=>{class s{constructor(t){this.Va=t,this.vr=20,this.ki=0,this.U=!1}translate(t){if(this.ki>=this.vr)return this.Va.stop(),null;this.ki+=1;let{filename:e,message:i,lineno:r,colno:o,timestamp:c}=t;return{type:U.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:r,colno:o}]}}start(){this.U||(this.ki=0,this.U=!0)}stop(){this.U=!1}}return s})(),Eu=(()=>{class s extends pe{constructor(t){super(),this.je=t}subscribe(t){return super.subscribe(t)}onStart(){W(this.je,t=>{t.onEvent(e=>{var i;return this.On(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),W(this.je,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){W(this.je,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}On(t,e){this.produceEvent({timestamp:I.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),Bt=(()=>{let s;return function(n){n[n.Active=0]="Active",n[n.Paused=1]="Paused",n[n.Stopped=2]="Stopped"}(s||(s={})),s})(),ov=(()=>{class s{constructor(t,e,i=[]){this.On=t,this.kh=e,this.RA=i,this.ja=null,this.Pt=Bt.Active,this.nt=[]}reset(){this.ja=null,this.nt=[],this.Pt=Bt.Active}disconnect(){this.Pt=Bt.Stopped}CA(){this.kh(Bt.Paused),this.Pt=Bt.Paused,csSetTimeout(()=>{this.Pt===Bt.Paused&&this.Dh()},s.STOP_TIMEOUT)}IA(){this.kh(Bt.Active),this.Pt=Bt.Active,W(this.nt,this.On),this.nt=[]}Dh(){this.nt=[],this.kh(Bt.Stopped),this.Pt=Bt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.ja=t.date,this.Pt!==Bt.Active)){this.IA(),this.On(t);return}if(this.PA(t)){this.On(t);return}switch(this.Pt){case Bt.Active:if(this.OA(t,e)){this.CA(),csArray.prototype.push.call(this.nt,t);return}this.On(t);break;case Bt.Paused:csArray.prototype.push.call(this.nt,t);break;case Bt.Stopped:break}}OA(t,e){return!e.isUserEvent&&this.ja!==null&&t.date-this.ja>s.INACTIVITY_TIMEOUT}PA(t){return csArray.prototype.indexOf.call(this.RA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),av=2e3,cv=(()=>{class s extends ht{constructor(t,e,i,r,o,c,l,h,p,u,y,m,v,N=[],D,w,S,C,k){super(),this.f=t,this.j=e,this.NA=i,this.F=r,this.R=o,this.ge=c,this.ft=l,this.fe=h,this.ot=p,this.W=u,this.Dt=y,this.Ct=m,this.He=v,this.je=N,this.gg=D,this.Wt=w,this.Nn=S,this.ls=C,this.hs=k,this.Xs=0,this.Gs=new ia,this.Mn={allowFromQuotaService:!0,allowFromSerialization:!0},this.mg=lr(()=>{this.j.eventsCount()>0&&this.yg()},av),this.Ps=_=>this.processBrowserEvent(_),this.Gr=_=>this.Nt(_),this.Ha=0,this.zr=0,this.ze=new Sh,this.xh=!1,this.Eg=50*1024,this.Hi=!1,this.qr=!1,this.Ui=[],this.Ba=new ov(_=>this.Q(_),_=>{switch(_){case Bt.Active:this.MA();break;case Bt.Stopped:this.kA();break}},[U.RESOURCE_HASHES,U.TEXT_VISIBILITY,U.API_ERROR,U.JAVASCRIPT_ERROR]),this.Sg=_=>{this.Dt.removeBatchInProgress(`${_.params.sn}.${_.params.pn}.${_.params.ri}`)}}init(){this.Lh(),this.W.onLoad(this.Sg),this.W.onError(this.Sg)}MA(){csArray.prototype.forEach.call(this.gg,t=>t.start())}kA(){csArray.prototype.forEach.call(this.gg,t=>t.stopForInactivity())}Lh(){var t,e,i;this.He.onEvent(this.Ps,this.Gr),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.Gr),(e=this.ot)===null||e===void 0||e.onApiErrorToEncrypt(r=>{this.vg(r)}),(i=this.ot)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Ps),this.ze.onEvent(r=>{if(csSetTimeout(()=>this.Bi("page-state",r)),r!==he.Visible){if(r===he.Blur)return this.wg();if(!this.xh)return this.xh=!0,csSetTimeout(()=>{this.xh=!1}),r===he.Hidden?this.wg():this.DA()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}wg(){if(!this.canSendEvents())return;this.He.flush(),this.Dt.saveBatchesInProgress(),W(this.je,c=>{var l,h;return W((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],p=>this.j.addEvent(p))});let t=this.j.getEvents();if(t.length===0)return;this.Bi("pending-events",this.He.pendingEvents);let e=this.W.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.zr=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.j.getCurrentRequestIndex(),r=i.getCurrentIndex();e.ri=r.toString(),this.Ct.removeQueryParams(),this.Ct.setQueryParams(e);let o=this.j.stringifyEvents();if(o.length>this.Eg){let c=this._g();if(c.length>0){let l=Ns(c);this.Ct.send(l)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.j.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Ct.send(o)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Ct.removeQueryParams(),this.j.clearEvents()}DA(){if(!this.canSendEvents())return;this.He.flush();let t=this.W.getQueryParams();this.Dt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Ct.removeQueryParams(),W(this.je,r=>{var o,c;return W((c=(o=r.getPendingEvents)===null||o===void 0?void 0:o.call(r))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Ct.setQueryParams(t),this.Ct.send(),this.Ct.removeQueryParams();return}this.Bi("pending-events",this.He.pendingEvents),this.zr=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Ct.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.Eg){let r=this._g();if(r.length>0){let o=Ns(r);this.Ct.send(o)||this.Dt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Ct.removeQueryParams(),this.Ct.setQueryParams(t),this.Ct.send(),this.Ct.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.j.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Ct.send(i)||(this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.j.getCurrentRequestIndex().increment());this.Ct.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.Mn.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Mn.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Mn.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Mn.allowFromSerialization=!0}canSendEvents(){return this.Mn.allowFromQuotaService&&this.Mn.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ge&&this.ls){(e=this.ge)===null||e===void 0||e.anonymize(t);let i=this.ls.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:I.now(),type:"JSError"});i&&this.Ps(i)}}onIframeCustomError(t){if(this.hs){let e=this.hs.translate({...t,timestamp:I.now(),type:"CustomError"});e&&this.Ps(e)}}onIframeDetailedApiError(t){this.bg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Nt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.F.isCurrentPageviewValid()&&this.Ba.pushEvent(t,{isUserEvent:!1})}Nt(t){this.F.refreshSession(),this.F.isSessionValid()&&this.Ba.pushEvent(t,{isUserEvent:!0})}Q(t){_t.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.mg(),this.Ag(t)}Ag(t){this.f.emitDebugEvents&&this.Gs.emit("recordingEvent",{...t,typeName:U[t.type]})}onStart(){var t;this.Bi("tag-version","15.138.1"),this.Bi("page-state",document.visibilityState),this.Ba.reset(),this.ze.start(),this.initStates(),this.He.start(),this.ft&&this.fe&&this.ft.subscribe(s.jt,e=>this.bg(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.Gs.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Ui,e=>this.Tg(e)),this.Ui=[],this.Hi&&((t=this.Wt)===null||t===void 0||t.enableOnlineAssets(),this.Hi=!1)}onStop(){var t;this.ze.stop(),this.ft&&this.ft.unsubscribe(s.jt),this.He.stop(),this.Ba.disconnect(),(t=this.Wt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.He.flush(),this.mg.cancel(),this.pushEvents(),this.W.removeQueryParams()}initStates(){this.Ha=I.now(),this.j.getCurrentRequestIndex().reset(),this.Xs=0,this.W.setQueryParams(this.NA.getRequestParameters())}pushEvents(){W(this.je,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.yg():this.j.clearEvents())}yg(){if(!this.canSendEvents())return;let t=this.j.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.zr=i[i.length-1].date;let r=e.metadata.requestIndex,o=r.getCurrentIndex(),c=this.Ha>this.zr?i[0].date:this.Ha;this.W.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.W.getQueryParams();this.Dt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.W.getQueryParams()},i),this.W.send(i),r.increment(),e.batch.clearEvents(),this.Rg&&this.Rg()}this.j.clearEmptyBatchSlots()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Ag(t)}bg(t){if(this.Nn&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Nn.truncate(t),this.ot){this.ot.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.vg(t)}vg(t){if(this.Xs<s.xA){let e={type:U.API_ERROR,date:I.now(),args:[this.fe.anonymize(t)]};this.Ps(e),this.Xs=this.Xs+1,q.counters.networkRequests.count("collected")}}LA(t){t===ps.ETR_SESSION?this.W.setQueryParams({[s.UA]:s.Cg}):t===ps.ETR_PAGE&&this.W.setQueryParams({[s.VA]:s.Cg})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.ls)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:I.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Ps(i)}onCustomErrorEvent(t){var e;let i=(e=this.hs)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:I.now(),message:t.message,attributes:t.attributes});i&&this.Ps(i)}onPageEvent(t){this.Ig(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:I.now(),keyId:this.f.encryptionPublicKeyId};(e=this.ot)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Tg({eventName:t,eventType:e}):csArray.prototype.push.call(this.Ui,{eventName:t,eventType:e})}Tg(t){this.LA(t.eventType),this.Ig(t.eventName),this.pushEvents()}Ig(t){let e={type:U.PAGE_EVENT,date:I.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.jA)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:I.now(),type:U.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:I.now(),type:U.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.Bi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.Bi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.qr=!0}getStaticResourceManagerStatus(){return this.Wt?{isStarted:this.f.useStaticResourceManager&&li.isSupported(),onlineAssets:{activated:this.Wt.isOnlineAssetsActivated(),enabledOnNextPageview:this.qr}}:null}resetOnlineAssetsOnPageview(){this.Hi=!1,this.qr=!1}updateOnlineAssetsOnPageview(){this.Wt&&this.qr&&(this.Hi=!0,this.qr=!1)}onRecordingRequestSent(t){this.Rg=t}getRecordingStartTimestamp(){return this.Ha.toString()}getRecordingLastEventTimestamp(){return this.zr.toString()}onOptOut(){W(this.je,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}Bi(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:I.now(),type:U.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}_g(){return this.j.extractEvents(U.API_ERROR,U.JAVASCRIPT_ERROR,U.CUSTOM_ERROR,U.TEXT_VISIBILITY,U.POINTER_DOWN)}}return s.jt="RecordingService",s.jA=255,s.xA=20,s.VA="etrp",s.UA="etrs",s.Cg="1",B([Ot("addInitialDom")],s.prototype,"addInitialDom",null),s})(),lv=(()=>{class s extends ht{constructor(t,e,i){super(),this.Qt=t,this.Ct=e,this.W=i,this.Uh=!1,this.Wr={},this.HA=r=>{if(r.length!==0)for(let o of r){let{metadata:c,events:l}=o;this.BA(c.rt)&&this.W.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Wr={}}onStop(){}recover(){this.Qt.recover(this.HA)}addBatchInProgress(t,e,i){this.Wr[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Wr[t]}blockSendingLastMessage(){this.Uh=!1}allowSendingLastMessage(){this.Uh=!0}sendLastMessageBeacon(){if(this.Uh){let{ri:t,rst:e,let:i,...r}=this.W.getQueryParams();r.hlm="true",this.Ct.setQueryParams(r),this.Ct.send()}}BA(t){return!!t&&csString.prototype.indexOf.call(t,H.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Wr),t=>{let{metadata:e,events:i}=this.Wr[t];this.Qt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Qt.save(t)}}return B([O("RecordingRecovery")],s.prototype,"recover",null),s})(),hv=(()=>{let s;return function(n){n[n.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),uv=8*1024*1024,dv=(()=>{class s extends ht{constructor(t,e,i){super(),this.xe=t,this.Pg=e,this.St=i,this.Vh={},this.Og=new Set,this.as=!1}initState(){ml()&&(this.Ue=this.St.getRequestParameters(),this.FA=`${this.Pg}/exist?${Bi.toQuery(this.Ue)}`,this.$A=`${this.Pg}/putTag?${Bi.toQuery(this.Ue)}`,this.Ng=ii(async()=>{if(this.as){this.Ng();return}this.as=!0;try{await this.GA()}finally{this.as=!1}},300),this.xe.onSendStaticResource(t=>{this.Mg(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Mg(t)}Mg(t){this.kg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.kg(e.hash,e.data)})}kg(t,e){this.Og.has(t)||(this.Og.add(t),this.Vh[t]=e,this.Ng())}async GA(){let t=this.Vh;this.Vh={};let e=await this.zA(t);if(!e.length)return;let i=this.qA(e);await Promise.all(csArray.prototype.map.call(i,r=>window.fetch(this.$A,{method:"POST",body:r})))}async WA(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ue.pid,filter:hv.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.FA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async zA(t){let e=[],i=await this.WA(t);return csArray.prototype.forEach.call(i,r=>{let o=t[r];o?csArray.prototype.push.call(e,{hash:r,data:o}):x.warn("SRM: received unknown hash: "+r)}),e}qA(t){let e=0,i=[new FormData];for(let r of t){let{data:o,hash:c}=r,l=i.length-1;if(e=e+o.size,e<uv)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),Su=2*1e3*1024,pv=200,zc=(()=>{class s{constructor(t=Su){this.Ut=[],this.jh=new ha(t)}addEvent(t){this.jh.addString(Ns(t)),csArray.prototype.push.call(this.Ut,t)}addEventByTimestamp(t){let e=0;for(;e<this.Ut.length&&!(this.Ut[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Ut,e,0,t)}eventsCount(){return this.Ut.length}clearEvents(){this.jh.reset(),this.Ut=[]}isFull(){return this.eventsCount()>=pv}isThresholdReached(){return this.jh.isThresholdReached()}getEvents(){return this.Ut}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Ut,r=>{csArray.prototype.indexOf.call(t,r.type)!==-1?csArray.prototype.push.call(e,r):csArray.prototype.push.call(i,r)}),this.Ut=i,e}stringifyEvents(){return Ns(this.Ut)}SI(t){t.type===U.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return B([Ot("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function fv(s){if(typeof Object.values=="function")return Object.values(s);let n=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(n,s[t]);return n}var qc=(()=>{class s{constructor(){this.Fa=1}getCurrentIndex(){return this.Fa}increment(){this.Fa+=1}reset(){this.Fa=1}getRequestParameters(){return{ri:`${this.Fa}`}}}return s})(),gv=3,mv=8,yv=(()=>{class s{constructor(t,e=Su,i=gv){this.YA=t,this.Dg=e,this.Hh=i,this.$a={}}addEvent(t){this.xg().addEvent(t)}addEventByTimestamp(t){this.xg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Fi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Fi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Fi();return t.length>=this.Hh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return Ns(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Fi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.$a[t[e].metadata.pageNumber]}Fi(){return fv(this.$a)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Fi(),Ev)}Lg(){let t=this.YA();if(t<=0)return{batch:new zc(this.Dg),metadata:{pageNumber:0,requestIndex:new qc}};let e=this.$a[t];if(e)return e;let i={batch:new zc(this.Dg),metadata:{pageNumber:t,requestIndex:new qc}};return this.$a[t]=i,this.Fi().length>Math.max(this.Hh,mv)&&x.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Fi().length}/${this.Hh})`),i}xg(){return this.Lg().batch}getCurrentRequestIndex(){return this.Lg().metadata.requestIndex}}return s})();function Ev(s,n){return s.metadata.pageNumber-n.metadata.pageNumber}function Ft(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var Sv=(()=>{class s{constructor(t,e){this.J=t,this.pt=e,this.L=Yn,this.Ga=!1,this.Ve=!1,this.Yr=null,this.qe=this.KA()}onEvent(t){this.L=t}start(){this.qe&&(this.Ve=!0,this.Bh())}stop(){this.Ve=!1}releaseResources(){this.jr()}Bh(){this.Ga||(this.Ga=!0,this.Yr=this.JA(),this.Yr.observe({type:"navigation",buffered:!0}))}JA(){return new window.PerformanceObserver(t=>{this.Ve&&csArray.prototype.forEach.call(t.getEntriesByType("navigation"),e=>{let i=this.QA(e);this.L(i)})})}jr(){this.Yr&&(this.Yr.disconnect(),this.Yr=null)}QA(t){let e={};for(let r in t){let o=QS[r],c=t[r];!o||c instanceof csArray||c instanceof Function||(T(c)?e[o]=c:wt(c)&&(e[o]=Ft(c,1)))}q.counters.networkRequests.count("collected");let i={...e,n:this.J.anonymizeUrl(this.J.removeQueryString(t.name),{maskingPatterns:this.pt.getUrlMaskingPatterns(),partialMaskingPatterns:this.pt.getPartialUrlMaskingPatterns()})};return{date:I.now(),type:U.PERFORMANCE_NAVIGATION_TIMING,args:[i]}}KA(){var t,e;return((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.includes.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation")}}return s})(),vv=(()=>{class s{constructor(t,e){this.J=t,this.pt=e,this.Ve=!1,this.L=Yn,this.Xr=null,this.qe=this.ZA()}onEvent(t){this.L=t}start(){this.qe&&(this.Ve=!0,this.Bh())}stop(){this.Ve=!1}releaseResources(){this.jr()}Bh(){this.Ga||(this.Ga=!0,this.Xr=this.tT(),this.Xr.observe({type:"resource",buffered:!0}))}tT(){return new window.PerformanceObserver(t=>{this.eT(t)})}eT(t){if(this.Ve){let e=t.getEntries();csArray.prototype.forEach.call(csArray.prototype.map.call(e,i=>this.sT(i)),i=>{this.L(i)})}}jr(){this.Xr&&(this.Xr.disconnect(),this.Xr=null)}sT(t){let e={};for(let r in t){let o=mu[r],c=t[r];!o||c instanceof csArray||c instanceof Function||(typeof c=="string"&&o?e[o]=c:typeof c=="number"&&o&&(e[o]=Ft(c,1)))}q.counters.networkRequests.count("collected");let i={...e,n:this.J.anonymizeUrl(this.J.removeQueryString(t.name),{maskingPatterns:this.pt.getUrlMaskingPatterns(),partialMaskingPatterns:this.pt.getPartialUrlMaskingPatterns()})};return{date:I.now(),type:U.PERFORMANCE_RESOURCE_TIMING,args:[i]}}ZA(){var t,e;return((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.includes.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"resource")}}return s})(),vu=(()=>{class s{constructor(t,e){this.Ot=t,this.M=e,this.Hs=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.L=t}start(){this.wi(),this.triggerInitialEvents()}stop(){this._i()}wi(){csArray.prototype.forEach.call(this.Hs,t=>Et(t))}_i(){csArray.prototype.forEach.call(this.Hs,t=>St(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:U.HASH_CHANGE,args:[this.M.anonymizePII(this.Ot.href)],date:I.now()};this.L(t)}visibilityChangeListener(){let t={type:U.VISIBILITY_CHANGE,args:[document.visibilityState],date:I.now()};this.L(t)}}return B([O("hashChange")],s.prototype,"hashChangeListener",null),B([O("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})();function wv(s){if(!T(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var _v=!!window.chrome,bv=33,wu=(()=>{class s{constructor(){this.eventType="user",this.Fh=[],this.iT=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.nT=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.za=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.$h=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=wv(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.$h,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ue=new fi((e,i)=>{switch(i){case"initial":case"added":this.wi(e);break;case"removed":this._i(e);break}})}init(){this.rT(),this.oT(),this.ol()}onEvent(t){csArray.prototype.push.call(this.Fh,t)}oe(t,e=!1){csArray.prototype.forEach.call(this.Fh,i=>i(t,e))}start(){this.Eh(),this.wi(document),this.ue.observe()}stop(){this._i(document),this.ue.disconnect(),this.Fh=[]}oT(){this.aT()&&csArray.prototype.push.call(this.za,...this.iT)}rT(){this.cT()&&csArray.prototype.push.call(this.za,...this.nT)}wi(t){Gn(t)?csArray.prototype.forEach.call(this.za,e=>Et(e)):csArray.prototype.forEach.call(this.$h,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Et(i)})}_i(t){Gn(t)?csArray.prototype.forEach.call(this.za,e=>St(e)):csArray.prototype.forEach.call(this.$h,e=>{let i={type:e.type,listener:e.listener,boundElement:t};St(i)})}aT(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}cT(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}Eh(){this.lT()}lT(){let t=Qs.getScrollContainer()||document,e=ct(t),i=this.Ug(t);if(i.top!==0||i.left!==0){let r={type:U.SCROLL,args:[e,i.left,i.top],date:I.now()};this.oe(r,!0)}}Ug(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(L.isMaskedElement(t)||L.isMaskedElementChild(t))return;let e=ct(t),i=this.Ug(t),r={type:U.SCROLL,args:[e,i.left,i.top],date:I.now()};this.oe(r)}mouseOverListener(t){if(L.isMaskedElementChild(t.target))return;let e=ct(t.target),i={type:U.MOUSE_OVER,args:[e],date:I.now()};this.oe(i)}clickListener(t){let e=Mt(t);if(L.isMaskedElementChild(e))return;let i=ct(e),r={type:U.CLICK,args:[i],date:I.now()};this.oe(r)}keyUpListener(t){let e=Mt(t);if(L.isMaskedElementChild(e))return;let i=ct(e),r=this.V[t.key];if(r===void 0)return;let o={type:U.KEY_UP,args:[i,r],date:I.now()};this.oe(o)}keyDownListener(t){let e=Mt(t);if(L.isMaskedElementChild(e))return;let i=ct(e),r=this.V[t.key];if(r===void 0)return;let o={type:U.KEY_DOWN,args:[i,r],date:I.now()};this.oe(o)}copyListener(t){let e=Mt(t);if(L.isMaskedElementChild(e))return;let i=ct(e),r={type:U.CLIPBOARD_COMMAND,args:[i,Zs.COPY],date:I.now()};this.oe(r)}cutListener(t){let e=Mt(t);if(L.isMaskedElementChild(e))return;let i=ct(e),r={type:U.CLIPBOARD_COMMAND,args:[i,Zs.CUT],date:I.now()};this.oe(r)}pasteListener(t){let e=Mt(t);if(L.isMaskedElementChild(e))return;let i=ct(e),r={type:U.CLIPBOARD_COMMAND,args:[i,Zs.PASTE],date:I.now()};this.oe(r)}pointerUpListener(t){let e=Mt(t);if(L.isMaskedElementChild(e))return;let i=ct(e),r={type:U.POINTER_UP,args:[t.pointerId,t.pointerType,Ft(t.clientX,1),Ft(t.clientY,1),i,t.button],date:I.now()};this.oe(r)}pointerMoveListener(t){let e={type:U.POINTER_MOVE,args:[t.pointerId,t.pointerType,Ft(t.clientX,1),Ft(t.clientY,1)],date:I.now()};this.oe(e)}pointerDownListener(t){let e=Mt(t);if(L.isMaskedElementChild(e))return;let i=ct(e),r={type:U.POINTER_DOWN,args:[t.pointerId,t.pointerType,Ft(t.clientX,1),Ft(t.clientY,1),i,t.button,{pageX:Ft(t.pageX,1),pageY:Ft(t.pageY,1)}],date:I.now()};this.oe(r)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:U.TOUCH_START,args:[r.identifier,Ft(r.clientX,1),Ft(r.clientY,1)],date:I.now()};this.oe(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:U.TOUCH_MOVE,args:[r.identifier,Ft(r.clientX,1),Ft(r.clientY,1)],date:I.now()};this.oe(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:t.type==="touchend"?U.TOUCH_END:U.TOUCH_CANCEL,args:[r.identifier,Ft(r.clientX,1),Ft(r.clientY,1)],date:I.now()};this.oe(o)}}ol(){this.V={},this.V[" "]=X.SPACE,this.V.Spacebar=X.SPACE,this.V.Backspace=X.BACKSPACE,this.V.Enter=X.ENTER,this.V.Delete=X.DELETE,this.V.ArrowUp=X.ARROWUP,this.V.ArrowDown=X.ARROWDOWN,this.V.ArrowLeft=X.ARROWLEFT,this.V.ArrowRight=X.ARROWRIGHT,this.V.Up=X.ARROWUP,this.V.Down=X.ARROWDOWN,this.V.Left=X.ARROWLEFT,this.V.Right=X.ARROWRIGHT,this.V.CapsLock=X.CAPSLOCK,this.V.Shift=X.SHIFT,this.V.Tab=X.TAB,this.V.Escape=X.ESCAPE,this.V.Esc=X.ESCAPE,this.V.End=X.END,this.V.Alt=X.ALT,this.V.Control=X.CTRL,this.V.Meta=X.META}}return B([Ot("RecordingPageEvents.start")],s.prototype,"start",null),B([O("scroll")],s.prototype,"scrollListener",null),B([O("mouseOver"),mt(),bm()],s.prototype,"mouseOverListener",null),B([O("click"),mt()],s.prototype,"clickListener",null),B([O("Event handler type: keyup")],s.prototype,"keyUpListener",null),B([O("Event handler type: keydown")],s.prototype,"keyDownListener",null),B([O("Event handler type: copy")],s.prototype,"copyListener",null),B([O("Event handler type: cut")],s.prototype,"cutListener",null),B([O("Event handler type: paste")],s.prototype,"pasteListener",null),B([O("Event handler type: pointerup"),mt()],s.prototype,"pointerUpListener",null),B([O("Event handler type: pointermove"),mt(),Vs({wait:bv})],s.prototype,"pointerMoveListener",null),B([O("Event handler type: pointerdown"),mt()],s.prototype,"pointerDownListener",null),B([O("Event handler type: touchstart"),mt()],s.prototype,"touchStartListener",null),B([O("Event handler type: touchmove"),mt()],s.prototype,"touchMoveListener",null),B([O("Event handler type: touchend-cancel"),mt()],s.prototype,"touchEndCancelListener",null),s})(),_u=(()=>{class s{constructor(){}onScannedAsset(t){this.qa=t}scanCssString(t){this.Gh(xi(t))}scanElement(t,e){L.getMaskedElementDetails(t).state!==L.MaskedElementState.NotMasked||e&&L.isMaskedAttribute(t,e)||(Xi(t)?this.hT(t):zo(t)?this.uT(t,e):(this.dT(t,e),this.pT(t,e),this.fT(t,e)))}uT(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:oh(t)};this.qa({type:"stylesheet",asset:o})}}hT(t){var e;let i=new Set;if(t.textContent)for(let o of xi(t.textContent))i.add(o);let r;try{r=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||x.error(o.message)}if(r)for(let o=0;o<r.length;o++){let c=r.item(o).cssText;for(let l of xi(c))i.add(l)}this.Gh(De(i))}zh(t){return!this.gT(t)&&!ee(t)&&!kl(t)}dT(t,e){if(pf(t)||df(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.zh(i)){let r={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.qa({type:"asset",asset:r})}}(!e||e==="srcset")&&t.srcset&&this.mT(t.srcset)}}pT(t,e){if(t.nodeType!==1){nt.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}mT(t){this.Gh(da(t))}fT(t,e){if((yf(t)||Ef(t)||Sf(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.zh(i)){let r={assetId:Pe(i),assetRawPath:i,assetBasePath:window.location.href};this.qa({type:"asset",asset:r})}}}Gh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.zh(e)),e=>({rawUrl:e,absoluteUrl:Pe(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.qa({type:"asset",asset:i})})}gT(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),Av=30,Tv=0,bu=(()=>{class s{constructor(t,e=Av,i=Tv){this.yT=t,this.ET=e,this.ST=i,this.We=new Wi,this.Fe=!1,this.qh=0,this.Vg=()=>{for(this.qh=0;this.We.length;){if(this.qh>=this.ET){csSetTimeout(this.Vg,this.ST);return}let r=I.elapsed(),o=this.We.pop();if(!o)break;this.runTask(o);let c=I.elapsed()-r;this.qh+=c}this.Fe=!1}}schedule(t,e=!1){if(!this.yT||e){t();return}_t.general.pendingTasks.increase(),this.We.push(t),this.vT()}vT(){this.Fe||(this.Fe=!0,csSetTimeout(()=>{this.Vg()}))}runTask(t){_t.general.pendingTasks.decrease(),t()}runPendingTasks(){this.We.forEach(t=>{this.runTask(t)}),this.We.clear()}clearQueue(){_t.general.pendingTasks.clear(),_t.mutations.pendingMutations.clear(),this.We.clear()}isEmpty(){return this.We.length===0}}return B([O("TaskScheduler"),Ot("runTask")],s.prototype,"runTask",null),B([Ot("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Au=(()=>{class s{constructor(){this.G=!1,this.jg=new ua(t=>t.type==="cssRuleInserted"&&this.wT(t)),this._T=cr(t=>{this.G&&t.length>0&&this.I.schedule(()=>W(t,e=>this.Kr.scanElement(e)))}),this.bT=({type:t,asset:e})=>{var i,r,o;t==="stylesheet"&&((i=this.AT)===null||i===void 0||i.call(this,e)),(r=this.TT)===null||r===void 0||r.call(this,e);let c={date:I.now(),type:U.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.L)===null||o===void 0||o.call(this,c)},this.I=new bu(!0,30,0),this.Ur=new au(t=>this.RT(t)),this.D=new se(t=>this.Po(t)),this.Kr=new _u,this.Kr.onScannedAsset(this.bT)}onEvent(t){this.L=t}onAsset(t){this.TT=t}onStyleSheetFound(t){this.AT=t}start(){this.G||(this.G=!0,this.jg.observe(),this.Ur.observe(),this.D.observe())}stop(){this.G&&(this.jg.disconnect(),this.Ur.disconnect(),this.D.disconnect(),this.G=!1)}wT(t){!t.rule||!this.G||this.Kr.scanCssString(t.rule)}RT(t){this.G&&L.getMaskedElementDetails(t).state===L.MaskedElementState.NotMasked&&this._T.push(t)}Po(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.Kr.scanElement(e.target,e.attributeName);break;case"characterData":this.CT(e.target);break;case"childList":}})}CT(t){ni(t)&&csNodeparentNode.apply(t)&&Xi(csNodeparentNode.apply(t))&&this.Kr.scanCssString(t.data)}}return s})(),Rv="csPersisted",Wc="v2/recording",Tu=["isRecording"],fa=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],Ru=["replay:resourceManager:getStatus","cssrm:getStatus"],Cv=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,y,m,v,N,D,w,S,C,k,_,F,Q){this.Bs=t,this.R=e,this.f=i,this.Ue=r,this.E=o,this.M=c,this.F=l,this.he=h,this.ge=p,this.ft=u,this.fe=y,this.pt=m,this.S=v,this.Js=N,this.Hg=D,this.ie=w,this.Vt=S,this.J=C,this.Nn=k,this.it=_,this.IT=F,this.ot=Q}init(){var t,e;let i=[],r=[];csArray.prototype.push.call(r,new Qh),this.Jr=new tu(this.it.shouldUseAnonymization(),this.f.whitelistedAttributes,this.M,this.f.anonymizeDigits),this.$i();let o=new $S(Rv);this.PT(o),this.j=new yv(()=>{var C;return((C=this.R.getSession())===null||C===void 0?void 0:C.pageNumber)||0});let c=new Au;if(csArray.prototype.push.call(i,c),yt.isSupported()&&!!this.f.encryptionPublicKey&&this.f.encryptionPublicKeyId>0){let k=new eu(this.f.encryptionPublicKeyId.toString());csArray.prototype.push.call(r,k)}this.f.useStaticResourceManager&&li.isSupported()&&(this.Wt=new li,this.xe=new gu,this.Bg=new dv(this.xe,this.f.getStaticResourceManagerUri(),this.Ue),this.Hg.addListener(this.Bg),csArray.prototype.push.call(r,this.Wt));let l=new Gi(this.Ue,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")})}),h=new vh(`${this.f.getRecordingUri()}/${Wc}`);csArray.prototype.push.call(r,this.Jr),csArray.prototype.push.call(r,new su(this.J)),csArray.prototype.push.call(r,new iu),this.Gi=new wu,this.Gi.init(),csArray.prototype.push.call(i,this.Gi),this.Dt=new lv(o,h,this.W);{let{withResource:C,withNavigation:k}=(t=this.f.performanceTimingOptions)!==null&&t!==void 0?t:{};C&&csArray.prototype.push.call(i,new vv(this.J,this.pt)),k&&csArray.prototype.push.call(i,new Sv(this.J,this.pt))}csArray.prototype.push.call(i,new vu(window.location,this.M));let p=new Jh,u=new TS,y=new CS,m=new ou(this.ot),v=new cu,N=[u,this.he,p,new Eu(csArray.prototype.filter.call(i,C=>C)),v,new lu,new uu,m,y];this.f.textVisibilityEnabled&&fs.isSupported()&&(this.Qr=new Zh,csArray.prototype.push.call(N,this.Qr)),this.f.jsErrorsEnabled&&(this.Va=new DS,this.OT=new xS(C=>this.ge.anonymize(C)),this.ls=new rv(this.Va),csArray.prototype.push.call(N,this.Va),csArray.prototype.push.call(r,this.OT)),!((e=this.f.customErrors)===null||e===void 0)&&e.enabled&&(this.f.customErrors.consoleMessageLogLevels&&this.f.customErrors.consoleMessageLogLevels.length>0&&(this.NT=new LS({consoleMessageLevels:this.f.customErrors.consoleMessageLogLevels,validHostnames:this.f.hostnames}),this.MT=new US(C=>(C.message=this.IT.anonymize(C.message),C)),csArray.prototype.push.call(N,this.NT),csArray.prototype.push.call(r,this.MT)),this.hs=new nv);let D=new fu(N,r),w=new yu(D,this.S,this.xe,this.ls,this.hs),S=[p,u,y,m,v];this.recordingService=new cv(this.f,this.j,l,this.F,this.R,this.ge,this.ft,this.fe,this.ot,this.W,this.Dt,h,w,i,S,this.Wt,this.Nn,this.ls,this.hs),this.Js.addListener(this.recordingService),this.Hg.addListener(this.recordingService),this.recordingService.init(),this.E.register(Tu,()=>this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()),this.E.register(fa,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(Ru,()=>this.recordingService.getStaticResourceManagerStatus()),this.Zr=new GS(this.S,this.R),this.Js.addListener(this.Zr),this.Bs.enableRecordingContext(this.recordingService,this.R,this.Zr),this.Wh()}onAfterNaturalPageView(){var t;this.ie.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Bg)===null||t===void 0||t.initState()}onStartTracking(){this.Dt.recover(),this.$i(),this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Yh())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Dt.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.$i(),this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.kT()):(this.recordingService.resetOnlineAssetsOnPageview(),this.kn())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.kn()}onOptout(){this.kn(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.$i(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.$i(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===H.QUOTA_REACHED||t===H.ANALYTICS_ONLY&&e===Kt.ETR_OFF?(this.recordingService.clearEvents(),this.kn()):(this.W.setQueryParams({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.Zr.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Dt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Dt.allowSendingLastMessage(),this.Gi.start(),this.recordingService.pushEvents(),q.counters.longTasks.count>0&&q.counters.longTasks.flush(),q.counters.tasks.count>0&&q.counters.tasks.flush()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.ie.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Yh(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.kn())}Wh(){var t,e,i,r;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(r=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;W(o,c=>{Pt(c)&&se.setShadowRootFilter(l=>{try{return Vt.call(l.host,c)}catch{return!1}})})}}Yh(){this.recordingService.start(),this.Dt.start(),this.S.emitRecordingContextChange()}kn(){this.recordingService.stop(),this.Dt.stop(),this.S.emitRecordingContextChange()}kT(){this.kn(),this.Yh()}PT(t){let e="byteArray";this.W=this.Vt.create(`${this.f.getRecordingUri()}/${Wc}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}$i(){var t;let e=this.it.shouldUseAnonymization();this.Jr.setAnonymization(e),(t=this.Qr)===null||t===void 0||t.setAnonymization(e)}}return B([Ot("Recording.onStartTracking")],s.prototype,"onStartTracking",null),B([Ot("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),Iv=(()=>{class s{constructor(t,e){this.le=t,this.f=e,this.Fg=!1}enableRecordingContext(t,e,i){this.Fg=!0,this.Tn=t,this.R=e,this.Zr=i}getRecordingContext(){var t,e,i;if(!this.Fg)return{isRecording:!1,recordingStartTimestamp:0,etrState:Kt.ETR_OFF,etrStatus:ae.ETR_DISABLED,collectState:H.ANALYTICS_ONLY};let r=this.R.getSession();return{isRecording:this.Tn.isRecording(),useAnonymization:this.le.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Tn.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Tn.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Tn.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF,etrStatus:this.Zr.getEtrStatus(r),collectState:(i=r==null?void 0:r.collectState)!==null&&i!==void 0?i:H.ANALYTICS_ONLY}}}return s})(),hi=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),Pv=(()=>{let s;return function(n){n.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),Ov=(()=>{class s{constructor(){}static init(t){(!this.Xh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Xh=new Map,i){let r=csString.prototype.split.call(i,".");for(let o=0;o<r.length;o++){let[c,l]=csString.prototype.split.call(r[o],"=");this.Xh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Xh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(Pv.COMPRESSION_DISABLED)}static Log(t){return(e,i,r)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=r.value;Nv(s.getString("debugLog"),t)&&(r.value=function(...p){return console.log(l,...p),h.bind(this)(...p)})}}}return s})();function Nv(s,n){var t;return s==null?!1:s===n||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+n+")(,|$)")))===null||t===void 0)&&t.length)}function Yc(){function i(a){let f=a.length;for(;--f>=0;)a[f]=0}let r=0,o=1,c=2,l=3,h=258,p=29,u=256,y=u+1+p,m=30,v=19,N=2*y+1,D=15,w=16,S=7,C=256,k=16,_=17,F=18,Q=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ot=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),kt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b=512,V=new Array((y+2)*2);i(V);let j=new Array(m*2);i(j);let $=new Array(b);i($);let gt=new Array(h-l+1);i(gt);let Ht=new Array(p);i(Ht);let fe=new Array(m);i(fe);function xe(a,f,g,E,d){this.static_tree=a,this.extra_bits=f,this.extra_base=g,this.elems=E,this.max_length=d,this.has_stree=a&&a.length}let Es,Qt,Wt;function ve(a,f){this.dyn_tree=a,this.max_code=0,this.stat_desc=f}let Hs=a=>a<256?$[a]:$[256+(a>>>7)],Le=(a,f)=>{a.pending_buf[a.pending++]=f&255,a.pending_buf[a.pending++]=f>>>8&255},Nt=(a,f,g)=>{a.bi_valid>w-g?(a.bi_buf|=f<<a.bi_valid&65535,Le(a,a.bi_buf),a.bi_buf=f>>w-a.bi_valid,a.bi_valid+=g-w):(a.bi_buf|=f<<a.bi_valid&65535,a.bi_valid+=g)},ne=(a,f,g)=>{Nt(a,g[f*2],g[f*2+1])},dn=(a,f)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--f>0);return g>>>1},pn=a=>{a.bi_valid===16?(Le(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},wr=(a,f)=>{let g=f.dyn_tree,E=f.max_code,d=f.stat_desc.static_tree,R=f.stat_desc.has_stree,A=f.stat_desc.extra_bits,M=f.stat_desc.extra_base,et=f.stat_desc.max_length,G,Zt,es,dt,bs,Gs,Tn=0;for(dt=0;dt<=D;dt++)a.bl_count[dt]=0;for(g[a.heap[a.heap_max]*2+1]=0,G=a.heap_max+1;G<N;G++)Zt=a.heap[G],dt=g[g[Zt*2+1]*2+1]+1,dt>et&&(dt=et,Tn++),g[Zt*2+1]=dt,!(Zt>E)&&(a.bl_count[dt]++,bs=0,Zt>=M&&(bs=A[Zt-M]),Gs=g[Zt*2],a.opt_len+=Gs*(dt+bs),R&&(a.static_len+=Gs*(d[Zt*2+1]+bs)));if(Tn!==0){do{for(dt=et-1;a.bl_count[dt]===0;)dt--;a.bl_count[dt]--,a.bl_count[dt+1]+=2,a.bl_count[et]--,Tn-=2}while(Tn>0);for(dt=et;dt!==0;dt--)for(Zt=a.bl_count[dt];Zt!==0;)es=a.heap[--G],!(es>E)&&(g[es*2+1]!==dt&&(a.opt_len+=(dt-g[es*2+1])*g[es*2],g[es*2+1]=dt),Zt--)}},fn=(a,f,g)=>{let E=new Array(D+1),d=0,R,A;for(R=1;R<=D;R++)E[R]=d=d+g[R-1]<<1;for(A=0;A<=f;A++){let M=a[A*2+1];M!==0&&(a[A*2]=dn(E[M]++,M))}},Si=()=>{let a,f,g,E,d,R=new Array(D+1);for(g=0,E=0;E<p-1;E++)for(Ht[E]=g,a=0;a<1<<Q[E];a++)gt[g++]=E;for(gt[g-1]=E,d=0,E=0;E<16;E++)for(fe[E]=d,a=0;a<1<<ot[E];a++)$[d++]=E;for(d>>=7;E<m;E++)for(fe[E]=d<<7,a=0;a<1<<ot[E]-7;a++)$[256+d++]=E;for(f=0;f<=D;f++)R[f]=0;for(a=0;a<=143;)V[a*2+1]=8,a++,R[8]++;for(;a<=255;)V[a*2+1]=9,a++,R[9]++;for(;a<=279;)V[a*2+1]=7,a++,R[7]++;for(;a<=287;)V[a*2+1]=8,a++,R[8]++;for(fn(V,y+1,R),a=0;a<m;a++)j[a*2+1]=5,j[a*2]=dn(a,5);Es=new xe(V,Q,u+1,y,D),Qt=new xe(j,ot,0,m,D),Wt=new xe(new Array(0),jt,0,v,S)},Bs=a=>{let f;for(f=0;f<y;f++)a.dyn_ltree[f*2]=0;for(f=0;f<m;f++)a.dyn_dtree[f*2]=0;for(f=0;f<v;f++)a.bl_tree[f*2]=0;a.dyn_ltree[C*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},gn=a=>{a.bi_valid>8?Le(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},yd=(a,f,g,E)=>{gn(a),E&&(Le(a,g),Le(a,~g)),a.pending_buf.set(a.window.subarray(f,f+g),a.pending),a.pending+=g},Aa=(a,f,g,E)=>{let d=f*2,R=g*2;return a[d]<a[R]||a[d]===a[R]&&E[f]<=E[g]},_r=(a,f,g)=>{let E=a.heap[g],d=g<<1;for(;d<=a.heap_len&&(d<a.heap_len&&Aa(f,a.heap[d+1],a.heap[d],a.depth)&&d++,!Aa(f,E,a.heap[d],a.depth));)a.heap[g]=a.heap[d],g=d,d<<=1;a.heap[g]=E},Ta=(a,f,g)=>{let E,d,R=0,A,M;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+R*2]<<8|a.pending_buf[a.d_buf+R*2+1],d=a.pending_buf[a.l_buf+R],R++,E===0?ne(a,d,f):(A=gt[d],ne(a,A+u+1,f),M=Q[A],M!==0&&(d-=Ht[A],Nt(a,d,M)),E--,A=Hs(E),ne(a,A,g),M=ot[A],M!==0&&(E-=fe[A],Nt(a,E,M)));while(R<a.last_lit);ne(a,C,f)},br=(a,f)=>{let g=f.dyn_tree,E=f.stat_desc.static_tree,d=f.stat_desc.has_stree,R=f.stat_desc.elems,A,M,et=-1,G;for(a.heap_len=0,a.heap_max=N,A=0;A<R;A++)g[A*2]!==0?(a.heap[++a.heap_len]=et=A,a.depth[A]=0):g[A*2+1]=0;for(;a.heap_len<2;)G=a.heap[++a.heap_len]=et<2?++et:0,g[G*2]=1,a.depth[G]=0,a.opt_len--,d&&(a.static_len-=E[G*2+1]);for(f.max_code=et,A=a.heap_len>>1;A>=1;A--)_r(a,g,A);G=R;do A=a.heap[1],a.heap[1]=a.heap[a.heap_len--],_r(a,g,1),M=a.heap[1],a.heap[--a.heap_max]=A,a.heap[--a.heap_max]=M,g[G*2]=g[A*2]+g[M*2],a.depth[G]=(a.depth[A]>=a.depth[M]?a.depth[A]:a.depth[M])+1,g[A*2+1]=g[M*2+1]=G,a.heap[1]=G++,_r(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],wr(a,f),fn(g,et,a.bl_count)},Ra=(a,f,g)=>{let E,d=-1,R,A=f[0*2+1],M=0,et=7,G=4;for(A===0&&(et=138,G=3),f[(g+1)*2+1]=65535,E=0;E<=g;E++)R=A,A=f[(E+1)*2+1],!(++M<et&&R===A)&&(M<G?a.bl_tree[R*2]+=M:R!==0?(R!==d&&a.bl_tree[R*2]++,a.bl_tree[k*2]++):M<=10?a.bl_tree[_*2]++:a.bl_tree[F*2]++,M=0,d=R,A===0?(et=138,G=3):R===A?(et=6,G=3):(et=7,G=4))},Ca=(a,f,g)=>{let E,d=-1,R,A=f[0*2+1],M=0,et=7,G=4;for(A===0&&(et=138,G=3),E=0;E<=g;E++)if(R=A,A=f[(E+1)*2+1],!(++M<et&&R===A)){if(M<G)do ne(a,R,a.bl_tree);while(--M!==0);else R!==0?(R!==d&&(ne(a,R,a.bl_tree),M--),ne(a,k,a.bl_tree),Nt(a,M-3,2)):M<=10?(ne(a,_,a.bl_tree),Nt(a,M-3,3)):(ne(a,F,a.bl_tree),Nt(a,M-11,7));M=0,d=R,A===0?(et=138,G=3):R===A?(et=6,G=3):(et=7,G=4)}},Ed=a=>{let f;for(Ra(a,a.dyn_ltree,a.l_desc.max_code),Ra(a,a.dyn_dtree,a.d_desc.max_code),br(a,a.bl_desc),f=v-1;f>=3&&a.bl_tree[kt[f]*2+1]===0;f--);return a.opt_len+=3*(f+1)+5+5+4,f},Sd=(a,f,g,E)=>{let d;for(Nt(a,f-257,5),Nt(a,g-1,5),Nt(a,E-4,4),d=0;d<E;d++)Nt(a,a.bl_tree[kt[d]*2+1],3);Ca(a,a.dyn_ltree,f-1),Ca(a,a.dyn_dtree,g-1)},vd=a=>{let f=4093624447,g;for(g=0;g<=31;g++,f>>>=1)if(f&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<u;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},Ia=!1,wd=a=>{Ia||(Si(),Ia=!0),a.l_desc=new ve(a.dyn_ltree,Es),a.d_desc=new ve(a.dyn_dtree,Qt),a.bl_desc=new ve(a.bl_tree,Wt),a.bi_buf=0,a.bi_valid=0,Bs(a)},Pa=(a,f,g,E)=>{Nt(a,(r<<1)+(E?1:0),3),yd(a,f,g,!0)},_d=a=>{Nt(a,o<<1,3),ne(a,C,V),pn(a)},bd=(a,f,g,E)=>{let d,R,A=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=vd(a)),br(a,a.l_desc),br(a,a.d_desc),A=Ed(a),d=a.opt_len+3+7>>>3,R=a.static_len+3+7>>>3,R<=d&&(d=R)):d=R=g+5,g+4<=d&&f!==-1?Pa(a,f,g,E):a.strategy===4||R===d?(Nt(a,(o<<1)+(E?1:0),3),Ta(a,V,j)):(Nt(a,(c<<1)+(E?1:0),3),Sd(a,a.l_desc.max_code+1,a.d_desc.max_code+1,A+1),Ta(a,a.dyn_ltree,a.dyn_dtree)),Bs(a),E&&gn(a)},Ad=(a,f,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=f>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=f&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,f===0?a.dyn_ltree[g*2]++:(a.matches++,f--,a.dyn_ltree[(gt[g]+u+1)*2]++,a.dyn_dtree[Hs(f)*2]++),a.last_lit===a.lit_bufsize-1);var Td=wd,Rd=Pa,Cd=bd,Id=Ad,Pd=_d,Od={_tr_init:Td,_tr_stored_block:Rd,_tr_flush_block:Cd,_tr_tally:Id,_tr_align:Pd},Oa=(a,f,g,E)=>{let d=a&65535|0,R=a>>>16&65535|0,A=0;for(;g!==0;){A=g>2e3?2e3:g,g-=A;do d=d+f[E++]|0,R=R+d|0;while(--A);d%=65521,R%=65521}return d|R<<16|0};let Nd=()=>{let a,f=[];for(var g=0;g<256;g++){a=g;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;f[g]=a}return f},Md=new Uint32Array(Nd());var We=(a,f,g,E)=>{let d=Md,R=E+g;a^=-1;for(let A=E;A<R;A++)a=a>>>8^d[(a^f[A])&255];return a^-1},mn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Na={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:kd,_tr_stored_block:Dd,_tr_flush_block:xd,_tr_tally:Ye,_tr_align:Ld}=Od,{Z_NO_FLUSH:Ss,Z_PARTIAL_FLUSH:Ud,Z_FULL_FLUSH:Vd,Z_FINISH:Xe,Z_BLOCK:Ma,Z_OK:we,Z_STREAM_END:ka,Z_STREAM_ERROR:re,Z_DATA_ERROR:jd,Z_BUF_ERROR:Ar,Z_DEFAULT_COMPRESSION:Hd,Z_FILTERED:Bd,Z_HUFFMAN_ONLY:yn,Z_RLE:Fd,Z_FIXED:$d,Z_DEFAULT_STRATEGY:Gd,Z_UNKNOWN:zd,Z_DEFLATED:En}=Na,qd=9,Wd=15,Yd=8,Tr=256+1+29,Xd=30,Kd=19,Jd=2*Tr+1,Qd=15,tt=3,Ke=258,ge=Ke+tt+1,Zd=32,Sn=42,Rr=69,vn=73,wn=91,_n=103,vs=113,vi=666,Ct=1,wi=2,ws=3,Fs=4,tp=3,Je=(a,f)=>(a.msg=mn[f],f),Da=a=>(a<<1)-(a>4?9:0),Qe=a=>{let f=a.length;for(;--f>=0;)a[f]=0},Ze=(a,f,g)=>(f<<a.hash_shift^g)&a.hash_mask,ts=a=>{let f=a.state,g=f.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(f.pending_buf.subarray(f.pending_out,f.pending_out+g),a.next_out),a.next_out+=g,f.pending_out+=g,a.total_out+=g,a.avail_out-=g,f.pending-=g,f.pending===0&&(f.pending_out=0))},Dt=(a,f)=>{xd(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,f),a.block_start=a.strstart,ts(a.strm)},rt=(a,f)=>{a.pending_buf[a.pending++]=f},_i=(a,f)=>{a.pending_buf[a.pending++]=f>>>8&255,a.pending_buf[a.pending++]=f&255},ep=(a,f,g,E)=>{let d=a.avail_in;return d>E&&(d=E),d===0?0:(a.avail_in-=d,f.set(a.input.subarray(a.next_in,a.next_in+d),g),a.state.wrap===1?a.adler=Oa(a.adler,f,d,g):a.state.wrap===2&&(a.adler=We(a.adler,f,d,g)),a.next_in+=d,a.total_in+=d,d)},xa=(a,f)=>{let g=a.max_chain_length,E=a.strstart,d,R,A=a.prev_length,M=a.nice_match,et=a.strstart>a.w_size-ge?a.strstart-(a.w_size-ge):0,G=a.window,Zt=a.w_mask,es=a.prev,dt=a.strstart+Ke,bs=G[E+A-1],Gs=G[E+A];a.prev_length>=a.good_match&&(g>>=2),M>a.lookahead&&(M=a.lookahead);do if(d=f,!(G[d+A]!==Gs||G[d+A-1]!==bs||G[d]!==G[E]||G[++d]!==G[E+1])){E+=2,d++;do;while(G[++E]===G[++d]&&G[++E]===G[++d]&&G[++E]===G[++d]&&G[++E]===G[++d]&&G[++E]===G[++d]&&G[++E]===G[++d]&&G[++E]===G[++d]&&G[++E]===G[++d]&&E<dt);if(R=Ke-(dt-E),E=dt-Ke,R>A){if(a.match_start=f,A=R,R>=M)break;bs=G[E+A-1],Gs=G[E+A]}}while((f=es[f&Zt])>et&&--g!==0);return A<=a.lookahead?A:a.lookahead},_s=a=>{let f=a.w_size,g,E,d,R,A;do{if(R=a.window_size-a.lookahead-a.strstart,a.strstart>=f+(f-ge)){a.window.set(a.window.subarray(f,f+f),0),a.match_start-=f,a.strstart-=f,a.block_start-=f,E=a.hash_size,g=E;do d=a.head[--g],a.head[g]=d>=f?d-f:0;while(--E);E=f,g=E;do d=a.prev[--g],a.prev[g]=d>=f?d-f:0;while(--E);R+=f}if(a.strm.avail_in===0)break;if(E=ep(a.strm,a.window,a.strstart+a.lookahead,R),a.lookahead+=E,a.lookahead+a.insert>=tt)for(A=a.strstart-a.insert,a.ins_h=a.window[A],a.ins_h=Ze(a,a.ins_h,a.window[A+1]);a.insert&&(a.ins_h=Ze(a,a.ins_h,a.window[A+tt-1]),a.prev[A&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=A,A++,a.insert--,!(a.lookahead+a.insert<tt)););}while(a.lookahead<ge&&a.strm.avail_in!==0)},sp=(a,f)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(_s(a),a.lookahead===0&&f===Ss)return Ct;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+g;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,Dt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-ge&&(Dt(a,!1),a.strm.avail_out===0))return Ct}return a.insert=0,f===Xe?(Dt(a,!0),a.strm.avail_out===0?ws:Fs):(a.strstart>a.block_start&&(Dt(a,!1),a.strm.avail_out===0),Ct)},Cr=(a,f)=>{let g,E;for(;;){if(a.lookahead<ge){if(_s(a),a.lookahead<ge&&f===Ss)return Ct;if(a.lookahead===0)break}if(g=0,a.lookahead>=tt&&(a.ins_h=Ze(a,a.ins_h,a.window[a.strstart+tt-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-ge&&(a.match_length=xa(a,g)),a.match_length>=tt)if(E=Ye(a,a.strstart-a.match_start,a.match_length-tt),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=tt){a.match_length--;do a.strstart++,a.ins_h=Ze(a,a.ins_h,a.window[a.strstart+tt-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ze(a,a.ins_h,a.window[a.strstart+1]);else E=Ye(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(Dt(a,!1),a.strm.avail_out===0))return Ct}return a.insert=a.strstart<tt-1?a.strstart:tt-1,f===Xe?(Dt(a,!0),a.strm.avail_out===0?ws:Fs):a.last_lit&&(Dt(a,!1),a.strm.avail_out===0)?Ct:wi},$s=(a,f)=>{let g,E,d;for(;;){if(a.lookahead<ge){if(_s(a),a.lookahead<ge&&f===Ss)return Ct;if(a.lookahead===0)break}if(g=0,a.lookahead>=tt&&(a.ins_h=Ze(a,a.ins_h,a.window[a.strstart+tt-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=tt-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-ge&&(a.match_length=xa(a,g),a.match_length<=5&&(a.strategy===Bd||a.match_length===tt&&a.strstart-a.match_start>4096)&&(a.match_length=tt-1)),a.prev_length>=tt&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-tt,E=Ye(a,a.strstart-1-a.prev_match,a.prev_length-tt),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=Ze(a,a.ins_h,a.window[a.strstart+tt-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=tt-1,a.strstart++,E&&(Dt(a,!1),a.strm.avail_out===0))return Ct}else if(a.match_available){if(E=Ye(a,0,a.window[a.strstart-1]),E&&Dt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return Ct}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=Ye(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<tt-1?a.strstart:tt-1,f===Xe?(Dt(a,!0),a.strm.avail_out===0?ws:Fs):a.last_lit&&(Dt(a,!1),a.strm.avail_out===0)?Ct:wi},ip=(a,f)=>{let g,E,d,R,A=a.window;for(;;){if(a.lookahead<=Ke){if(_s(a),a.lookahead<=Ke&&f===Ss)return Ct;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=tt&&a.strstart>0&&(d=a.strstart-1,E=A[d],E===A[++d]&&E===A[++d]&&E===A[++d])){R=a.strstart+Ke;do;while(E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&E===A[++d]&&d<R);a.match_length=Ke-(R-d),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=tt?(g=Ye(a,1,a.match_length-tt),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=Ye(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(Dt(a,!1),a.strm.avail_out===0))return Ct}return a.insert=0,f===Xe?(Dt(a,!0),a.strm.avail_out===0?ws:Fs):a.last_lit&&(Dt(a,!1),a.strm.avail_out===0)?Ct:wi},np=(a,f)=>{let g;for(;;){if(a.lookahead===0&&(_s(a),a.lookahead===0)){if(f===Ss)return Ct;break}if(a.match_length=0,g=Ye(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(Dt(a,!1),a.strm.avail_out===0))return Ct}return a.insert=0,f===Xe?(Dt(a,!0),a.strm.avail_out===0?ws:Fs):a.last_lit&&(Dt(a,!1),a.strm.avail_out===0)?Ct:wi};function _e(a,f,g,E,d){this.good_length=a,this.max_lazy=f,this.nice_length=g,this.max_chain=E,this.func=d}let bi=[new _e(0,0,0,0,sp),new _e(4,4,8,4,Cr),new _e(4,5,16,8,Cr),new _e(4,6,32,32,Cr),new _e(4,4,16,16,$s),new _e(8,16,32,32,$s),new _e(8,16,128,128,$s),new _e(8,32,128,256,$s),new _e(32,128,258,1024,$s),new _e(32,258,258,4096,$s)],rp=a=>{a.window_size=2*a.w_size,Qe(a.head),a.max_lazy_match=bi[a.level].max_lazy,a.good_match=bi[a.level].good_length,a.nice_match=bi[a.level].nice_length,a.max_chain_length=bi[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=tt-1,a.match_available=0,a.ins_h=0};function op(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=En,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Jd*2),this.dyn_dtree=new Uint16Array((2*Xd+1)*2),this.bl_tree=new Uint16Array((2*Kd+1)*2),Qe(this.dyn_ltree),Qe(this.dyn_dtree),Qe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Qd+1),this.heap=new Uint16Array(2*Tr+1),Qe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Tr+1),Qe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let La=a=>{if(!a||!a.state)return Je(a,re);a.total_in=a.total_out=0,a.data_type=zd;let f=a.state;return f.pending=0,f.pending_out=0,f.wrap<0&&(f.wrap=-f.wrap),f.status=f.wrap?Sn:vs,a.adler=f.wrap===2?0:1,f.last_flush=Ss,kd(f),we},Ua=a=>{let f=La(a);return f===we&&rp(a.state),f},ap=(a,f)=>!a||!a.state||a.state.wrap!==2?re:(a.state.gzhead=f,we),Va=(a,f,g,E,d,R)=>{if(!a)return re;let A=1;if(f===Hd&&(f=6),E<0?(A=0,E=-E):E>15&&(A=2,E-=16),d<1||d>qd||g!==En||E<8||E>15||f<0||f>9||R<0||R>$d)return Je(a,re);E===8&&(E=9);let M=new op;return a.state=M,M.strm=a,M.wrap=A,M.gzhead=null,M.w_bits=E,M.w_size=1<<M.w_bits,M.w_mask=M.w_size-1,M.hash_bits=d+7,M.hash_size=1<<M.hash_bits,M.hash_mask=M.hash_size-1,M.hash_shift=~~((M.hash_bits+tt-1)/tt),M.window=new Uint8Array(M.w_size*2),M.head=new Uint16Array(M.hash_size),M.prev=new Uint16Array(M.w_size),M.lit_bufsize=1<<d+6,M.pending_buf_size=M.lit_bufsize*4,M.pending_buf=new Uint8Array(M.pending_buf_size),M.d_buf=1*M.lit_bufsize,M.l_buf=3*M.lit_bufsize,M.level=f,M.strategy=R,M.method=g,Ua(a)},cp=(a,f)=>Va(a,f,En,Wd,Yd,Gd),lp=(a,f)=>{let g,E;if(!a||!a.state||f>Ma||f<0)return a?Je(a,re):re;let d=a.state;if(!a.output||!a.input&&a.avail_in!==0||d.status===vi&&f!==Xe)return Je(a,a.avail_out===0?Ar:re);d.strm=a;let R=d.last_flush;if(d.last_flush=f,d.status===Sn)if(d.wrap===2)a.adler=0,rt(d,31),rt(d,139),rt(d,8),d.gzhead?(rt(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),rt(d,d.gzhead.time&255),rt(d,d.gzhead.time>>8&255),rt(d,d.gzhead.time>>16&255),rt(d,d.gzhead.time>>24&255),rt(d,d.level===9?2:d.strategy>=yn||d.level<2?4:0),rt(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(rt(d,d.gzhead.extra.length&255),rt(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=We(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=Rr):(rt(d,0),rt(d,0),rt(d,0),rt(d,0),rt(d,0),rt(d,d.level===9?2:d.strategy>=yn||d.level<2?4:0),rt(d,tp),d.status=vs);else{let A=En+(d.w_bits-8<<4)<<8,M=-1;d.strategy>=yn||d.level<2?M=0:d.level<6?M=1:d.level===6?M=2:M=3,A|=M<<6,d.strstart!==0&&(A|=Zd),A+=31-A%31,d.status=vs,_i(d,A),d.strstart!==0&&(_i(d,a.adler>>>16),_i(d,a.adler&65535)),a.adler=1}if(d.status===Rr)if(d.gzhead.extra){for(g=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=We(a.adler,d.pending_buf,d.pending-g,g)),ts(a),g=d.pending,d.pending===d.pending_buf_size));)rt(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>g&&(a.adler=We(a.adler,d.pending_buf,d.pending-g,g)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=vn)}else d.status=vn;if(d.status===vn)if(d.gzhead.name){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=We(a.adler,d.pending_buf,d.pending-g,g)),ts(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.name.length?E=d.gzhead.name.charCodeAt(d.gzindex++)&255:E=0,rt(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=We(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.gzindex=0,d.status=wn)}else d.status=wn;if(d.status===wn)if(d.gzhead.comment){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=We(a.adler,d.pending_buf,d.pending-g,g)),ts(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.comment.length?E=d.gzhead.comment.charCodeAt(d.gzindex++)&255:E=0,rt(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=We(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.status=_n)}else d.status=_n;if(d.status===_n&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&ts(a),d.pending+2<=d.pending_buf_size&&(rt(d,a.adler&255),rt(d,a.adler>>8&255),a.adler=0,d.status=vs)):d.status=vs),d.pending!==0){if(ts(a),a.avail_out===0)return d.last_flush=-1,we}else if(a.avail_in===0&&Da(f)<=Da(R)&&f!==Xe)return Je(a,Ar);if(d.status===vi&&a.avail_in!==0)return Je(a,Ar);if(a.avail_in!==0||d.lookahead!==0||f!==Ss&&d.status!==vi){let A=d.strategy===yn?np(d,f):d.strategy===Fd?ip(d,f):bi[d.level].func(d,f);if((A===ws||A===Fs)&&(d.status=vi),A===Ct||A===ws)return a.avail_out===0&&(d.last_flush=-1),we;if(A===wi&&(f===Ud?Ld(d):f!==Ma&&(Dd(d,0,0,!1),f===Vd&&(Qe(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),ts(a),a.avail_out===0))return d.last_flush=-1,we}return f!==Xe?we:d.wrap<=0?ka:(d.wrap===2?(rt(d,a.adler&255),rt(d,a.adler>>8&255),rt(d,a.adler>>16&255),rt(d,a.adler>>24&255),rt(d,a.total_in&255),rt(d,a.total_in>>8&255),rt(d,a.total_in>>16&255),rt(d,a.total_in>>24&255)):(_i(d,a.adler>>>16),_i(d,a.adler&65535)),ts(a),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?we:ka)},hp=a=>{if(!a||!a.state)return re;let f=a.state.status;return f!==Sn&&f!==Rr&&f!==vn&&f!==wn&&f!==_n&&f!==vs&&f!==vi?Je(a,re):(a.state=null,f===vs?Je(a,jd):we)},up=(a,f)=>{let g=f.length;if(!a||!a.state)return re;let E=a.state,d=E.wrap;if(d===2||d===1&&E.status!==Sn||E.lookahead)return re;if(d===1&&(a.adler=Oa(a.adler,f,g,0)),E.wrap=0,g>=E.w_size){d===0&&(Qe(E.head),E.strstart=0,E.block_start=0,E.insert=0);let et=new Uint8Array(E.w_size);et.set(f.subarray(g-E.w_size,g),0),f=et,g=E.w_size}let R=a.avail_in,A=a.next_in,M=a.input;for(a.avail_in=g,a.next_in=0,a.input=f,_s(E);E.lookahead>=tt;){let et=E.strstart,G=E.lookahead-(tt-1);do E.ins_h=Ze(E,E.ins_h,E.window[et+tt-1]),E.prev[et&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=et,et++;while(--G);E.strstart=et,E.lookahead=tt-1,_s(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=tt-1,E.match_available=0,a.next_in=A,a.input=M,a.avail_in=R,E.wrap=d,we};var dp=cp,pp=Va,fp=Ua,gp=La,mp=ap,yp=lp,Ep=hp,Sp=up,vp="pako deflate (from Nodeca project)",Ai={deflateInit:dp,deflateInit2:pp,deflateReset:fp,deflateResetKeep:gp,deflateSetHeader:mp,deflate:yp,deflateEnd:Ep,deflateSetDictionary:Sp,deflateInfo:vp};let wp=(a,f)=>Object.prototype.hasOwnProperty.call(a,f);var _p=function(a){let f=Array.prototype.slice.call(arguments,1);for(;f.length;){let g=f.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let E in g)wp(g,E)&&(a[E]=g[E])}}return a},bp=a=>{let f=0;for(let E=0,d=a.length;E<d;E++)f+=a[E].length;let g=new Uint8Array(f);for(let E=0,d=0,R=a.length;E<R;E++){let A=a[E];g.set(A,d),d+=A.length}return g},ja={assign:_p,flattenChunks:bp};let Ha=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ha=!1}let Ti=new Uint8Array(256);for(let a=0;a<256;a++)Ti[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;Ti[254]=Ti[254]=1;var Ap=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let f,g,E,d,R,A=a.length,M=0;for(d=0;d<A;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<A&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),M+=g<128?1:g<2048?2:g<65536?3:4;for(f=new Uint8Array(M),R=0,d=0;R<M;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<A&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),g<128?f[R++]=g:g<2048?(f[R++]=192|g>>>6,f[R++]=128|g&63):g<65536?(f[R++]=224|g>>>12,f[R++]=128|g>>>6&63,f[R++]=128|g&63):(f[R++]=240|g>>>18,f[R++]=128|g>>>12&63,f[R++]=128|g>>>6&63,f[R++]=128|g&63);return f};let Ba=(a,f=a.length)=>{if(f<65534&&a.subarray&&Ha)return String.fromCharCode.apply(null,a.length===f?a:a.subarray(0,f));let g="";for(let E=0;E<f;E++)g+=String.fromCharCode(a[E]);return g};var Tp=(a,f)=>{let g=f||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,f));let E,d,R=new Array(g*2);for(d=0,E=0;E<g;){let A=a[E++];if(A<128){R[d++]=A;continue}let M=Ti[A];if(M>4){R[d++]=65533,E+=M-1;continue}for(A&=M===2?31:M===3?15:7;M>1&&E<g;)A=A<<6|a[E++]&63,M--;if(M>1){R[d++]=65533;continue}A<65536?R[d++]=A:(A-=65536,R[d++]=55296|A>>10&1023,R[d++]=56320|A&1023)}return Ba(R,d)},Rp=(a,f)=>{f=f||a.length,f>a.length&&(f=a.length);let g=f-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?f:g+Ti[a[g]]>f?g:f},Fa={string2buf:Ap,buf2string:Tp,utf8border:Rp};function Cp(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ip=Cp;let $a=Object.prototype.toString,{Z_NO_FLUSH:Pp,Z_SYNC_FLUSH:Op,Z_FULL_FLUSH:Np,Z_FINISH:Mp,Z_OK:bn,Z_STREAM_END:kp,Z_DEFAULT_COMPRESSION:Dp,Z_DEFAULT_STRATEGY:xp,Z_DEFLATED:Lp}=Na;function An(a){this.options=ja.assign({level:Dp,method:Lp,chunkSize:16384,windowBits:15,memLevel:8,strategy:xp},a||{});let f=this.options;f.raw&&f.windowBits>0?f.windowBits=-f.windowBits:f.gzip&&f.windowBits>0&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ip,this.strm.avail_out=0;let g=Ai.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(g!==bn)throw new Error(mn[g]);if(f.header&&Ai.deflateSetHeader(this.strm,f.header),f.dictionary){let E;if(typeof f.dictionary=="string"?E=Fa.string2buf(f.dictionary):$a.call(f.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(f.dictionary):E=f.dictionary,g=Ai.deflateSetDictionary(this.strm,E),g!==bn)throw new Error(mn[g]);this._dict_set=!0}}An.prototype.push=function(a,f){let g=this.strm,E=this.options.chunkSize,d,R;if(this.ended)return!1;for(f===~~f?R=f:R=f===!0?Mp:Pp,typeof a=="string"?g.input=Fa.string2buf(a):$a.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(E),g.next_out=0,g.avail_out=E),(R===Op||R===Np)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(d=Ai.deflate(g,R),d===kp)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),d=Ai.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===bn;if(g.avail_out===0){this.onData(g.output);continue}if(R>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},An.prototype.onData=function(a){this.chunks.push(a)},An.prototype.onEnd=function(a){a===bn&&(this.result=ja.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function Up(a,f){f=f||{};let g=new An(f);if(g.push(a,!0),g.err)throw g.msg||mn[g.err];return g.result}function Vp(a,f){return f=f||{},f.gzip=!0,Up(a,f)}return(a,f,g)=>{let E=Vp(a);return f==="base64"?E=btoa(Ba(E)):E=E.buffer,g&&g(E),E}}var Mv=(()=>{class s extends Bl{constructor(t){super(t),this.algorithm=ar.GZIP,this.$g=Yc(),this.DT=(i,r,o)=>{let c=this.$g(i,r);o(c)},this.compress=Xc(),typeof CompressionStream!="undefined"&&_v||(this.compress=this.DT,this.getCompressorSourceCode=()=>Yc.toString())}compressSync(t,e){return this.$g(t,e)}getCompressorSourceCode(){return Xc.toString()}}return s})();function Xc(){let s=n=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([n]))});return(n,t,e)=>{let i=new Response(n).body.pipeThrough(new CompressionStream("gzip")),r=new Response(i).arrayBuffer();if(t==="base64"){r.then(o=>s(o)).then(o=>e(o));return}r.then(o=>e(o))}}var kv=(()=>{class s extends Bl{constructor(){super(...arguments),this.algorithm=ar.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),gr=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!Ov.isCompressionEnabled()?new kv(t):this.instance=new Mv(t)}}return s})(),mr=["setEncryptionSelectors"],hn=["setPIISelectors"],yr=["setCapturedElementsSelector"],Dv=(()=>{class s{constructor(t,e,i,r,o,c,l){this.S=t,this.E=e,this.ht=i,this._e=r,this.Ft=o,this.ot=c,this.Dn=l}init(){var t,e;this.Dn&&this.ot&&((t=this.Dn)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ut()}onStartTracking(t){this._e.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this._e.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this._e.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this._e.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this._e.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}ut(){this.E.register(hn,t=>{this.ht.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(yr,t=>{this.Ft.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(mr,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Dn)===null||i===void 0||i.addSelector(t)})}}return s})(),xv="[data-cs-encrypt]",Cu=(()=>{class s{constructor(t,e=gr.create(x.warn)){this.ps=t,this.ye=e,this.to=xv}getEncryptionSelectors(){return this.to}setEncryptionSelectors(t,e=!0){let i=",";if(!NE(t)){if(e)throw new Error(`Command misuse: ${mr[0]}`);return}let r=csString.prototype.split.call(this.to,i),o=csString.prototype.split.call(t,i);for(let c of o)csArray.prototype.indexOf.call(r,c)===-1&&csArray.prototype.push.call(r,c);this.to=csArray.prototype.join.call(r,i)}shouldEncrypt(t){switch(t.nodeType){case 1:return!!((Ki(t)||Ji(t))&&Vt.call(t,this.to)&&t.type!=="password");case 8:case 3:{let e=t.parentElement;return!!(e&&ni(t)&&Vt.call(e,this.to))}default:return!1}}onEvent(t){this.L=t}onInputNodeToEncrypt(t){this.xT=t}onUserIdentifierToEncrypt(t){this.LT=t}onApiErrorToEncrypt(t){this.UT=t}async registerInputNodeToEncrypt(t){if(t.targetValue.length===0||!yt.isKeyImported())return this.Kh(t);try{let e=await this.Gg(t.targetValue);this.Kh(t,e)}catch{x.warn("Fail to encrypt input data - Input node processed as INPUT_TEXT"),this.Kh(t)}}async registerUserIdentifierToEncrypt(t){if(!(t.userIdentifier.length===0||!yt.isKeyImported()))try{let e=await this.Gg(t.userIdentifier);this.VT(t,e)}catch{x.warn("Fail to encrypt userIdentifier")}}async registerApiErrorToEncrypt(t){try{await this.jT(t)}catch{t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody="",t.requestBodyAttributes="",t.responseBodyAttributes=""}this.UT(t)}async jT(t){var e,i;if(!yt.isKeyImported())throw new Error("Key not imported");let r=await yt.generateSymmetricKey();if(!r)throw new Error("Key not initialized properly");let o=["customRequestHeaders","customResponseHeaders","requestBodyAttributes","responseBodyAttributes"];for(let l of o){let h=t[l];h&&h!==Y.ELLIPSIS&&(t[l]=(e=await yt.symmetricEncrypt(h,r))!==null&&e!==void 0?e:Y.ELLIPSIS)}let c=["queryParameters","requestBody","responseBody"];for(let l of c){let h=t[l];if(h&&h!==Y.ELLIPSIS){let p=this.ye.compressSync(h,"base64");t[l]=(i=await yt.symmetricEncrypt(p,r))!==null&&i!==void 0?i:Y.ELLIPSIS}}t.secret=await yt.encryptSecret(r.cryptoKey),t.initializationVector=ao(r.initializationVector),t.encryptionKeyId=this.ps.encryptionPublicKeyId}async Gg(t){let e=await yt.asymmetricEncrypt(t);if(!e)throw Error("Could not Encrypt data");return e}Kh(t,e){var i;let{targetId:r,targetValue:o,date:c}=t,l=null;e?l={date:c,args:[r,csString.prototype.replace.call(o,/\S/g,"\u2022"),e,this.ps.encryptionPublicKeyId],type:U.INPUT_ENCRYPTED_TEXT}:l={date:c,args:[r,csString.prototype.replace.call(o,/\S/g,"\u2022")],type:U.INPUT_TEXT},this.xT(l),(i=this.L)===null||i===void 0||i.call(this,l)}VT(t,e){var i;let r={type:U.USER_IDENTIFIER,args:[e,t.keyId],date:t.date};this.LT(r),(i=this.L)===null||i===void 0||i.call(this,r)}}return s})(),ga=(()=>{class s extends ht{constructor(t,e,i,r,o,c){super(),this.he=t,this.ht=e,this.Ft=i,this.Dn=r,this.xn=o,this.it=c}onStart(){var t,e,i;this.Ft.start(),this.he.setMaskedElementSettings(this.ht.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.he.startIdentifier(),(e=this.Dn)===null||e===void 0||e.start(),(i=this.xn)===null||i===void 0||i.start()}onStop(){var t,e;this.Ft.stop(),this.he.stopIdentifier(),(t=this.Dn)===null||t===void 0||t.stop(),(e=this.xn)===null||e===void 0||e.stop()}}return s})(),Lv=(()=>{class s{constructor(t,e,i,r,o){this.it=t,this.ht=e,this._e=i,this.Ft=r,this.ot=o}getSensitiveStatus(){var t,e;return{started:this._e.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Ft.getWhitelistedElementsSelector(),maskedElementSettings:this.ht.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this._e.isStarted,i=this.it.shouldUseAnonymization();return e?L.isMaskedElement(t)||L.isMaskedElementChild(t)?zt.MASKED:le.shouldEncrypt(t)?zt.ENCRYPTED:Te.isEditableNode(t)?zt.ANONYMIZED:i?Ee.isWhitelistedElement(t)?zt.CAPTURED:zt.ANONYMIZED:zt.CAPTURED:zt.ANONYMIZED}}return s})(),Uv=(()=>{class s{constructor(t){this.F=t}onAfterVisitorRenewal(){this.F.renewSession()}}return s})(),Vv=(()=>{let s;return function(n){n.URL="url"}(s||(s={})),s})(),Kc=(()=>{let s;return function(n){function t(u,y){for(let m of u)if(i(m,y))return!0;return!1}n.isUrlMatching=t;function e(u,y){if(T(y)){for(let m of u)if(i(m,y))return!0}else if(Ui(y)){for(let m of u)if(i(m,csString(y)))return!0}return!1}n.isMatching=e;function i(u,y){let m=r(u,y);return u.negate?!m:m}function r(u,y){switch(u.rule_type==="date"&&(u.match_operation==="less_than"||u.match_operation==="greater_than")&&(y=(new csDate(y).valueOf()/1e3).toFixed(0)),u.match_operation){case"exact":switch(u.rule_type){case"string":return T(u.pattern)?csString.prototype.toLowerCase.call(y)===csString.prototype.toLowerCase.call(u.pattern):!1;case"boolean":return y===u.pattern||y===csString(u.pattern);case"number":return pt(y)?Number(y)===Number(u.pattern):!1;default:return y===u.pattern}case"starts_with":return T(u.pattern)?csString.prototype.indexOf.call(y,u.pattern)===0:!1;case"ends_with":return T(u.pattern)?di(y,u.pattern):!1;case"contains":return T(u.pattern)?csString.prototype.indexOf.call(y,u.pattern)!==-1:!1;case"regex":if(!T(u.pattern))return!1;try{return new csRegExp(u.pattern).test(y)}catch(m){return x.warn(`targeting.matchOperation.regex invalid ${m==null?void 0:m.message}`),!1}case"simple":return T(u.pattern)?p(y)===p(u.pattern):!1;case"greater_than":return Number(y)>Number(u.pattern);case"less_than":return Number(y)<Number(u.pattern);case"exact_date":{let m=Number(u.pattern);if(!wt(m))return!1;let v=new csDate(m*1e3);return new csDate(y).toDateString()===v.toDateString()}case"exact_days_ago":return o(u,y);case"more_than_days_ago":return c(u,y);case"less_than_days_ago":return l(u,y);case"unknown":return h(y);default:return x.warn(`targeting.matchOperation.regex not managed operation ${u.match_operation}`),!1}}function o(u,y){let m=new csDate,v=m.setDate(m.getDate()-Number(u.pattern)),N=new csDate(v);return new csDate(y).toDateString()===N.toDateString()}function c(u,y){let m=Number(u.pattern);if(!wt(m))return!1;let v=Number(m)+1,N=new csDate,D=new csDate(N);return D.setDate(N.getDate()-v),new csDate(y).getTime()<=D.getTime()}function l(u,y){let m=Number(u.pattern);if(!wt(m))return!1;if(m===0)return o(u,y);let v=new csDate,N=new csDate(v);return N.setDate(v.getDate()-m),new csDate(y).getTime()>=N.getTime()}function h(u){return pt(u)?T(u)?csString.prototype.trim.call(u)==="":Ui(u)?u===!0:wt(u)?u!==0:!1:!0}function p(u){let y=Tt(u,"http://")||Tt(u,"https://")?u:`https://${u}`,m=Jo(y);return m!==null?csString.prototype.replace.call(m.host,/^www./,""):u}}(s||(s={})),s})(),Kr={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===Vv.URL},jv=(()=>{class s{constructor(){this.zg=new sn,this.qg=[],this.Wg=[]}setTargetingRules(t){this.zg.setRegexRules(csArray.prototype.filter.call(t,Kr.isURL));for(let e of t)Kr.isLegacyURL(e)?csArray.prototype.push.call(this.qg,e):Kr.isLegacyTrigger(e)&&csArray.prototype.push.call(this.Wg,e)}matchUrl(t){return Kc.isUrlMatching(this.qg,t)||this.zg.evaluateUrl(t)}matchTrigger(t){return Kc.isMatching(this.Wg,t)}}return s})(),Hv=(()=>{class s extends ht{constructor(t,e,i){super(),this.Wa=t,this.Jh=e,this.w=i}init(){this.Qh=new jv,this.Wa&&this.Qh.setTargetingRules(this.Wa)}onStart(){}checkInitialUrlTargetingRules(){let t=this.w.getAnonymizedUrl();this.Zh(t,"url")&&this.Jh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Zh(t,"url")&&this.Jh()}onExternalEvent(t){this.isStarted&&this.Zh(t.name,"trigger")&&this.Jh()}Zh(t,e){var i,r;return e==="url"&&T(t)&&(!((i=this.Qh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((r=this.Qh)===null||r===void 0)&&r.matchTrigger(t)))}}return s})(),Bv=(()=>{class s{constructor(t,e,i,r,o,c){this.Wa=t,this.HT=e,this.S=i,this._t=r,this.K=o,this.w=c}init(){this.eo=new Hv(this.Wa,this.HT,this.w),this.K.addListener(this.eo),this.eo.init()}start(){this.eo.start()}stop(){this.eo.stop()}checkInitialUrlTargetingRules(){this.eo.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this._t.getInitialCollectState();t===H.ANALYTICS_ONLY?this.S.emitCollectStateChange(H.ANALYTICS_ONLY_RULES_TARGETING,Kt.ETR_OFF):t===H.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(H.RECORDING_RULES_TARGETING,Kt.ETR_OFF)}}return s})(),Er=["networkRequest:maskUrls"],ma=["networkRequest:maskUrls:reset"],Fv=(()=>{class s{constructor(t,e){this.Yg=t,this.pt=e}init(){this.Yg.register(Er,t=>{if(T(t)){this.pt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)T(e)&&this.pt.addPartialUrlMaskingPattern(e)}),this.Yg.register(ma,()=>this.pt.resetPartialUrlMaskingPatterns())}}return s})(),Iu=":";function Jc(s){let n=[],t=$v(s),e=csString.prototype.split.call(t,"/");for(let i of e)Tt(i,Iu)?csArray.prototype.push.call(n,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(n,{key:i,value:null});return n}function $v(s){let n=s;return Tt(s,"/")&&(n=csString.prototype.substring.call(n,1)),di(s,"/")&&(n=csString.prototype.slice.call(n,0,-1)),n}var ya=(()=>{class s{constructor(){this.Xg=new Set,this.Kg=[],this.tu=new Set,this.eu=[]}addUrlMaskingPattern(t){if(this.Xg.has(t))return;this.Xg.add(t);let e=Jc(t);csArray.prototype.push.call(this.Kg,e)}getUrlMaskingPatterns(){return this.Kg}resetPartialUrlMaskingPatterns(){this.tu.clear(),this.eu=[]}addPartialUrlMaskingPattern(t){if(this.tu.has(t))return;this.tu.add(t);let e=Jc(t);csArray.prototype.push.call(this.eu,e)}getPartialUrlMaskingPatterns(){return this.eu}}return s})(),Gv=(()=>{class s extends ht{onStart(){this.BT()}onStop(){}register(t,e){let i=(...r)=>{try{e(...r)}catch(o){x.warn(`Misused Heap Command: ${t}; Args: ${csJSON.stringify(r)}; Error: ${qe(o)?o.stack:o}`)}};window.heap=window.heap||[],window.heap[t]=i}BT(){var t,e;!((t=window.heapReadyCb)===null||t===void 0)&&t.length?this.FT():!((e=window.heap)===null||e===void 0)&&e.length&&this.$T()}FT(){csArray.prototype.forEach.call(window.heapReadyCb,({name:t,fn:e})=>{window.heap[t]&&e()}),window.heapReadyCb.length=0}$T(){window.heap.forEach(([t,...e])=>{window.heap[t]&&window.heap[t](...e)}),window.heap.length=0}}return s})(),zv=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.R=i,this.Ze=I.now()}resetStartTime(){this.Ze=I.now()}getSessionData(){let{projectId:t}=this.f,e=this.O.getVisitor();e==null&&x.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:r}=e!=null?e:{},o=this.R.getSession();o===null&&x.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:r,pageNumber:c,relativeTimestamp:I.now()-this.Ze}}}return s})(),Pu=["clearSession"],Ou=["extendSession"];var qv=["getSessionData"],Nu=["session:start:newVisitor"],Wv=["session:clear:visitor"],Yv=(()=>{class s{constructor(t,e,i,r){this.f=t,this.O=e,this.R=i,this.E=r}init(){this.su=new zv(this.f,this.O,this.R),this.E.register(Pu,()=>this.R.removeSession()),this.E.register(Ou,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.E.register(qv,()=>this.su.getSessionData(),{disableApplyPending:!0}),this.E.register(Nu,()=>this.O.renewVisitor()),this.E.register(Wv,()=>{this.O.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.O.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.O.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.su.resetStartTime()}onAfterArtificialPageView(){this.su.resetStartTime()}onOptout(){this.O.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),Xv=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,y,m,v,N,D,w,S,C,k,_,F,Q,ot,jt,kt,b,V,j,$,gt,Ht,fe,xe,Es){this.St=t,this.zi=e,this.ye=i,this.O=r,this.R=o,this.F=c,this.Rs=l,this.S=h,this.E=p,this.iu=u,this.f=y,this.nu=m,this.ni=v,this.so=N,this.bt=D,this.M=w,this.Z=S,this.J=C,this.w=k,this.GT=_,this.K=F,this.lt=Q,this.wt=ot,this.Jg=jt,this.ie=kt,this.zT=b,this.I=V,this.Vt=j,this.N=$,this.Tt=gt,this._t=Ht,this.ht=fe,this.ve=xe,this.Ke=Es,this.qT=(Qt=!1)=>{let Wt=this.R.getSession();Wt===null?(this.Ln=new Bv(this.f.recordTargetingRules,this.Qg,this.S,this._t,this.K,this.w),this.Ln.init(),this.Ln.start()):(Wt.collectState===H.RECORDING_RULES_TARGETING||Wt.collectState===H.ANALYTICS_ONLY_RULES_TARGETING)&&this.Qg(Qt)},this.Qg=(Qt=!1)=>{this.Un.onLoad(()=>{var Wt,ve;(Wt=this.Ln)===null||Wt===void 0||Wt.emitTargetingCollectState(),(ve=this.Ln)===null||ve===void 0||ve.stop(),this.S.emitStartTracking(Qt)}),this.Ya(Qt)},this.Ya=(Qt=!1)=>{this.ni.isActive()||(this.ht.init(),this.ru.start(Qt),this.Un.start())},this.WT=()=>{this.S.emitBeforeSessionRenewal(),this.Vn(!0),this.S.emitAfterSessionRenewal()},this.YT=()=>{this.S.emitBeforeSessionRenewal(),this._t.refreshQuota(Qt=>{Qt!==H.QUOTA_REACHED&&(this.Vn(!0),this.S.emitAfterSessionRenewal())})}}start(){if(this.nu.init(),this.ni.init(),this.ni.isActive())return;let t,e,i,r,o,c,l,h,p,u,y,m,v,N,D,w,S,C,k;this.I.schedule(()=>{this.f.isCsCrosswritingHeap()&&(this.Sn=new Gv),D=new Uv(this.F),m=new ih(this.Z),v=new Yl(()=>{}),w=new Xl,k=new Kl,yt.isSupported()&&this.f.encryptionPublicKey&&this.f.encryptionPublicKeyId>0&&(S=new Cu(this.f),C=new Jl);let _=new ga(v,this.ht,w,C,k,this.ou());N=new Lv(this.ou(),this.ht,_,w,S);let F=new Dv(this.S,this.E,this.ht,_,w,S,C);F.init(),this.S.addListener(F),t=new $y(this.f,this.zi,this.O,this.Z,m,this.E,this.F,new th(x),this.lt,this.Vt,this.K,N,this.Sn),e=new vE(this.E,this.R,this.f,this.St,this.ye,this.M),y=new Iv(N,this.f);let Q=null;Q=new eh(this.f),u=new Pm(this.f,Q,y,N,this.lt),u.init();let ot=new qE;i=new UE(this.O,this.R,this.E,this.lt,Q,this.f,ot,y),r=new AE(this.f,this.zi,this.O,this.E,this.M,this.F,this.w),this.f.isCsCrosswritingHeap()&&(this.ve||(this.ve=new Kh),this.Zg=new zE(this.ve,this.E),this.S.addListener(this.Zg),this.Zg.init());let jt;this.f.isCsCrosswritingHeap()&&(this.tm=new km(this.E,this.Ke),this.S.addListener(this.tm),this.tm.init(),this.em=new $m(this.E,this.f,this.O,this.F),this.S.addListener(this.em),this.em.init()),this.ru=new eS(this.f,this.E,this.S,this.zi,this.O,this.R,this.Rs,this.bt,this.wt,this.w,this.ie,ot,this.K,this.ve,jt),this.sm=new Yv(this.f,this.O,this.R,this.E),l=new BE(this.f,this.E,this.ye,this.zi,this.K),h=new VE(this.E),p=new Mm,this.Un=new gh}),(this.f.apiErrors.enabled||this.f.isNetworkDetailsEnabled())&&this.I.schedule(()=>{this.pt=new ya,this.XT=new Fv(this.E,this.pt),this.XT.init()}),this.f.apiErrors.enabled&&this.I.schedule(()=>{var _,F;let Q=new Dh(this.f.apiErrors,this.M);this.ft=new Mh(new fh,new ph,Q),this.fe=new kh(this.pt,this.J,!!(!((F=(_=this.f)===null||_===void 0?void 0:_.experimental)===null||F===void 0)&&F.anonymizeNameInUrls)),this.Nn=new Yy;let ot=new qy(this.ft,this.fe,this.f,this.zi,this.lt,this.E,this.Vt);ot.init(),this.S.addListener(ot)}),this.f.customErrors.enabled&&this.I.schedule(()=>{var _,F,Q;let ot;!((_=this.f.customErrors.consoleMessageLogLevels)===null||_===void 0)&&_.length&&(ot=new Uh(this.f)),this.Ks=new Vh(this.M,!((Q=(F=this.f)===null||F===void 0?void 0:F.experimental)===null||Q===void 0)&&Q.anonymizeNameInUrls?this.J:void 0);let jt=new iE(this.Ks,this.f,this.zi,this.E,this.K,this.Vt,this.lt,ot);jt.init(),this.S.addListener(jt)}),this.f.jsErrorsEnabled&&this.I.schedule(()=>{this.Ts=new Hh,this.ge=new Bh(this.M,this.w);let _=new pE(this.Ts,this.ge,this.f,this.zi,this.lt,this.E,this.K,this.w,this.Vt);_.init(),this.S.addListener(_)}),this.I.schedule(()=>{this.so.init()}),this.I.schedule(()=>{i.init()}),this.I.schedule(()=>{e.init()}),this.I.schedule(()=>{r.init()}),this.I.schedule(()=>{this.Jg.init()}),this.I.schedule(()=>{this.ru.init()}),this.I.schedule(()=>{this.sm.init()}),this.I.schedule(()=>{l.init()}),this.I.schedule(()=>{this.GT.init()}),this.I.schedule(()=>{h.init()}),this.I.schedule(()=>{p.init()}),this.I.schedule(()=>{this.zT.init()}),this.I.schedule(()=>{this.S.addListener(this.sm),this.S.addListener(this.iu),this.S.addListener(t),this.S.addListener(this.so),this.S.addListener(i),this.S.addListener(r),this.S.addListener(this.Jg),this.S.addListener(this.ru),this.S.addListener(l),this.S.addListener(e),this.S.addListener(u),this.S.addListener(p),this.S.addListener(D)}),hi.isRecordingSupported()&&this.I.schedule(()=>{let _=new Cv(y,this.R,this.f,this.St,this.E,this.M,this.F,v,this.ge,this.ft,this.fe,this.pt,this.S,this.K,this.lt,this.ie,this.Vt,this.J,this.Nn,this.ou(),this.Ks,S);_.init(),this.S.addListener(_),i.setRecordingService(_.recordingService)}),this.I.schedule(()=>{var _;let F,Q}),this.I.schedule(()=>{t.init()}),this.I.schedule(()=>{this.f.isQuotaEnabled()?this.F.onSessionExpired(()=>{this.YT()}):this.F.onSessionExpired(()=>{this.WT()}),this.Vn()})}Vn(t=!1){var e,i,r;if(this.f.hasTargetingRules()){this.qT(t),this.E.start(),(e=this.Sn)===null||e===void 0||e.start(),this.Ln&&this.Ln.checkInitialUrlTargetingRules();return}this.E.start(),(i=this.Sn)===null||i===void 0||i.start(),this.Un.onLoad(()=>{this.S.emitStartTracking(t)}),(!sh(this.f)||t)&&this.Ya(t)}ou(){if(this.it)return this.it;let t=new sn;return this.it=new ta(this.f,this.w,t,this.bt),this.it.init(),this.it.shouldUseAnonymization()&&q.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})(),Kv=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.f=t,this.O=e,this.Xe=i,this.im=r,this.KT=o,this.JT=c,this.QT=l,this.au=h}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this.QT)===null||e===void 0||e.start(()=>this.lu(t)):(i=this.JT)===null||i===void 0||i.applyUpToDate(()=>this.lu(t)):this.lu(t)}lu(t){this.KT.handle(),this.im.clear(),this.ZT()?(this.im.restoreClearedVisitor(),t(!0)):(this.Xe.exclude(this.f),t(!1))}ZT(){let t=Oe.boolean(this.f.sampleRate);return this.au.isForceIncluded()||!this.Xe.isExcluded()&&this.O.doesVisitorExist()||!this.Xe.isExcluded()&&t}}return s})(),Jv=(()=>{class s{constructor(t,e,i,r){this.f=t,this.gt=e,this.S=i,this.R=r,this.t0=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.e0(),(t=this.R)===null||t===void 0||t.removeSession()),this.s0(e),this.setVisitor(e)}e0(){return{id:uh.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:qa(),lastVisitTimestamp:0,hitTimestamp:0,expires:I.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}s0(t){let e=qa();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.nm=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.gt.get()}setVisitor(t){this.gt.set(t)}doesVisitorExist(){return this.gt.get()!==null}resetVisitor(){this.rm(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.gt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.gt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.nm===void 0?!1:t.visitsCount!==this.nm}i0(){return!J(this.om)||I.now()-this.om>this.t0}renewVisitor(){this.i0()?(this.om=I.now(),this.rm(),this.S.emitAfterVisitorRenewal()):x.warn("session:start:newVisitor is trying to renew visitor under time limit")}rm(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),me="_cs_s",ir=18e5,Jr=".",Qv=13,Nn=(()=>{let s;return function(n){n[n.NOT_FOUND=0]="NOT_FOUND",n[n.EXPIRED=1]="EXPIRED",n[n.FOUND=2]="FOUND"}(s||(s={})),s})(),Zv=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i,this.ne=null,this.hu=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?ql(e):null}getRawSession(t){if(t){let p=this.du();return yo(p)}let{sessionString:e,status:i}=this.n0(),r=yo(e);if(i!==Nn.EXPIRED)return r;if(this.f.cookielessTrackingEnabled)return null;let o=this.du();if(!o)return null;let c=csString.prototype.split.call(o,Jr);if(!s.am(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.r0(h),r}onCookieToSet(t){this.Ei=t}onCookieToRemove(t){this.Si=t}set(t,e=ir){var i;let r=I.now()+e,o=Zg(t);o+=`${Jr}${r}`,this.o0(o,r),this.f.cookielessTrackingEnabled?this.X.setItem(me,o):(this.N.set(me,o,e),(i=this.Ei)===null||i===void 0||i.call(this,me,o,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(me):(this.N.delete(me),(t=this.Si)===null||t===void 0||t.call(this,me)),this.a0()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.N.delete(me,or.CURRENT_DOMAIN):this.N.delete(me,this.N.getRootDomain()),this.set(t))}isValid(t){return t!==null&&Zo(t)}o0(t,e){this.ne={sessionString:t,expires:e}}n0(){return this.ne?this.ne&&I.now()<=this.ne.expires?{sessionString:this.ne.sessionString,status:Nn.FOUND}:{sessionString:this.ne.sessionString,status:Nn.EXPIRED}:{sessionString:this.du(),status:Nn.NOT_FOUND}}a0(){this.ne=null}r0(t){this.ne&&(this.ne.expires=t,this.hu=!0)}isCacheRefreshed(){return this.hu}resetCacheRefreshed(){this.hu=!1}du(){if(this.f.cookielessTrackingEnabled){let e=this.X.getItem(me);return!e||this.cm(e)?null:e}let t=this.N.get(me);return!t||this.cm(t)?null:t}cm(t){let e=csString.prototype.split.call(t,Jr);if(!s.am(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&I.now()>i}static am(t){return t[t.length-1].length===Qv}}return s})(),Ea=60*1e3,tw=60*Ea,ew=4*tw-Ea,Ys=(()=>{let s;return function(n){n[n.NO=0]="NO",n[n.WITHDRAWN=1]="WITHDRAWN",n[n.GRANTED=2]="GRANTED"}(s||(s={})),s})(),sw=(()=>{class s{constructor(t,e,i,r,o){this.Le=t,this._t=e,this.S=i,this.c0=r,this.l0=o,this.io=null,this.pu=0,this.no=Ys.NO}setDynamicVariablesService(t){this.h0=t}createOrUpdateSession(){this.fu(),this.u0=I.now(),this.pu=0;let t=this.lm();t===null?(t=this.d0(),this.Xa(t),this.S.emitSessionCreated()):(t=this._t.sanitizeSessionCollectState(t),this.p0(t),t.collectState=this._t.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this._t.getInitialCollectState(),t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.no=Ys.GRANTED}withdrawnReplayRecording(t){t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.no=Ys.WITHDRAWN}Xa(t){this.no===Ys.WITHDRAWN?(t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)):this.no===Ys.GRANTED?t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this._t.computeInitialCollectState(t),this.no=Ys.NO}d0(){return{pageNumber:1,collectState:this._t.getInitialCollectState(),replayConsent:this.c0?mo.NOT_EXPRESSED:mo.UNNECESSARY,etrStatus:ae.ETR_NOT_SAVED_SESSION}}p0(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this._t.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===H.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Le.get()}lm(){return this.Le.get(!0)}doesSessionExist(){return this.Le.get()!==null}setSession(t){this.Le.set(t),this.S.emitSessionRefreshed()}refreshSession(){let t=this.lm();t&&this.setSession(t)}removeSession(){this.Le.remove(),this.S.emitSessionRemoved()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==H.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===H.RECORDING_RULES_TARGETING?H.RECORDING_GLOBAL_SAMPLING:t.collectState),this.l0&&csArray.prototype.push.call(e,H.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Le.getRawSession();return this.Le.isValid(t)}handleSubdomainChange(){this.Le.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Le.isCacheRefreshed();return e&&t&&this.Le.resetCacheRefreshed(),e}extendSessionPeriodically(){this.io||this.hm()}extendSession(){let t=this.getSession();return t===null?(x.warn("extendSession is trying to extend an expired session"),this.fu(),!1):(this.setSession(t),!0)}hm(){if(this.f0()){this.fu();return}this.extendSession()&&(this.g0(),this.m0())}m0(){this.io=window.csSetTimeout(()=>{this.hm()},ir-Ea)}f0(){return ew-(I.now()+ir-this.u0)<0}fu(){this.io&&(window.csClearTimeout(this.io),this.io=null)}g0(){this.pu+=1,this.h0.trackDynamicVariable("session_expiry_update",this.pu)}}return s})(),iw=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.Xe=i}clear(){this.y0()&&(this.um=this.O.getVisitor(),this.O.removeVisitor()),this.E0()&&this.Xe.removeExclusion()}y0(){return this.O.doesVisitorExist()&&this.O.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}E0(){return this.Xe.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.um&&this.O.setVisitor(this.um)}}return s})(),nw=(()=>{class s{constructor(t,e,i){this.O=t,this.R=e,this.S0=i}handle(){this.O.hasAllowSubdomainsChanged()&&(this.O.handleSubdomainChange(),this.R.handleSubdomainChange(),this.S0.handleSubdomainChange())}}return s})(),cs="_cs_c",Ts=(()=>{let s;return function(n){n[n.NOT_REQUIRED=0]="NOT_REQUIRED",n[n.NOT_EXPRESSED=1]="NOT_EXPRESSED",n[n.GRANTED=2]="GRANTED",n[n.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),rw=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.Tt=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.Tt.getItem(cs):t=this.N.get(cs),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.Tt.setItem(cs,csString(t)):this.N.set(cs,csString(t),jo)}remove(){this.f.cookielessTrackingEnabled?this.Tt.removeItem(cs):this.N.delete(cs)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.N.delete(cs,or.CURRENT_DOMAIN):this.N.delete(cs,this.N.getRootDomain()))}}return s})(),ow=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.S=i}grantReplayConsent(){if(!ds.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}ds.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!ds.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}ds.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),Mu=["replay:consent:unanonymized:granted","trackConsentGranted"],ku=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],Du=["replay:consent:startForSession:granted"],xu=["replay:consent:startForSession:withdrawn"],aw=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.E=e,this.bt=i,this.R=r,this.S=o}init(){this.dm=new ow(this.f,this.R,this.S),this.bt.setInitialConsent(),this.ut()}ut(){this.E.register(Mu,()=>{this.bt.grantReplayAnonymizationConsent()}),this.E.register(ku,()=>{this.bt.withdrawReplayAnonymizationConsent()}),this.E.register(Du,()=>{this.dm.grantReplayConsent()}),this.E.register(xu,()=>{this.dm.withdrawReplayConsent()})}onOptout(){this.bt.removeAllConsents()}onBeforeVisitorRenewal(){this.bt.removeAllConsents()}onAfterVisitorRenewal(){this.bt.setInitialConsent()}onAfterVisitorCleared(){this.bt.setInitialConsent()}}return s})(),cw=(()=>{class s{constructor(t,e,i){this.f=t,this.gt=e,this.S=i}setInitialConsent(){let t=this.gt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===Ts.NOT_REQUIRED||!e&&t!==Ts.NOT_REQUIRED}handleSubdomainChange(){this.gt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?Ts.NOT_EXPRESSED:Ts.NOT_REQUIRED;this.gt.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.gt.set(Ts.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.gt.set(Ts.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.gt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.gt.get()===Ts.GRANTED}getRequestParameters(){return{uc:`${this.gt.get()}`}}}return s})(),lw=(()=>{class s{constructor(t,e,i,r,o,c,l){this.S=t,this.E=e,this.iu=i,this.nu=r,this.ni=o,this.v0=c,this.so=l}start(){this.S.addListener(this.v0),this.S.addListener(this.so),this.S.addListener(this.iu),this.so.init(),this.nu.init(),this.ni.init(),!this.ni.isActive()&&this.E.start()}}return s})(),hw=(()=>{class s{constructor(t,e){this.Ot=t,this.gt=e}exclude(t){this.gt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.gt.remove()}isExcluded(){return this.w0()||this._0()}w0(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.gt.get()}_0(){return csString.prototype.indexOf.call(this.Ot.href,Be)>0}}return s})(),uw=(()=>{class s{constructor(t){this.xi=t}onOptout(){this.xi.removeExclusion()}}return s})(),Qr=(()=>{let s;return function(n){n.SessionReplay="SR",n.None=""}(s||(s={})),s})(),dw=".^",Lu=".*",Uu=(()=>{class s{constructor(t){this.w=t,this.gu=new csRegExp(`${dw}`)}setExcludeUrlForSessionReplay(t){try{this.gu=new csRegExp(t)}catch{x.warn(`excludeURLforReplay - invalid regex '${t}'`),this.gu=new csRegExp(`${Lu}`)}}pm(){return this.gu.test(this.w.getAnonymizedUrl())?Qr.SessionReplay:Qr.None}isUrlExcludedForSessionReplay(){return this.pm()===Qr.SessionReplay}getRequestParameters(){return{ex:this.pm()}}}return s})(),Vu=["excludeURLforReplay"],ju=(()=>{class s{constructor(t,e){this.xi=t,this.E=e}init(){this.E.register(Vu,t=>{if(T(t))this.xi.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),Zr="_cs_inc",pw=(()=>{class s{constructor(t,e){this.Ot=t,this.N=e}isForceIncluded(){return this.b0()||this.A0()}isForceReplayRecorded(){return this.T0(H.RECORDING_GLOBAL_SAMPLING)}b0(){return this.N.get(Zr)!==null}T0(t){return this.N.get(Zr)===t}A0(){return csString.prototype.indexOf.call(this.Ot.href,Zr)>0}}return s})(),Ni="_cs_optout",fw=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.Tt=i}get(){return this.f.cookielessTrackingEnabled?this.Tt.getItem(Ni):this.N.get(Ni)}set(t){this.f.cookielessTrackingEnabled?this.Tt.setItem(Ni,t):this.N.set(Ni,t,jo)}}return s})(),Qc="1",gw=(()=>{class s{constructor(t,e,i){this.S=t,this.Ot=e,this.gt=i}init(){!this.isActive()&&this.R0()&&this.activate()}isActive(){return this.gt.get()===Qc}activate(){this.S.emitOptout(),this.gt.set(Qc)}R0(){return csString.prototype.indexOf.call(this.Ot.href,Ni)>0}}return s})(),Sa=["optout"],Hu=["optin"],mw=(()=>{class s{constructor(t,e){this.E=t,this.ni=e}init(){this.E.register(Sa,()=>{this.ni.activate()})}}return s})();var yw=(()=>{class s{constructor(t,e){this.E=t,this.lt=e}init(){this.lt.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var Oo=(()=>{let s;return function(n){n.UXA="_uxa",n.WVT="cs_wvt"}(s||(s={})),s})(),Bu=(()=>{class s extends ht{constructor(t){super(),this.mu=t,this.us={}}register(t,e,i){for(let r of t){let o=(...c)=>{try{let l=e(...c);return q.counters.commandApplied.count(r),l}catch(l){q.counters.commandMisuse.count(r),x.warn(`Misused Command: ${r}; Args: ${csJSON.stringify(c)}; Error: ${qe(l)?l.stack:l}`)}};this.us[r]={callback:o,configuration:i},this.us}}onStart(){this.I0(),this.P0()}onStop(){for(let t of this.mu)window[t]=[]}applyFromIntegration(t,e,i){this.fm(t,e,`Commands.apply.from.integration: ${i}`),q.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.fm(t,e,`Commands.apply.from.implementation: ${i}`),q.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.O0(e.name,e.params,t.iframePath),q.counters.commandsFromIframe.count(e.name)}fm(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}x.tryToExecute(i,()=>{if(this.us[t])return this.us[t].callback(...e)})()}O0(t,e,i){x.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.us[t])return this.us[t].callback(...e)})()}I0(){for(let t of this.mu)window[t].forEach(([e,...i])=>this.gm(e,i,!1))}P0(){for(let t of this.mu)window[t]={push:([e,...i])=>this.gm(e,i,!0)}}gm(t,e,i){var r,o;if(this.us[t]){if(((r=this.us[t].configuration)===null||r===void 0?void 0:r.disableApplyPending)&&!i||((o=this.us[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.us[t].callback(...e)}catch(l){q.counters.commandError.count(t),x.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var Zc=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.O=e,this.R=i,this.Tm=r,this.ci=o}getRequestParameters(){var t;let e={...Ko(),...this.f.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let r=this.O.getVisitor();if(r&&(e.sn=`${r.visitsCount}`,e.uu=`${r.id}`),!((t=this.Tm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Tm.getSubProjectId()}`),this.L0(e),window.heap&&!this.f.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}L0(t){if(!this.ci)return;let e=this.ci.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})(),Ew=(()=>{class s{constructor(t,e){this.E=t,this.ps=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.ps.updateDynamicFields("emitDebugEvents",t)})}}return s})();function tl(s,n,t){if(!J(n)&&!J(t))return s.href;let e=J(n)?Fu(n):s.pathname,i=J(t)?$u(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function Fu(s){return Tt(s,"/")?s:`/${s}`}function $u(s){return Tt(s,"?")||s===""?s:`?${s}`}var to=(()=>{let s;return function(n){n[n.page=1]="page",n[n.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),Gu=(()=>{class s{constructor(t,e){this.Ot=t,this.J=e,this.U0=10}overridePath(t,e){if(t===""){this.Hn=void 0;return}let i=this.Rm(e);i&&(this.Su=i),this.Hn=e?this.Cm(t,e):t}overrideQuery(t,e){let i=this.Rm(e);i&&(this.vu=i),this.oo=e?this.Cm(t,e):t}computeOverriddenUrl(t){return this.V0(t)?this.getAnonymizedUrl():t}j0(t){return(typeof t=="string"||typeof t=="number")&&t in to}V0(t){let e=this.ko(this.Ot.href);return this.ko(t)===e}ko(t){return cg(t,"/")?csString.prototype.slice.call(t,0,-1):t}Rm(t){return J(t==null?void 0:t.lifespan)&&this.j0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}H0(){return this.Su&&this.Su in to}B0(){return this.vu&&this.vu in to}cleanupOverrideLifespan(){this.H0()&&(this.Hn=void 0,this.Su=void 0),this.B0()&&(this.oo=void 0,this.vu=void 0)}getAnonymizedUrl(){let t=tl(this.Ot,this.Hn,this.oo);return this.J.anonymizeUrl(t)}getUrl(){return tl(this.Ot,this.Hn,this.oo)}getAnonymizedPathAndQuery(){let t=J(this.Hn)?Fu(this.Hn):this.Ot.pathname,e=J(this.oo)?$u(this.oo):this.Ot.search;return this.J.anonymizeUrl(t+e)}getUrlProtocol(){return this.Ot.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Cm(t,e){return this.F0(e)?this.$0(t):this.G0(e)?this.z0(t):t}G0(t){return!!t.decodeURI}z0(t){return this.Im(t,1,!1)}F0(t){return!!t.decodeURIDeep}$0(t){return this.Im(t,this.U0,!0)}Im(t,e,i){let r=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(r);if(c===r)return r;r=c}catch{return r}return i&&x.warn(`decodeURIDeep limit reached: ${r}`),r}}return s})(),Sr=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),Sw=(()=>{class s extends Sr{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),Li="|iframe|",zu=(()=>{class s extends Sr{constructor(t,e,i,r){super(),this.q0=t,this.W0=e,this.Y0=i,this.X0=r}emitIframeEvent(t,e,i){if(this.K0(e)&&t===null){x.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case P.ChildLogMessage:this.J0(i);break;case P.AnalysisEvent:{let r=i,o=this.q0.transformEvent(t,r);o.isUserEvent?this.Q0(o.event):this.Z0(o.event);break}case P.RecordingEvent:{let r=i,o=this.X0.transformEvents(t,r);if(o.events.length===0)return;o.containsUserEvent?this.tR(o.events):this.eR(o.events);break}case P.JavascriptError:this.sR(i);break;case P.ApiError:this.iR(i);break;case P.DetailedApiError:this.nR(i);break;case P.CustomError:this.rR(i);break;case P.EmerchandisingMessage:{let r=this.Y0.transformEvent(t,i);this.oR(r);break}case P.Commands:{let r=this.W0.transformEvent(t,i);this.aR(r);break}case P.IntegrationCallback:this.cR(i);break;case P.StaticResource:this.lR(i);break;case P.TrackingContextRequestMessage:this.hR(i);break;default:x.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}K0(t){let e=[P.AnalysisEvent,P.RecordingEvent,P.EmerchandisingMessage,P.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}J0(t){let{message:e,errorCode:i,level:r}=t;switch(r){case ut.debug:x.debug(e,i);break;case ut.warn:x.warn(e,!0,i);break;case ut.implementation:x.implementation(e,i);break;case ut.error:x.error(e,i);break;case ut.critical:x.critical(e,i);break}}Q0(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}Z0(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}tR(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}eR(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}sR(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}iR(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}nR(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}oR(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}aR(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}cR(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}lR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}hR(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}rR(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),vw=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),vr=["setCustomVariable"],ww=(()=>{class s{constructor(t,e){this.E=t,this.wt=e}init(){this.E.register(vr,(t,e,i,r)=>{this.wt.set(t,e,i,r)})}onAfterArtificialPageView(){this.wt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.wt.deleteNextPageOnlyCustomVariables()}onOptout(){this.wt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.wt.removeCustomVariablesSession(),this.wt.removeCustomVariablesPage()}}return s})(),el=512,sl=255,eo={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},_w=(()=>{class s{constructor(t,e){this.M=t,this.gt=e,this.Yt={},this.Be={}}set(t,e,i,r){let o,c;if((wt(t)||T(t))&&Number(t)>0&&pt(e)&&pt(i)&&!$t(e)&&!$t(i)&&this.uR(r)){let l=this.M.anonymizePII(csString(e)),h=this.M.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,el),csString.prototype.slice.call(h,0,sl)],c=i!=="",!J(r)||csArray.prototype.indexOf.call(eo.SESSION,r)>=0){let p=this.getCustomVariablesSession();c?p[t]=o:delete p[t],this.setCustomVariableSession(p)}(!J(r)||csArray.prototype.indexOf.call(eo.PAGE,r)>=0)&&(c?this.Yt[t]=o:delete this.Yt[t]),J(r)&&csArray.prototype.indexOf.call(eo.NEXT_PAGE_ONLY,r)>=0&&(c?this.Be[t]=o:delete this.Be[t])}else throw new Error(`Command misuse: ${vr[0]}`)}getCustomVariablesSession(){let t=this.gt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Jt(e)?e:{}}setCustomVariableSession(t){this.gt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.gt.remove()}removeCustomVariablesPage(){this.Yt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Be)this.Be.hasOwnProperty(i)&&(this.Yt[i]=this.Be[i]);for(let i in this.Yt)this.Yt.hasOwnProperty(i)&&(t[i]=this.Yt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.Pm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Be).length>0)for(let t in this.Be)this.Be[t]===this.Yt[t]&&(delete this.Yt[t],delete this.Be[t])}hasCustomVariablesPage(){return this.Yt&&!oo(this.Yt)}getCustomVariablesPage(){return this.Pm(this.Yt)}Om(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),r=t[e],o=r[0],c=r[1];(!Bp(i,1,20)||o.length>el||c.length>sl)&&delete t[e]}}Pm(t){this.Om(t);let e=oo(t)?[]:t;return window.csJSON.stringify(e)}uR(t){return!J(t)||T(t)||wt(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Be)this.Be.hasOwnProperty(e)&&(this.Yt[e]=this.Be[e]);for(let e in this.Yt)this.Yt.hasOwnProperty(e)&&(t[e]=this.Yt[e]);return this.Om(t),t}}return s})(),be="_cs_id",bw=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.Ei=t}onCookieToRemove(t){this.Si=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.X.getItem(be):t=this.N.get(be),t?(Yg(t)||x.warn(`Invalid visitor string: ${t}`),qg(t)):null}set(t){var e;let i=Wg(t);if(this.f.cookielessTrackingEnabled)this.X.setItem(be,i);else{let r=new csDate(t.expires);this.N.set(be,i,r),(e=this.Ei)===null||e===void 0||e.call(this,be,i,r)}}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(be):(this.N.delete(be),(t=this.Si)===null||t===void 0||t.call(this,be))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.N.delete(be,or.CURRENT_DOMAIN):this.N.delete(be,this.N.getRootDomain()),this.set(t))}}return s})(),Aw=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],Tw=1024,Rw=1024,qu=(()=>{class s{constructor(t,e){this.mt=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=Mt(t),r={isNodeSensitive(o){return L.isMaskedElement(o)||L.isMaskedElementChild(o)},isAttributeSensitive(o,c){return L.isMaskedAttribute(o,c)},allWhitelistedAttributes:Dl(this.f.whitelistedAttributes),attributeIgnoreTokens:Aw,useAnonymization:e,attrMaxLength:Rw,hierarchyMaxLength:Tw};return this.mt.getElementPathAndHierarchy(i,r,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=Mt(t);return this.mt.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=Mt(t),{path:i,firstAnchorParent:r}=this.mt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),o=this.dR(r)?r.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=Mt(t);return this.mt.isValidElement(e)}getElementPath(t){return this.mt.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}dR(t){var e;return t!==null&&t.hasAttribute("href")&&!Xn((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),Wu=(()=>{class s{constructor(t,e){this.Z=t,this.pR=e}transformEvent(t,e){this.fR(t,e.event);let i=this.Z.getElementPath(t);return this.gR(i,e.event),e}fR(t,e){if(gy(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+bt.windowOffsetX()),e.y=Math.round(i.top+e.y+bt.windowOffsetY())}}gR(t,e){mh(e)&&(e.tgt=`${t}${Li}${e.tgt}`),py(e)&&(e.tgtHM=`${t}${Li}${e.tgtHM}`,this.pR||(e.tgtHMH=Ch(e.tgtHM))),fy(e)&&(e.tgtLk=`${t}${Li}${e.tgtLk}`)}}return s})(),Yu=(()=>{class s{constructor(t){this.Z=t}transformEvent(t,e){let i=this.Z.getElementPath(t);return{iframePath:e.iframePath?`${i}${Li}${e.iframePath}`:i,commands:e.commands}}}return s})(),Xu=(()=>{class s{constructor(t){this.Z=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Z.getElementPath(t),r=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${Li}${o.targetPath}`}));return{...e,products:r}}}return s})(),Ku=(()=>{class s{constructor(){this.mR={clientX:2,clientY:3},this.yR={clientX:1,clientY:2},this.ER=[U.POINTER_DOWN,U.POINTER_MOVE,U.POINTER_UP],this.SR=[U.TOUCH_START,U.TOUCH_MOVE,U.TOUCH_END]}transformEvents(t,e){if(!lt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==U.VISIBILITY_CHANGE),e.events.length===0||(x.warn(`IframeRecordingEventsTransformer received event ${P.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=ct(t),r=null;csArray.prototype.some.call(e.events,c=>this.Nm(c)||this.Mm(c))&&(r=t.getBoundingClientRect());for(let c of e.events)this.Nm(c)?this.vR(r,c):this.Mm(c)&&this.wR(r,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}wR(t,e){this.km(this.yR,t,e)}vR(t,e){this.km(this.mR,t,e)}km(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}Nm(t){return csArray.prototype.indexOf.call(this.ER,t.type)!==-1}Mm(t){return csArray.prototype.indexOf.call(this.SR,t.type)!==-1}}return s})(),Cw=(()=>{class s{constructor(t){this.wu=t}start(){this.wu.onEvent(t=>this.Q(t)),this.wu.start()}stop(){this.wu.stop()}Q(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;x.warn(e)}}return s})(),Iw=(()=>{class s{constructor(){this.Gt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){Et(this.Gt)}stop(){St(this.Gt)}onEvent(t){this.L=t}_R(t){if(!t)return!1;let e=t.disposition;return T(t.sourceFile)&&csArray.prototype.some.call(s.bR,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this._R(t)&&this.L({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.bR=["contentsquare","cdnssl.clicktale.net"],B([O("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),Pw=(()=>{class s{init(){this.Dm=new Cw(new Iw),this.Dm.start()}onOptout(){this.Dm.stop()}}return s})();var il=1/0,{toString:Ow}=Object.prototype;function Nw(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Ow.call(s)}var va=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&Nw(s)==="[object Symbol]";function Ju(s){if(typeof s=="string"||va(s))return s;let n=`${s}`;return typeof s=="number"?n==="0"&&1/s===-il?"-0":n:s instanceof Number&&n==="0"&&1/s.valueOf()===-il?"-0":n}var Mw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kw=/^\w*$/;function Dw(s,n){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||va(s)?!0:kw.test(s)||!Mw.test(s)||n!=null&&s in Object(n)}function wa(s,n){if(typeof s!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");let t=function(...e){let i=n?n.apply(this,e):e[0],{cache:r}=t;if(r.has(i))return r.get(i);let o=s.apply(this,e);return t.cache=r.set(i,o)||r,o};return t.cache=new(wa.Cache||Map),t}wa.Cache=Map;var xw=500;function Lw(s){let n=wa(s,t=>{let{cache:e}=n;return e.size===xw&&e.clear(),t});return n}var Uw=46,Vw=/\\(\\)?/g,jw=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Qu=Lw(s=>{let n=[];return csString.prototype.charCodeAt.call(s,0)===Uw&&csArray.prototype.push.call(n,""),csString.prototype.replace.call(s,jw,(t,e,i,r)=>{let o=t;return i?o=csString.prototype.replace.call(r,Vw,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(n,o),t}),n});function Hw(s,n){return csArray.isArray(s)?s:Dw(s,n)?[s]:Qu(s)}function Bw(s,n){let t=Hw(n,s),e=s,i=0,{length:r}=t;for(;e!=null&&i<r;){let o=Ju(t[i]);e=e[o],i+=1}return i&&i===r?e:void 0}function Fw(s){return"iterable"in s}function Zu(s){return J(s.iterable)?T(s.iterable)||s.iterable===null:!0}function td(s,n,t){let e=s==null?void 0:Bw(s,n);return e===void 0?t:e}var $w=/\b__p \+= '';/g,Gw=/\b(__p \+=) '' \+/g,zw=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qw=/['\n\r\u2028\u2029\\]/g,ed=/[&<>"']/g,Ww=csRegExp(ed.source),Yw=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mn=/($^)/,Xw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kw=/[()=,{}[\]/\s]/,Jw=/<%-([\s\S]+?)%>/g,Qw=/<%([\s\S]+?)%>/g,sd=/<%=([\s\S]+?)%>/g,{hasOwnProperty:nl}=Object.prototype,Zw="Invalid `variable` option passed into `_.template`";function t_(s){return`\\${Xw[s]}`}var e_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},s_={escape:Jw,evaluate:Qw,interpolate:sd,variable:"",imports:{_:{template:jn,escape(s){return s&&Ww.test(s)?csString.prototype.replace.call(s,ed,n=>e_[n]):s!=null?s:""}}}};function jn(s,n){let t={...s_,...n},e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,v=>t==null?void 0:t.imports[v]),r,o,c=0,l=t.interpolate||Mn,h="__p += '",p=csRegExp(`${(t.escape||Mn).source}|${l.source}|${(l===sd?Yw:Mn).source}|${(t.evaluate||Mn).source}|$`,"g"),u=`//# sourceURL=${nl.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,p,(v,N,D,w,S,C)=>{let k=D||w;return h+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,C),qw,t_),N&&(r=!0,h+=`' +
__e(${N}) +
'`),S&&(o=!0,h+=`';
${S};
__p += '`),k&&(h+=`' +
((__t = (${k})) == null ? '' : __t) +
'`),c=C+v.length,v}),h+=`';
`;let y=nl.call(t,"variable")&&t.variable;if(!y)h=`with (obj) {
${h}
}
`;else if(Kw.test(y))throw new Error(Zw);h=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(h,$w,""):h,Gw,"$1"),zw,"$1;"),h=`function(${y||"obj"}) {
${y?"":`obj || (obj = {});
`}var __t, __p = ''${r?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${h}return __p
}`;let m;try{m=Function(...e,`${u}return ${h}`)(...i)}catch(v){m=v}if(m.source=h,m instanceof Error)throw m;return m}var i_=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,n_=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,r_=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function rl(s){if(!i_.test(s)||n_.test(s))throw new Error("whitelisted function is wrongly used")}var ol={"window.location.hash.replace(":(s,n)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return rl(t),jn(`\${${s}}`)(n)},"window.sessionStorage.getItem(":(s,n)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return rl(t),jn(`\${${s}}`)(n)},"document.querySelector(":(s,n)=>{if(r_.test(s))return jn(`\${${s}}`)(n)},"new Date().getTime()":(s,n)=>new csDate().getTime().toString()};function o_(s){let n=Re(Object.keys(ol),t=>Tt(s,t));if(n)return ol[n]}function a_(s){return Tt(s,"'")&&di(s,"'")}var c_=/\$\{([\s\S]+?)\}/g,l_=s=>(n,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),r=>{let o=csString.prototype.trim.call(r),c=td(s,o);if(c===void 0)if(a_(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=o_(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function ui(s,n){try{return csString.prototype.replace.call(s,c_,l_(n))}catch{return null}}function No(s,n){let t={};for(let e of Object.keys(s)){let i=s[e];if(T(i)){let r=ui(i,n);if(r===null)return null;t[e]=r}else t[e]=i}return t}function Mo(s,n){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>ui(e,n)),e=>e!==null&&Pt(e)),",");return Pt(t)?t:null}function h_(s){return csArray.isArray(s)?csArray.prototype.map.call(s,Ju):va(s)?[s]:csArray.from(Qu(s))}function u_(s,n){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],r=e[2],o=td(n,h_(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let h=o[l];typeof h=="object"&&h!==null&&!csArray.isArray(h)&&r in h&&csArray.prototype.push.call(c,h)}),c}catch{return null}}function d_(s,n){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),r=parseInt(e[2],10);return r<=i||r>n.length?null:csArray.prototype.slice.call(n,i,r)}function p_(s,n){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=u_(csString.prototype.trim.call(t[0]),n);return t.length===2?e===null?null:d_(csString.prototype.trim.call(t[1]),e):e}var so=(()=>{let s;return function(n){n.AND="AND",n.OR="OR"}(s||(s={})),s})(),ye=(()=>{let s;return function(n){n.STARTS_WITH="startsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.MATCHES="matches",n.NOT_MATCHES="notMatches",n.EXIST="exist",n.NOT_EXIST="notExist"}(s||(s={})),s})();function id(s,n){return f_(s.operator,E_(s.args,n))}function f_(s,n){switch(s){case ye.EXIST:case ye.NOT_EXIST:return g_(s,n);default:return m_(s,n)}}function g_(s,n){let[t]=n;if(!Pt(t))return!1;switch(s){case ye.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case ye.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function m_(s,n){let[t,e]=n;if(!(s in so)&&!(T(t)&&T(e)))return!1;switch(s){case so.AND:return!!csArray.prototype.reduce.call(n,(r,o)=>r&&o);case so.OR:return!!csArray.prototype.reduce.call(n,(r,o)=>r||o);case ye.STARTS_WITH:return Tt(t,e);case ye.EQUALS:return t===e;case ye.NOT_EQUALS:return t!==e;case ye.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case ye.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case ye.MATCHES:{let r=al(e);return r!==null&&r.test(t)}case ye.NOT_MATCHES:{let r=al(e);return r!==null&&!r.test(t)}default:return!1}}function y_(s){return!!(s&&s.operator&&s.args)}function E_(s,n){return csArray.prototype.map.call(s,t=>y_(t)?id(t,n):T(t)?ui(t,n):t)}function al(s){let n=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(n){let[,e,i]=n;try{t=new csRegExp(e,i)}catch{}}else try{t=new csRegExp(s)}catch{}return t}function _a(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function ba(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var Rt=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),un=(()=>{class s extends Rt{}return s})(),nd=(()=>{class s extends Rt{validateArgs(t){if(K(t)){let e=J(t.path)?T(t.path):!0,i=J(t.decodeURI)?T(t.decodeURI):!0,r=J(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&r}return!1}execute(t){if(!t.path)this.ao([]);else{let e=[t.path],i=_a(t.decodeURI),r=ba(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.ao(e)}}ao(t){this.commandsService.applyFromImplementation(pr[0],t,"ArtificialPageviewTemplate")}}return s})(),S_=(()=>{class s extends un{validateArgs(t){return K(t)?T(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=ui(t.message,e);if(!i)return;let r={};for(let o of t.attributes){let c=ui(o.value,e);c!==null&&(r[o.key]=c)}this.commandsService.applyFromImplementation(js[0],[i,r],"CustomErrorTemplate")}}return s})(),v_=(()=>{class s extends Rt{validateArgs(t){if(K(t)){let e=Zu(t),i=csArray.isArray(t.scope)?$o(t.scope,r=>T(r)):!0;return e&&i&&wt(t.index)&&T(t.name)&&T(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(vr[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),w_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(mr[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),__="data-cs-override-id",b_=(()=>{class s extends Rt{validateArgs(t){if(K(t)){let e=pt(t.value)?T(t.value):!0;return T(t.selector)&&e}return!1}execute(t){var e;if(!Pt(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute(__,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),A_=20,T_=(()=>{class s extends un{validateArgs(t){return K(t)?Zu(t)&&T(t.key)&&T(t.value)&&T(t.type):!1}execute(t,e){let i=No(t,e);i!==null?this.ao(i):this.TR(t,e)()}TR(t,e){return()=>{let i=0,r=window.csSetInterval(()=>{i+=1;let o=No(t,e);if(o!==null){window.csClearInterval(r),r=void 0,i=0,this.ao(o);return}i>=A_&&(window.csClearInterval(r),r=void 0,i=0)},100)}}ao(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(an[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),R_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.transactionId)&&wt(t.revenue)&&T(t.currency)&&T(t.name)&&T(t.sku)&&T(t.category)&&wt(t.price)&&wt(t.quantity):!1}execute(t){this.RR({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.CR({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.Ja()}RR(t){this.commandsService.applyFromImplementation(cn[0],[t],"EcTransactionAllTemplate")}CR(t){this.commandsService.applyFromImplementation(mi[0],[t],"EcTransactionAllTemplate")}Ja(){this.commandsService.applyFromImplementation(ln[0],[],"EcTransactionAllTemplate")}}return s})(),C_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.id)&&wt(t.revenue)&&T(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(cn[0],[t],"EcTransactionCreateTemplate")}}return s})(),I_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.id)&&T(t.name)&&T(t.sku)&&T(t.category)&&wt(t.price)&&wt(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(mi[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),P_=(()=>{class s extends Rt{validateArgs(t){return!!K(t)}execute(){this.commandsService.applyFromImplementation(ln[0],[],"EcTransactionSendTemplate")}}return s})(),O_=(()=>{class s extends un{validateArgs(t){return K(t)?pt(t)&&T(t.selector):!1}execute(t,e){if(!pt(t)||!T(t==null?void 0:t.selector))return;let i=Mo(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(yr[0],[i],"ElementUnmaskingTemplate")}}return s})(),N_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(yi[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),M_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(yi[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),k_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(dr[0],[t.eventName],"PageEventTemplate")}}return s})(),D_=(()=>{class s extends un{validateArgs(t){if(K(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>Mo(c,e)),c=>!!c),r=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=ui(c.attrName,e),h=Mo(c.selector,e);return{attrName:l,selector:h}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...r]};this.commandsService.applyFromImplementation(hn[0],[o],"PIIMaskingTemplate")}}return s})(),x_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(yi[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),L_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.path):!1}execute(t){let e=[t.path],i=_a(t.decodeURI),r=ba(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(er[0],e,"SetPathTemplate")}}return s})(),U_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.query):!1}execute(t){let e=[t.query],i=_a(t.decodeURI),r=ba(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(sr[0],e,"SetQueryTemplate")}}return s})(),V_=(()=>{class s extends Rt{validateArgs(t){return!!K(t)}execute(){this.commandsService.applyFromImplementation(fa[0],[],"SrmOnlineAssetsTemplate")}}return s})(),j_=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.status)&&T(t.selector):!1}execute(t){if(!Pt(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(ca[0],[t.status,e],"SubmitTemplate")}}return s})(),ie=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i){this.commandsService=t,this.condition=i,this.isStarted=!1,this.xm=!1,this.args=e}start(){this.xm||(this.onInit(),this.xm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return B([O()],s.prototype,"start",null),B([O()],s.prototype,"stop",null),s})(),cl="once per pageview",H_="always",B_=(()=>{class s extends ie{constructor(){super(...arguments),this.vt=!0}validateArgs(t){if(K(t)){let e=T(t.selector),i=t.frequency?t.frequency===cl||t.frequency===H_:!0;return e&&i}return!1}onInit(){if(!Pt(this.args.selector)){this.vt=!1;return}this.co=this.args.frequency?this.args.frequency===cl:!0,this.z=new de((t,e)=>this.A(t,e))}onStart(){this.vt&&this.z.observe(this.args.selector)}onStop(){this.vt&&(this.z.processPendingMutations(),this.z.disconnect())}A(t,e){e==="added"&&(this.co?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),F_=(()=>{class s extends ie{constructor(){super(...arguments),this.vt=!0,this.Lm=!1}validateArgs(t){return K(t)?T(t.selector):!1}onInit(){if(!Pt(this.args.selector)){this.vt=!1;return}this.z=new de((t,e)=>{this.A(t,e)})}onStart(){this.vt&&(this.z.observe(this.args.selector),this.Lm=!0)}onStop(){this.vt&&(this.z.processPendingMutations(),this.z.disconnect())}A(t,e){this.Lm?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),$_=(()=>{class s extends ie{constructor(){super(...arguments),this.vt=!0}validateArgs(t){return K(t)?T(t.selector):!1}onInit(){if(!Pt(this.args.selector)){this.vt=!1;return}this.B=new de(t=>this.IR(t)),this.D=new se(t=>this.PR(t))}onStart(){this.vt&&(this.Qa=csSymbol("MatchingElement"),this.B.observe(this.args.selector),this.D.observe())}onStop(){this.vt&&(this.B.processPendingMutations(),this.B.disconnect(),this.D.disconnect())}IR(t){new Set(t).forEach(e=>this.NR(e))}PR(t){let e=Fo(t,r=>r.removedNodes),i=[];for(let r of e)csArray.prototype.push.call(i,...this.MR(r));new Set(i).forEach(r=>this.onEventCallback({element:r}))}NR(t){t[this.Qa]=!0}MR(t){let e=[];return Ut(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.Qa]&&(lt.isConnected(i)?Vt.call(i,this.args.selector)||delete i[this.Qa]:delete i[this.Qa],csArray.prototype.push.call(e,i))}),e}}return s})(),G_=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(De(s.callbacks),e=>e(t))}static Rh(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&Et(s.eventHandler,!1))}static Ch(t){s.callbacks.delete(t),s.callbacks.size===0&&St(s.eventHandler,!1)}constructor(t){this.A=t}observe(){s.Rh(this.A)}disconnect(){s.Ch(this.A)}}return s.callbacks=new Set,s.eventHandler={boundElement:st.document,type:"readystatechange",listener:s.readyStateChangeListener},it([O("readyStateChangeListener"),mt()],s,"readyStateChangeListener",null),s})(),z_=(()=>{class s extends ie{constructor(){super(...arguments),this.bu={state:"Any"}}validateArgs(t){var e;return K(t)&&T(t.state)||(x.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this.bu),!0}onInit(){this.Pt=this.args.state.toLowerCase(),this.z=new G_(()=>{this.Um(this.Pt,document.readyState)&&(this.onEventCallback(),this.z.disconnect())})}onStart(){this.Um(this.Pt,document.readyState)?this.onEventCallback():this.z.observe()}onStop(){this.z.disconnect()}Um(t,e){let i=s.Vm[e];return s.Vm[t]<=i}}return s.Vm={complete:3,interactive:2,loading:1,any:0},s})(),q_=(()=>{class s extends ie{validateArgs(t){return!!K(t)}kR(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(ur[0],[()=>this.kR()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),W_=(()=>{class s extends ie{constructor(){super(...arguments),this.Au=!1,this.vt=!0,this.Qs=!0,this.li={boundElement:document,type:"click",listener:t=>{if(this.Au){this.Au=!1;return}this.onClickOrTap(t)}},this.DR=(t,e)=>{t.type===It.TAP&&(this.Au=!0,this.onClickOrTap(e))}}validateArgs(t){return K(t)?T(t.selector):!1}onClickOrTap({target:t}){if(pt(t)&&ze(t)){let e=ci(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!Pt(this.args.selector)){this.vt=!1;return}this.Br=new hu(this.DR)}onStart(){var t;this.vt&&(Et(this.li,this.Qs),(t=this.Br)===null||t===void 0||t.observe())}onStop(){var t;this.vt&&(St(this.li,this.Qs),(t=this.Br)===null||t===void 0||t.disconnect())}}return B([O("onClickOrTap"),mt()],s.prototype,"onClickOrTap",null),s})(),Y_=(()=>{class s{static xR(){var t,e,i,r;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((r=o.replaceState)===null||r===void 0)&&r.writable))return History.prototype}nt.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static nl(){let t=s.xR();s.lo===null&&$t(t==null?void 0:t.pushState)&&(s.lo=Xt({target:t,methodName:"pushState",hook:({args:e})=>{s.jm("pushstate",e)}})),s.ho===null&&$t(t==null?void 0:t.replaceState)&&(s.ho=Xt({target:t,methodName:"replaceState",hook:({args:e})=>{s.jm("replacestate",e)}}))}static Jn(t){var e,i;s.Te.add(t),s.Te.size===1&&((s.lo===null||s.ho===null)&&s.nl(),(e=s.lo)===null||e===void 0||e.activate(),(i=s.ho)===null||i===void 0||i.activate(),Et(s.Hm),Et(s.Bm))}static Zn(t){var e,i;s.Te.delete(t),s.Te.size===0&&((e=s.lo)===null||e===void 0||e.deactivate(),(i=s.ho)===null||i===void 0||i.deactivate(),St(s.Hm),St(s.Bm))}static jm(t,e){let i={type:t,state:e[0]};T(e[2])&&(i.url=e[2]),s.Pn(i)}static popstateListener(t){s.Pn({type:"popstate",state:t.state})}static hashchangeListener(t){s.Pn({type:"hashchange",state:null,url:t.newURL})}static Pn(t){csArray.prototype.forEach.call(De(s.Te),e=>{e(t)})}constructor(t){this.A=t}observe(){s.Jn(this.A)}disconnect(){s.Zn(this.A)}}return s.lo=null,s.ho=null,s.Hm={boundElement:st,type:"popstate",listener:n=>s.popstateListener(n)},s.Bm={boundElement:st,type:"hashchange",listener:n=>s.hashchangeListener(n)},s.Te=new Set,it([O("popstateListener"),mt()],s,"popstateListener",null),it([O("hashchangeListener"),mt()],s,"hashchangeListener",null),s})(),X_=(()=>{class s extends ie{validateArgs(t){if(K(t)){let e=T(t.useDebounce),i=t.useDebounce==="yes"?wt(t==null?void 0:t.window):!0,r=T(t.listeners);return e&&i&&r}return!1}onInit(){this.args.useDebounce==="yes"?this.te=ii(()=>{this.onEventCallback()},this.args.window):this.te=this.onEventCallback,this.z=new Y_(t=>this.LR(t))}Fm(){return window.location.href}LR(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let r=this.Fm();this.$m!==r&&(this.$m=r,this.te())}onStart(){this.$m=this.Fm(),this.z.observe()}onStop(){this.z.disconnect()}}return s})(),K_=(()=>{class s extends ie{constructor(){super(...arguments),this.vt=!0,this.Qs=!0,this.li={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return K(t)?T(t.selector):!1}submitListener({target:t}){pt(t)&&ze(t)&&Vt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){Pt(this.args.selector)||(this.vt=!1)}onStart(){this.vt&&Et(this.li,this.Qs)}onStop(){this.vt&&St(this.li,this.Qs)}}return B([O("submitListener"),mt()],s.prototype,"submitListener",null),s})(),J_=(()=>{class s extends ie{constructor(){super(...arguments),this.vt=!0,this.Gm={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.zm={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return K(t)?T(t.selector):!1}onInit(){Pt(this.args.selector)||(this.vt=!1)}mouseleaveListener({target:t}){pt(t)&&ze(t)&&t[this.Za]&&delete t[this.Za]}mouseoverListener({target:t}){if(pt(t)&&ze(t)){let e=ci(t,this.args.selector);e!==null&&!e[this.Za]&&(e[this.Za]=!0,this.onEventCallback({element:e}))}}onStart(){this.vt&&(this.Za=csSymbol("Hovered"),Et(this.zm,!0),Et(this.Gm,!0))}onStop(){this.vt&&(St(this.Gm),St(this.zm))}}return B([O("mouseleaveListener"),mt()],s.prototype,"mouseleaveListener",null),B([O("mouseoverListener"),mt()],s.prototype,"mouseoverListener",null),s})(),Q_=(()=>{class s extends ie{constructor(){super(...arguments),this.li={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!K(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){Et(this.li)}onStop(){St(this.li)}}return B([O("hashChangedListener"),mt()],s.prototype,"hashChangedListener",null),s})(),Z_=(()=>{class s extends ie{constructor(){super(...arguments),this.tc=!0}validateArgs(t){return K(t)?T(t.selector):!1}onInit(){if(!Pt(this.args.selector)||!fs.isSupported()){this.tc=!1;return}this.It=new fs({delay:0,trackOnce:!0,reobserve:!0}),this.B=new de(t=>this.Tu(t),{closest:!0})}Tu(t){for(let e of t)this.It.observe(e)}Ru(t,e){if(this.isStarted&&e===ti.VisibleInViewPort){let i=ci(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.tc=!1)}}onStart(){this.tc&&(this.It.start((t,e)=>this.Ru(t,e)),this.B.observe(this.args.selector))}onStop(){this.tc&&(this.It.stop(),this.B.disconnect())}}return s})(),tb=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.url):!1}execute(t){this.commandsService.applyFromImplementation(zi[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),eb=(()=>{class s extends Rt{validateArgs(t){return K(t)?T(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(Er[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),ll="once per pageview",sb="always",ib=(()=>{class s extends ie{constructor(){super(...arguments),this.Cu=!1,this.qe=!1,this.co=!0}validateArgs(t){if(K(t)){let e=T(t.selector),i=t.frequency?t.frequency===ll||t.frequency===sb:!0;return e&&i}return!1}onInit(){fs.isSupported()&&(this.qe=!0,this.co=this.args.frequency?this.args.frequency===ll:!0,this.B=new de((t,e)=>{if(e==="initial")for(let i of t)lt.isVisibleInViewportInForeground(i)&&(i[this.Iu]=!0);this.Tu(t)},{closest:!0}),this.It=new fs({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0}))}onStart(){!this.qe||this.isStarted||(this.Iu=csSymbol("skipElement"),this.Cu=!1,this.It.start((t,e)=>this.Ru(t,e)),this.B.observe(this.args.selector))}onStop(){!this.qe||!this.isStarted||(this.B.disconnect(),this.It.stop())}Ru(t,e){if(this.isStarted&&e===ti.VisibleInViewPort){let i=t.closest(this.args.selector);if(i){if(i[this.Iu]){delete i[this.Iu];return}this.co&&this.stop(),(!this.co||!this.Cu)&&(this.Cu=!0,this.onEventCallback({element:i}))}}}Tu(t){for(let e of t)this.It.observe(e)}}return s})(),ko=(()=>{class s extends ie{constructor(){super(...arguments),this.bu={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return K(t)&&Jt(t)&&csArray.isArray(t.pageviewTypes)&&$o(t.pageviewTypes,r=>T(r))||(x.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this.bu),!0}onInit(){this.UR=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.UR,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),nb=(()=>{class s extends Rt{constructor(){super(...arguments),this.Pu=!1}validateArgs(t){return K(t)&&T(t.type)&&T(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.Pu=!1,!0):(x.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.Pu=!0,!0)}execute(t){let e="";this.Pu?e=Lu:e=this.VR(t.urls,t.type),this.commandsService.applyFromImplementation(Vu[0],[e],"BlockAllowListForSRTemplate")}VR(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),r=>`.*${csString.prototype.trim.call(r)}`),"|"),`^(${i}).*?`}}return s})(),rb=(()=>{class s{constructor(t){this.E=t,this.jR={ApiErrorsMaskUrl:tb,NetworkRequestMaskUrls:eb,ArtificialPageview:nd,BlockAllowListForSr:nb,CustomError:S_,CustomVariable:v_,DataCsEncrypt:w_,DataCsOverride:b_,DynamicVariable:T_,EcTransactionAll:R_,EcTransactionCreate:C_,EcTransactionItemsAdd:I_,EcTransactionSend:P_,ElementUnmasking:O_,EventTriggerRecordingPage:N_,EventTriggerRecordingSession:M_,PageEvent:k_,PiiMasking:D_,RecordingEventTrigger:x_,SetPath:L_,SetQuery:U_,SrmOnlineAssets:V_,Submit:j_},this.Bn={AfterPageView:q_,ElementAdded:B_,ElementBecomesVisible:ib,ElementExist:F_,ElementRemoved:$_,ElementVisibility:Z_,ElementClick:W_,FormSubmit:K_,HashChange:Q_,HistoryChange:X_,Mouseover:J_,PageState:z_,BeforePageView:ko}}HR(t){let e=this.jR[t.name];return e?new e(this.E,t.args):(x.error(`Implementations: template ${t.name} does not exist`),null)}BR(t){let e=this.Bn[t.name];return e?new e(this.E,t.args,t.condition):(x.error(`Implementations: trigger ${t.name} does not exist`),null)}parse(t){let e=[];for(let{triggers:i,template:r}of t){let o=this.HR(r);if(!o)continue;if(!o.validateArgs(o.args)){x.implementation(`${r.name} has wrong argument.`);continue}for(let l of i){let h=this.BR(l);if(!h)continue;if(!h.validateArgs(h.args)){x.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${r.name}`,trigger:h,template:o})}}return e}}return s})(),ob=(()=>{class s{constructor(t,e,i){this.FR=t,this.I=i,this.ke={window,document,location,cookies:{}},this.Bn=new Set,this.$R=new rb(e)}init(){Object.defineProperty(this.ke,"cookies",{get:()=>this.GR()});let t=this.$R.parse(this.FR);for(let{name:e,trigger:i,template:r}of t)i instanceof ko&&r instanceof nd||(this.Bn.add(i),i.onEvent(o=>{this.onTriggerEvent(o,r),q.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.Bn.forEach(e=>{e.condition&&!id(e.condition,this.ke)||(t?this.I.schedule(()=>{e.start()}):e.start())})}stop(){this.Bn.forEach(t=>{t.stop()})}onBeforePageView(t){this.Bn.forEach(e=>{if(e instanceof ko){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.zR(t),r={...this.ke,...i},o=[];if(Fw(e.args)&&T(e.args.iterable)&&e.args.iterable.length>0){let c=p_(e.args.iterable,r);if(pt(c)){let l=csArray.prototype.map.call(c,h=>({...r,$:h}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,r);if(e instanceof un){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=No(e.args,c);l&&e.execute(l)}}GR(){let t;try{t=document.cookie}catch{t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[r,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[r]=o),e},{})}zR(t){let e={...t};for(let i in e)ft(e[i])&&(L.isMaskedElement(e[i])||L.isMaskedElementChild(e[i]))&&delete e[i];return e}}return B([Ot("implementationsService.start")],s.prototype,"start",null),B([O()],s.prototype,"onTriggerEvent",null),s})(),rd=(()=>{class s{constructor(t,e,i){this.Os=new ob(t,e,i)}init(){this.Os.init()}onInitTracking(){this.Os.start(!0)}onOptout(){this.Os.stop()}onBeforeSessionRenewal(){this.Os.stop(),this.Os.start()}onBeforeArtificialPageView(){this.Os.stop(),this.Os.start(),this.Os.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.Os.onBeforePageView("natural")}}return s})(),od=(()=>{class s{constructor(t){this.configuration=t}}return s})(),ab=(()=>{class s extends od{constructor(t,e,i){super(t),this.configuration=t,this.uo=e,this.S=i,this.qR=H.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.qm=t,this.po=void 0,this.WR()}init(t){this.YR();let e=At.get(me);e!==null&&Zo(e)?t(this.canCollect(tm(e))):this.refreshQuota(i=>{t(i!==H.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==H.QUOTA_REACHED}computeInitialCollectState(t){return this.po?(this.S.emitCollectStateChange(this.po,this.configuration.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF),this.po):(x.warn("Quota file error computeInitialCollectState() called before quota answered"),H.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===H.QUOTA_REACHED?H.QUOTA_REACHED:!hi.isRecordingSupported()&&this.isReplayRecorded(t)?H.ANALYTICS_ONLY:t.collectState===H.RECORDING_RULES_TARGETING?H.RECORDING_RULES_TARGETING:t.collectState===H.ANALYTICS_ONLY_RULES_TARGETING?H.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===H.RECORDING_GLOBAL_SAMPLING?H.RECORDING_GLOBAL_SAMPLING:H.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===H.RECORDING_GLOBAL_SAMPLING||t.collectState===H.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.po||H.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return H.ANALYTICS_ONLY}fo(t){this.po=t,this.qm&&this.qm(t)}YR(){this.uo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.uo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.uo.onLoad(t=>this.quotaFileHandler(t))}WR(){this.uo.isInProgress()||this.uo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.XR(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;x.warn(e),this.fo(this.qR)}XR(t){let e=!1,i=!1;for(let r of t.quotas)r.quotaType==="ANALYTICS"&&r.value?e=!0:r.quotaType==="RECORDING"&&r.value&&Oe.boolean(Math.round(r.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?hi.isRecordingSupported()?this.fo(H.RECORDING_GLOBAL_SAMPLING):this.fo(H.ANALYTICS_ONLY):e&&!i?this.fo(H.ANALYTICS_ONLY):this.fo(H.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return H.ANALYTICS_ONLY}}return B([O("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),B([O("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),cb=(()=>{class s extends od{constructor(t,e,i,r,o){super(t),this.configuration=t,this.S=e,this.au=i,this.w=r,this.Ou=o,this.Nu=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Nu=!0,this.Ou.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===H.QUOTA_REACHED||t.collectState===H.RECORDING_RULES_TARGETING||t.collectState===H.RECORDING_TEMPORARILY)&&(t.collectState=H.ANALYTICS_ONLY),t}computeInitialCollectState(){return ds.isReplayConsentNeeded(this.configuration)?H.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Xa()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Xa()}Xa(){if(!hi.isRecordingSupported())return H.ANALYTICS_ONLY;let t=H.ANALYTICS_ONLY,e=Kt.ETR_OFF;return Oe.percentage()<this.configuration.replayRecordingRate||this.au.isForceReplayRecorded()?t=H.RECORDING_GLOBAL_SAMPLING:this.Nu&&this.Ou.evaluateUrl(this.w.getAnonymizedUrl())&&(t=H.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Kt.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!hi.isRecordingSupported())return H.ANALYTICS_ONLY;if(ds.isRecordingBlockedByConsent(t))return t.collectState===H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:H.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===H.RECORDING_GLOBAL_SAMPLING)return H.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Kt.ETR_ON:Kt.ETR_OFF;return this.Nu&&this.Ou.evaluateUrl(this.w.getAnonymizedUrl())?(this.S.emitCollectStateChange(H.RECORDING_URL_SAMPLING,e),H.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(H.ANALYTICS_ONLY,e),H.ANALYTICS_ONLY)}isReplayRecorded(t){return ds.isRecordingBlockedByConsent(t)?!1:t.collectState===H.RECORDING_TEMPORARILY||t.collectState===H.RECORDING_GLOBAL_SAMPLING||t.collectState===H.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return H.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return H.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function lb(){let s="[data-cs-mask]",n="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,n,t,...e,...i]}function hb(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var ad=(()=>{class s{constructor(){this.KR={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.ys={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:lb(),Attributes:hb()};this.ys=L.getComputedSelectorSettings(t,this.ys)}init(){this.JR()}setMaskedElementSettingsFromCommand(t){if(t=L.sanitizeSelectorUserInput(t),!L.isSelectorUserInput(t))throw new Error(`Command misuse: ${hn[0]}`);this.Mu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Mu(e)}getMaskedElementSettings(t){return t?this.Wm(this.KR):this.ys}JR(){var t,e,i,r,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(r=window==null?void 0:window.ClickTaleSettings)===null||r===void 0?void 0:r.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{T(h.attr)&&T(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.Mu(l)}Mu(t){this.ys=this.Wm(t)}Wm(t){return L.getComputedSelectorSettings(t,this.ys)}}return s})();var ub=(()=>{class s{constructor(t,e){this.J=t,this.pt=e,this.ku=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.pt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.ku=!0}disableRemoveQueryString(){this.ku=!1}get(){let t=this.ku?this.J.removeQueryString(this.Ym()):this.Ym();return this.J.anonymizeUrl(t,{maskingPatterns:this.pt.getUrlMaskingPatterns()})}set(t){this.Xm=t}Ym(){if(this.Xm)return this.Xm;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),db=60*1e3,pb=30*1e3,fb=(()=>{class s{constructor(t,e){this.R=t,this.O=e,this.Du=!1,this.QR=lr(()=>this.R.refreshSession(),pb)}onSessionExpired(t){this.ZR=t}isSessionValid(){return this.Du?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.O.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.O.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.QR():this.tC()&&(this.Km=I.now(),this.renewSession())}renewSession(){this.Du=!0,this.ZR(),this.Du=!1}tC(){return!document.hidden&&(!J(this.Km)||I.now()-this.Km>db)}}return s})(),gb=["undefined","anonymous","true","false","not_authenticated","NaN","NA","Na","unique_identifier","0","",'""',"[object Object]","{{ customer.email }}","{{ email }}"],mb=[/^email$/i,/^none$/i,/^unknown$/i,/^guest$/i,/^null$/i],yb=255,Eb="%-idtt_Salt!",Sb="spki",hl="RSA-OAEP",io="SHA-256",ul=318,vb=(()=>{class s extends ht{constructor(t,e,i,r,o,c){super(),this.$s=t,this.Yc=e,this.O=i,this.F=r,this.Ns=o,this.xu=c,this.nt=null,this.Lu=null,this.Uu=null,this.Jm=!1,this.Vu=null,this.ju=null,this.Hu=null,this.sc=null,this.Bu=null,Ho()&&(this.Jm=!0,this.Vu=new TextEncoder,e.setRequestParametersProviders({getRequestParameters:()=>{var l;return(l=this.ju)!==null&&l!==void 0?l:{}}}),e.after(()=>{this.ju=null}))}onStart(){var t,e;let i=(t=this.O.getVisitor())===null||t===void 0?void 0:t.id,r=(e=this.Ns.get()==null?void 0:csString.prototype.split.call(this.Ns.get(),"."))===null||e===void 0?void 0:e[0];if(i!==r&&this.Ns.remove(),this.xu?!this.Bu&&yt.isSupported()&&(this.Bu=Promise.all([this.Qm(this.xu).then(this.eC.bind(this)),this.sC(this.xu)])):nt.warn("identify: missing encryption key",!0,"identify"),this.nt!==null){let{identity:o,sendHashedIdentity:c}=this.nt;this.nt=null,this.identify(o,c)}}onStop(){}async identify(t,e){if(!this.Jm)return;if(!this.$s){nt.error("missing heap env id","identify");return}if(!this.isStarted){this.nt={identity:t,sendHashedIdentity:e};return}if(this.iC(t))return;let i=Y.truncate(t,yb),r=this.O.getVisitor();if(!r){nt.warn("identify: visitor not found",!0,"identify");return}if(await this.nC(i,r.identityPrint)){if(this.O.renewVisitor(),r=this.O.getVisitor(),!r){nt.warn("identify: visitor not found",!0,"identify");return}}else this.F.refreshSession();await Promise.all([this.rC(i,e,this.$s,r.id),this.oC(i,r),this.aC(i,r)])}resetIdentity(){this.nt!==null&&(this.nt=null),this.getIdentity()&&this.O.renewVisitor(),this.Ns.get()&&this.Ns.remove()}getIdentity(){let t=this.O.getVisitor();return!t||!t.identityPrint?null:t.identityPrint}getEncryptedIdentityAndKey(){let t=this.Ns.get();if(!t)return null;let e=csString.prototype.split.call(t,".");return e.length!==3?null:`${e[1]}.${e[2]}`}async nC(t,e){return e?await this.Zm(t)!==e:!1}async oC(t,e){e.identityPrint=await this.Zm(t),this.O.setVisitor(e)}async Zm(t){var e;if(((e=this.Lu)===null||e===void 0?void 0:e.identity)===t)return this.Lu.identityPrint;let i=await this.Qm(t),r=Y.truncate(i,12);return this.Lu={identity:t,identityPrint:r},r}async Qm(t){return Ya(io,this.Vu.encode(Eb+t))}async eC(t){this.sc=Y.truncate(t,16);let e=this.Ns.get();if(!e)return;let i=csString.prototype.split.call(e,".");i.length===3&&i[2]!==this.sc&&this.Ns.remove()}async sC(t){try{this.Hu=await yt.crypto.importKey(Sb,Vo(t),{name:hl,hash:io},!1,["encrypt"])}catch{nt.error(`fail to import encryption key '${t}'`,"IdentityService")}}async cC(t){if(!this.Hu)return null;let e=nr(t);e.byteLength>ul&&(nt.error("arrayBuffer too long","encryptIdentity"),e=e.slice(0,ul));try{let i=await yt.crypto.encrypt({name:hl},this.Hu,e);return Gp(i)}catch{return null}}async aC(t,e){if(await this.Bu,!this.sc)return;let i=await this.lC(t);i&&this.Ns.set(`${e.id}.${i}.${this.sc}`)}async lC(t){var e;if(((e=this.Uu)===null||e===void 0?void 0:e.identity)===t)return this.Uu.encryptedIdentity;let i=await this.cC(t);return i?(this.Uu={identity:t,encryptedIdentity:i},i):null}async rC(t,e,i,r){let o=e?await Ya(io,this.Vu.encode(t)):t,c=csString(await rh(r));this.ju={a:i,u:c,st:I.now().toString(),b:"web",i:o,v:"1",s:"1"},this.Yc.send()}iC(t){for(let e of gb)if(t===e)return!0;for(let e of mb)if(e.test(t))return!0;return!1}}return s})(),ei="_cs_s_ctx",wb=800,_b=(()=>{class s{constructor(t){this.N=t}set(t,e=ir){let i=csJSON.stringify(t);this.N.set(ei,i,e)}remove(){this.N.delete(ei)}get(){let t=this.N.get(ei);return t===null?null:csJSON.parse(t)}}return s})(),no=(()=>{let s;return function(n){function t(r,o){if(!o)return"";try{let c=new csURL(o);return csArray.prototype.forEach.call(r,l=>c.searchParams.delete(l)),c.toString()}catch{return o}}n.removeQueryParams=t;function e(r,o){if(!o)return"";try{let c=new csURL(o),l=csArray.from(c.searchParams.keys());return csArray.prototype.forEach.call(l,h=>{csArray.prototype.includes.call(r,h)||c.searchParams.delete(h)}),c.toString()}catch{return o}}n.keepOnlyQueryParams=e;function i(r){if(!r)return"";try{let o=new csURL(r);return o.search="",o.toString()}catch{return r}}n.removeAllQueryParams=i}(s||(s={})),s})(),bb=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.$s=t,this.qi=e,this.Rs=i,this.w=r,this.wt=o,this.Ke=c,this.ve=l,this.Wi=h}createSessionContext(){var t;let e=(t=this.Fu)!==null&&t!==void 0?t:this.Rs.get(),i=this.ic(e),r=this.w.getAnonymizedUrl(),o=this.ic(r),c={firstViewTime:I.now(),firstViewUrl:o,sessionReferrer:i,currentViewUrl:o};this.qi.set(c)}removeSessionContext(){this.qi.remove()}refreshSessionContext(){let t=this.qi.get();t!==null&&this.qi.set(t)}getSharedContext(){var t,e,i,r,o;let c=this.qi.get();if(c===null)return null;let l={pageTitle:this.ve.getPageTitle(),happid:this.$s,firstViewTime:(t=c.firstViewTime)!==null&&t!==void 0?t:0,firstViewUrl:(e=c.firstViewUrl)!==null&&e!==void 0?e:"",sessionReferrer:(i=c.sessionReferrer)!==null&&i!==void 0?i:this.Rs.get(),previousViewUrl:(r=this.Fu)!==null&&r!==void 0?r:"",currentViewTime:I.now(),currentViewUrl:(o=c.currentViewUrl)!==null&&o!==void 0?o:"",screenWidth:bt.screenWidth(),screenHeight:bt.screenHeight()};this.wt.hasCustomVariablesPage()&&(l.cvarp=this.wt.getCustomVariablesPage());let h=this.Ke.getEncryptedIdentityAndKey();return h&&(l.encryptedIdentity=h),l}updateSharedContextPaths(t,e){let i=this.qi.get(),r=i!=null?i:{},o=t!=null?t:r.currentViewUrl;this.Fu=this.ic(o),r.currentViewUrl=this.ic(e),this.qi.set(r)}getPreviousViewUrl(){return this.Fu}truncateString(t){return t&&Y.truncate(t,wb)}hC(t){var e,i,r;if(t)return!((e=this.Wi)===null||e===void 0)&&e.blockAll?no.removeAllQueryParams(t):csArray.isArray((i=this.Wi)===null||i===void 0?void 0:i.blockList)&&this.Wi.blockList.length>0?no.removeQueryParams(this.Wi.blockList,t):csArray.isArray((r=this.Wi)===null||r===void 0?void 0:r.allowList)&&this.Wi.allowList.length>0?no.keepOnlyQueryParams(this.Wi.allowList,t):t}ic(t){if(!t)return;let e=this.hC(t);return this.truncateString(e)}}return s})(),Ab=(()=>{class s{constructor(t){this.ci=t}onSessionCreated(){this.ci.createSessionContext()}onSessionRemoved(){this.ci.removeSessionContext()}onSessionRefreshed(){this.ci.refreshSessionContext()}onBeforeNaturalPageView(t){this.ci.updateSharedContextPaths(null,t)}onBeforeArtificialPageView(t,e){this.ci.updateSharedContextPaths(t,e)}}return s})(),Tb=(()=>{class s{constructor(t){this.X=t}set(t){let e=csJSON.stringify(t);this.X.setItem(ei,e)}remove(){this.X.removeItem(ei)}get(){let t=this.X.getItem(ei);return t===null?null:csJSON.parse(t)}}return s})(),si="_cs_i",Rb=(()=>{class s{constructor(t){this.X=t}set(t){this.X.setItem(si,t)}remove(){this.X.removeItem(si)}get(){return this.X.getItem(si)}}return s})(),Cb=2592e5,Ib=(()=>{class s{constructor(t){this.N=t}set(t,e=Cb){this.N.set(si,t,e,!0)}remove(){this.N.delete(si)}get(){return this.N.get(si)}}return s})();var Pb=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,Ob="$1CS_ANONYMIZED_NAME",cd=(()=>{class s{constructor(t){this.M=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],r=e.partialMaskingPatterns||[],o=this.M.anonymizePII(t);if(o=this.M.anonymizeJwt(o),e.maskNames){let h=o;o=this._r(o),o!==h&&(q.counters.redactedPII.count("name"),q.counters.redactedPII.count("name-in-url"))}let c=this.dC(o,i);if(c!==o)return q.counters.redactedPII.count("url"),c;let l=this.pC(o,r);return l!==o&&q.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.$u(t);return i!==""?`${e}?`:e}$u(t){let e=csString.prototype.indexOf.call(t,"?"),i,r="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),r=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:r}}dC(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.$u(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.fC(o,c);if(l!==null)return`${l}${r}`}return t}fC(t,e){if(t.length<e.length)return null;let i=[];for(let r=0;r<t.length;r++){let o=t[r];if(r>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[r].key;if(this.sy(c)){let l=e[r].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}pC(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.$u(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.gC(o,c);return`${csArray.prototype.join.call(o,"/")}${r}`}gC(t,e){let i=[],r=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],p=e[r].key;if(this.sy(p)&&l>=c){let u=e[r].value;csArray.prototype.push.call(i,h.length>0?u:""),r++,r===e.length&&(r=0);continue}if(h===p){csArray.prototype.push.call(i,h),r++,r===e.length&&(r=0);continue}for(let u=0;u<r;u++){let y=l-r+u;i[y]=t[y]}r=0,csArray.prototype.push.call(i,h)}for(let l=0;l<r;l++){let h=t.length-r+l;i[h]=t[h]}return i}sy(t){return Tt(t,Iu)}_r(t){return csString.prototype.replace.call(t,Pb,Ob)}}return s})(),dl=["setReferrer"],Nb=(()=>{class s{constructor(t,e){this.E=t,this.Rs=e}init(){this.E.register(dl,t=>{if(!T(t))throw new Error(`Command misuse: ${dl[0]}`);this.Rs.set(t)})}}return s})(),Mb=(()=>{class s{constructor(t,e,i,r,o,c){this.f=t,this.mi=e,this.gs=i,this.I=r,this.S=o,this.X=c}initWithQuota(){if(!this.f.collectionEnabled){this.iy();return}let t=new So(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this._t=new ab(this.f,t,this.S),this._t.init(e=>{e?this.init():this.iy()})}mC(){this.I.schedule(()=>{this.M=new Ls,this.J=new cd(this.M),this.w=new Gu(window.location,this.J),this.N=new or(this.f,this.w,this.mi),this.N.init(),this.Tt=new vw,this.E=new Bu([Oo.UXA]),this.K=new Sw,this.ht=new ad,this.bt=new cw(this.f,new rw(this.f,this.N,this.Tt),this.S)})}iy(){}init(){yt.isSupported()&&(this.f.encryptionPublicKey&&yt.importKey(this.f.encryptionPublicKey),yt.setDigestSalt(this.f.projectId.toString()));let t,e,i,r,o,c,l,h,p,u,y,m,v,N,D,w,S,C,k,_,F,Q,ot,jt,kt,b,V;this.mC(),this.I.schedule(()=>{y=new pw(window.location,this.N),new Pw().init(),m=gr.create(x.warn),u=new Fl(m),this._t===void 0&&(this._t=new cb(this.f,this.S,y,this.w,new sn),this._t.init())}),this.I.schedule(()=>{t=new Zv(this.f,this.N,this.X),e=new sw(t,this._t,this.S,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled),i=new bw(this.f,this.N,this.X),r=new Jv(this.f,i,this.S,e),this.gs.setContext(r,e)}),this.I.schedule(()=>{c=new nw(r,e,this.bt),l=new sm(this.f,this.N,this.X),h=new hw(window.location,l),p=new uw(h),D=new iw(this.f,r,h),kt=new qu(Ie,this.f),_=new Wu(kt,this.f.isChild),F=new Yu(kt),Q=new Xu(kt),ot=new Ku,jt=new zu(_,F,Q,ot),w=new yw(this.E,jt),S=new Uu(this.w),C=new ju(S,this.E);let j=new im(this.f,this.N,this.X);b=new _w(this.M,j),k=new ww(this.E,b);let $=new Gg(r,e,h,b,this.f)}),this.I.schedule(()=>{let j=new Kv(this.f,r,h,D,c,v,o,y);this.f.implementations&&(V=new rd(this.f.implementations,this.E,this.I),V.init(),this.S.addListener(V)),j.compute($=>{this.I.schedule(()=>{var gt;w.init();let Ht=new aw(this.f,this.E,this.bt,e,this.S),fe=new fw(this.f,this.N,this.Tt),xe=new gw(this.S,window.location,fe),Es=new mw(this.E,xe),Qt=new Ew(this.E,this.f),Wt=new ub(this.J,new ya),ve=new fb(e,r),Hs,Le,Nt;if(this.f.isCsCrosswritingHeap()){new Nb(this.E,Wt).init();let wr="api/identify_v3",fn=new So(this.f.getPaProxyDomainUri(),wr),Si;this.f.cookielessTrackingEnabled?Si=new Rb(this.X):Si=new Ib(this.N),Hs=new vb(this.f.getHeapEnvId(),fn,r,ve,Si,this.f.identityEncryptionKey),Nt=new Kh;let Bs;this.f.cookielessTrackingEnabled?Bs=new Tb(this.X):Bs=new _b(this.N),Le=new bb(this.f.getHeapEnvId(),Bs,Wt,this.w,b,Hs,Nt,(gt=this.f.experimental.sharedContext)===null||gt===void 0?void 0:gt.queryParamControl);let gn=new Ab(Le);this.S.addListener(gn)}let ne=new Zc(this.f,r,e,N),dn=new Zc(this.f,r,e,N,Le);$?(this.S.emitInitTracking(),new Xv(ne,dn,m,r,e,ve,Wt,this.S,this.E,w,this.f,Es,xe,Ht,this.bt,this.M,kt,this.J,this.w,Qt,this.K,jt,b,k,S,C,this.I,u,this.N,this.Tt,this._t,this.ht,Nt,Hs).start()):new lw(this.S,this.E,w,Es,xe,p,Ht).start()})})})}}return s})(),Is=(()=>{let s;return function(n){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(S){let C=S.source,k=S.data;if(c(k)){let _=()=>{let F=r(t,k);y(F,()=>C.postMessage("csBundleLoaded",S.origin))};e=k.token,w(i.loadBundle),l(S.origin)&&_()}}};function r(S,C){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(S,"{version}",C.version),"{token}",C.token),"{domain}",C.domain)}function o(){return e}n.getToken=o;function c(S){return S&&S.type==="csBundleInjection"&&l(S.domain)&&p(S.version)&&h(S.token)}n.isAuthorizedIncomingMessage=c,n.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(S){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(S)||n.hjDomainRegex.test(S)}n.isAuthorizedDomain=l;function h(S){return/^[a-zA-Z0-9]+$/.test(S)}n.isAuthorizedToken=h;function p(S){return/^[a-zA-Z0-9\.]+$/.test(S)}n.isAuthorizedTagVersion=p;function u(){let S=window.opener||window.parent;return window!==S&&window.addEventListener}n.isActivable=u;function y(S,C){let k=document.createElement("script");k.type="text/javascript",k.async=!0,k.src=S,k.onload=C,k.charset="utf-8",document.head.appendChild(k)}n.addScript=y;function m(S){let C=document.createElement("link");C.rel="stylesheet",C.href=S,document.head.appendChild(C)}n.addStyle=m;function v(S){return`${S}?cb=${new csDate().getTime()}`}n.addCacheBusting=v;function N(){D(i.loadBundle)}n.waitForBundleInjection=N;function D(S){window.addEventListener("message",S,!1)}n.listen=D;function w(S){window.removeEventListener("message",S,!1)}n.removeListener=w}(s||(s={})),s})(),pl="_hp_ved",kb=18e5,Db="/js/ved.js",xb="/css/ved.css",Lb="/js/ved.css",Ub=(()=>{let s;return function(n){n.StatusUpdate="status"}(s||(s={})),s})(),Vb=(()=>{let s;return function(n){n.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var ro=(()=>{let s;return function(n){let t=!1,e;function i(y){return e+y}function r(){let y=[i(xb),i(Lb)];csArray.prototype.forEach.call(y,m=>{Is.addStyle(m)})}function o(y){let m=new csRegExp("(^|;)[ ]*"+y+"=([^;]*)"),v=m.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(y,m,v){let N=encodeURIComponent(y)+"="+encodeURIComponent(m),D=new csDate;D.setTime(D.getTime()+v);let w=N+"; expires="+D.toUTCString()+"; path=/";document.cookie=w}function l(){c(pl,"on",kb)}function h(){return o(pl)==="on"}n.isVLCookieEnabled=h;function p(y){window.heapV=Object.assign({},window.heap,{source:y==null?void 0:y.source,uri:e,loadArgs:y==null?void 0:y.data.args,identify:()=>{},track:()=>{}})}n.initializeHeapV=p;function u(y,m){var v;if(e=y,m){let N={type:Ub.StatusUpdate,value:Vb.ReceivedInitMessage},D={targetOrigin:m==null?void 0:m.origin};(v=m==null?void 0:m.source)===null||v===void 0||v.postMessage(N,D)}t||(t=!0,l(),p(m),window.heapV&&(Is.addScript(i(Db)),r()))}n.init=u}(s||(s={})),s})(),jb=(()=>{let s;return function(n){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,Is.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(_){var F;_.origin===l&&((F=_.data)===null||F===void 0?void 0:F.message)==="init"&&_.source&&(ro.init(l,_),S(h.initHeapVisualLabeler))},ping(_){typeof _.data=="string"&&_.data==="ping"&&y(_.origin)&&(c=_.origin,o=Is.hjDomainRegex.test(_.origin)?i:_.origin,S(h.ping),w(h.insertMessageScript),m(Is.addCacheBusting("utils.js")))},insertMessageScript:C(_=>{typeof _.data=="string"&&_.data!=="ping"&&(S(h.insertMessageScript),m(_.data))})};function p(){return Is.getToken()}n.getToken=p;function u(){return window!==t&&window.addEventListener}n.isActivable=u;function y(_){return csArray.prototype.some.call(r,F=>F.test(_))}n.isAuthorizedDomain=y;function m(_,F){let Q=document.createElement("script");Q.type="text/javascript",Q.async=!0;let ot=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");Q.src=`${ot}/${e}/${_}`,Q.onload=F,Q.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(Q),v(_)}function v(_){csString.prototype.includes.call(_,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(_,"&mode=")[1])}function N(){w(h.ping),Is.waitForBundleInjection()}n.waitForConnection=N;function D(_){l=_,w(h.initHeapVisualLabeler),ro.isVLCookieEnabled()&&ro.init(l)}n.waitForHeapVisualLabeler=D;function w(_){window.addEventListener("message",_,!1)}n.listen=w;function S(_){window.removeEventListener("message",_,!1)}n.removeListener=S;function C(_){return function(F){F.origin===c&&_(F)}}n.secureListener=C;function k(_){c&&t.postMessage(_,c)}n.post=k}(s||(s={})),s})();var kn=window.CSFrameCommunication||jb,Hb=(()=>{class s extends Sr{emitTrackingContextResultMessage(t){for(let e of this.listeners)e.onTrackingContextResultCallback&&e.onTrackingContextResultCallback(t)}emitAfterPageViewCallback(t){for(let e of this.listeners)e.onAfterPageViewCallback&&e.onAfterPageViewCallback(t)}emitIntegrationSessionKeyCallback(t){for(let e of this.listeners)e.onIntegrationSessionKeyCallback&&e.onIntegrationSessionKeyCallback(t)}emitParentRecordingContextChange(t){for(let e of this.listeners)e.onParentRecordingContextChange&&e.onParentRecordingContextChange(t)}emitParentSensitiveStatusChange(t){for(let e of this.listeners)e.onParentSensitiveStatusChange&&e.onParentSensitiveStatusChange(t)}emitStartAnalytics(){for(let t of this.listeners)t.onStartAnalytics&&t.onStartAnalytics()}emitStopAnalytics(){for(let t of this.listeners)t.onStopAnalytics&&t.onStopAnalytics()}emitStartRecording(){for(let t of this.listeners)t.onStartRecording&&t.onStartRecording()}emitStopRecording(){for(let t of this.listeners)t.onStopRecording&&t.onStopRecording()}}return s})(),ld=(()=>{class s extends Sr{constructor(t){super(),this.I=t}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.I.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.I.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){x.error(e)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}}return B([Ot("emitStartTracking")],s.prototype,"emitStartTracking",null),s})(),hd=["trackTransaction"],Bb=(()=>{class s{constructor(t){this.Y=t}init(){this.Y.register(an),this.Y.register(vr),this.Y.register(er),this.Y.register(sr),this.Y.register(pr),this.Y.register(Gh),this.Y.register(cn),this.Y.register(mi),this.Y.register(ln),this.Y.register(hd),this.Y.register(Pu),this.Y.register(Ou),this.Y.register(Sa),this.Y.register(Hu),this.Y.register(Nu),this.Y.register(dr),this.Y.register(yi),this.Y.register(fa),this.Y.register(Mu),this.Y.register(ku),this.Y.register(Du),this.Y.register(xu),this.Y.register(Er),this.Y.register(ma),this.Y.register($i),this.Y.register(Fi),this.Y.register(nh),this.Y.register(sa)}onStartTracking(){this.Y.start()}onOptout(){this.Y.stop()}}return s})(),Fb=(()=>{class s extends ht{constructor(t,e){super(),this.E=t,this.C=e,this.zt=[]}onStart(){this.commandsBatchReady()}onStop(){this.zt=[]}register(t){for(let e of t)this.E.register([e],(...i)=>this.send(e,i))}send(t,e){csArray.prototype.push.call(this.zt,{name:t,params:e}),this.isStarted&&this.commandsBatchReady()}commandsBatchReady(){if(this.zt.length===0)return;let t={commands:this.zt};this.C.sendToParent(P.Commands,t),this.zt=[]}}return B([O("Commands.iframe.commandsBatch.send")],s.prototype,"send",null),B([Vs({wait:0,mode:"trailing"}),O("send iframe commands batch")],s.prototype,"commandsBatchReady",null),s})(),$b="Buffer is full, events might be missing.",Gb=(()=>{class s{constructor(t=25){this.ny=t,this.Fn=[]}reset(){this.Fn=[]}getMessages(){return this.Fn}addMessage(t){this.Fn.length<this.ny?csArray.prototype.push.call(this.Fn,t):this.Fn.length===this.ny&&(this.yC(t),csArray.prototype.push.call(this.Fn,t))}yC(t){t.type=P.ChildLogMessage,t.content={message:$b,errorCode:"",level:ut.warn}}}return s})(),ud=(()=>{class s extends ht{constructor(t){super(),this.buffer=new Gb(t)}}return s})(),zb=25,qb=(()=>{class s extends ud{constructor(t,e,i,r,o){super(zb),this.f=t,this.S=e,this.Ms=i,this.Xt=r,this.hi=o,this.Ye=null,this.ry={boundElement:window,type:"message",listener:c=>this.zc(c)}}onStart(){Et(this.ry,!1),this.EC()}onStop(){St(this.ry,!1),this.Ye&&(at.closeChannelPort(this.Ye),this.Ye=null)}sendToParent(t,e){let i=this.buildChildBaseMessage(t,e);this.Ka(i)}EC(){let t=this.buildChildBaseMessage(P.Discovery);at.sendPostMessage(window.parent,"*",t)}buildChildBaseMessage(t,e){let i=at.buildBaseMessage(t,te.Child,this.f.projectId);return e&&(i.content=e),i}Ka(t){this.Ye!==null?at.sendChannelMessage(this.Ye,t):this.buffer.addMessage(t)}SC(t,e){let i=at.getNewChannelMessage();this.Ye=i.port1,this.Ye.onmessage=o=>{this.Wc(o)};let r=this.buildChildBaseMessage(P.Discovery);r.id=e,at.sendPostMessage(window.parent,t,r,[i.port2]),this.sendAllMessagesFromBuffer()}Wc(t){switch(t.data.type){case P.TrackingContextResultMessage:this.hi.emitTrackingContextResultMessage(t.data.content);break;case P.IntegrationCallback:{let e=t.data.content;e.initiator===ai.AfterPageView?this.hi.emitAfterPageViewCallback(e):e.initiator===ai.GetSessionKey?this.hi.emitIntegrationSessionKeyCallback(e):x.warn(`Iframe child received unknown IntegrationCallback type from parent : ${csJSON.stringify(t.data)}`);break}case P.Stop:this.S.emitOptout();break;case P.RecordingContext:{let e=t.data.content;this.Ms.setRecordingContext(e),this.hi.emitParentRecordingContextChange(e);break}case P.SensitiveStatus:{let e=t.data.content;this.Xt.setSensitiveStatus(e),this.hi.emitParentSensitiveStatusChange(e);break}default:x.warn(`Iframe child received unknown channelMessage type from parent : ${csJSON.stringify(t.data)}`)}}zc(t){if(this.Ye===null&&at.isMessageValid(t,te.Parent,this.f.projectId,this.f.hostnames))switch(t.data.type){case P.Stop:this.S.emitOptout();break;case P.Discovery:if(!Ge(t.data.id)||t.data.id<0){x.warn(`Iframe child received discovery without valid id from parent (${t.origin}) : ${csJSON.stringify(t.data)}`);return}this.SC(t.origin,t.data.id);break;default:x.warn(`Iframe child received unknown postMessage type from parent (${t.origin}) : ${csJSON.stringify(t.data)}`)}}sendAllMessagesFromBuffer(){if(this.Ye===null)return;let t=this.buffer.getMessages();for(let e of t)at.sendChannelMessage(this.Ye,e);this.vC(),this.buffer.reset()}vC(){let t=at.buildBaseMessage(P.EndOfBufferedMessages,te.Child,this.f.projectId);at.sendChannelMessage(this.Ye,t)}}return s})(),Wb=(()=>{class s{constructor(t){this.C=t}onStartTracking(){this.C.start()}onOptout(){this.C.stop()}}return s})(),Yb=(()=>{class s{constructor(t,e,i,r,o){this.tt=t,this.lt=e,this.C=i,this.Ms=r,this.Xt=o}init(){this.tt.onChildMessage((t,e,i)=>this.lt.emitIframeEvent(t,e,i)),this.tt.setSentiveStatusCallback(()=>this.Xt.getSensitiveStatus()),this.tt.setRecordingContextCallback(()=>this.Ms.getRecordingContext())}onStartTracking(){this.tt.start()}onOptout(){this.tt.stop()}onIframeRecordingUserEvent(t){let e={events:t,containsUserEvent:!0};this.C.sendToParent(P.RecordingEvent,e)}onIframeRecordingBrowserEvent(t){let e={events:t,containsUserEvent:!1};this.C.sendToParent(P.RecordingEvent,e)}onIframeAnalysisUserEvent(t){let e={event:t,isUserEvent:!0};this.C.sendToParent(P.AnalysisEvent,e)}onIframeAnalysisBrowserEvent(t){let e={event:t,isUserEvent:!1};this.C.sendToParent(P.AnalysisEvent,e)}onIframeJavascriptError(t){this.C.sendToParent(P.JavascriptError,t)}onIframeApiError(t){this.C.sendToParent(P.ApiError,t)}onIframeDetailedApiError(t){this.C.sendToParent(P.DetailedApiError,t)}onIframeEmerchandisingMessage(t){this.C.sendToParent(P.EmerchandisingMessage,t)}onIframeCommands(t){this.C.sendToParent(P.Commands,t)}onIframeIntegrationCallback(t){this.C.sendToParent(P.IntegrationCallback,t)}onTrackingContextRequestCallback(t){this.C.sendToParent(P.TrackingContextRequestMessage,t)}onIframeStaticResource(t){this.C.sendToParent(P.StaticResource,t)}onIframeCustomError(t){this.C.sendToParent(P.CustomError,t)}onTrackingContextResultCallback(t){this.tt.sendToChildren(P.TrackingContextResultMessage,t)}onAfterPageViewCallback(t){this.tt.sendToChildren(P.IntegrationCallback,t)}onIntegrationSessionKeyCallback(t){this.tt.sendToChildren(P.IntegrationCallback,t)}onParentRecordingContextChange(t){this.tt.sendToChildren(P.RecordingContext,t)}onParentSensitiveStatusChange(t){this.tt.sendToChildren(P.SensitiveStatus,t)}}return s})(),Xb=(()=>{class s extends ht{constructor(t,e,i,r,o,c,l,h){super(),this.qs=t,this.xt=e,this.C=i,this.Es=r,this.Ss=o,this.bi=c,this.Ai=l,this.Ti=h}init(){var t,e,i,r,o;this.qs.onEvent(c=>this.Nt(c)),this.xt.onEvent(c=>this.Nt(c)),(t=this.Es)===null||t===void 0||t.onEvent(c=>this.Nt(c)),(e=this.Ss)===null||e===void 0||e.onEvent(c=>this.Nt(c)),(i=this.bi)===null||i===void 0||i.onEvent(c=>this.Nt(c)),(r=this.Ai)===null||r===void 0||r.onEvent(c=>this.Oe(c)),(o=this.Ti)===null||o===void 0||o.onEvent(c=>this.Oe(c))}onStart(){var t,e,i,r,o;this.qs.start(),this.xt.start(),(t=this.Es)===null||t===void 0||t.start(),(e=this.Ss)===null||e===void 0||e.start(),(i=this.bi)===null||i===void 0||i.start(),(r=this.Ai)===null||r===void 0||r.start(),(o=this.Ti)===null||o===void 0||o.start()}onStop(){var t,e,i,r,o;this.qs.stop(),this.xt.stop(),(t=this.Es)===null||t===void 0||t.stop(),(e=this.Ss)===null||e===void 0||e.stop(),(i=this.bi)===null||i===void 0||i.stop(),(r=this.Ai)===null||r===void 0||r.stop(),(o=this.Ti)===null||o===void 0||o.stop()}Nt(t){let e={isUserEvent:!0,event:t};this.Q(e)}Oe(t){let e={isUserEvent:!1,event:t};this.Q(e)}Q(t){!this.isStarted||t.event.type===z.RESIZE||this.C.sendToParent(P.AnalysisEvent,t)}}return s})(),Kb=["webview:analytics:start"],Jb=["webview:analytics:stop"],Qb=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this.f=t,this.Z=e,this.Lt=i,this.C=r,this.Et=o,this.yt=c,this.E=l,this.xt=h,this.le=p}init(){let t,e,i=Oh(this.f,this.Z,this.le),r=[];this.f.collectSubmit||csArray.prototype.push.call(r,"submit");let o=new Eh(i,this.Z,this.Lt,r),c=this.Et.isInWebViewContext()?{collectGestureVelocity:!0,collectGestureDistance:!0}:{collectGestureVelocity:!1,collectGestureDistance:!1},l=Nh(this.f,this.Z,this.le),h=new yh(l,this.xt,c),p,u,y;this.go=new Xb(o,h,this.C,t,e,u,y,p),this.go.init(),this.Et.isInWebViewContext()&&this.wC()}onStartTracking(){this.go.start()}onOptout(){this.go.stop()}onStartAnalytics(){this.go.start()}onStopAnalytics(){this.go.stop()}wC(){this.E.register(Kb,()=>this.yt.emitStartAnalytics(),{disableApplyPending:!0}),this.E.register(Jb,()=>{this.yt.emitStopRecording(),this.yt.emitStopAnalytics()},{disableApplyPending:!0})}}return s})();var dd=(()=>{class s{getResourceContentText(t,e,i){let r=c=>{e(t,c.responseText)},o=this.TC(r,i);o.open("GET",t),o.send()}TC(t,e){let i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&(i.status===200?t(i):e(i.statusText))},i}}return s})(),Zb=(()=>{class s extends ht{constructor(t,e,i,r,o=[],c){super(),this.f=t,this.ot=e,this.C=i,this.He=r,this.je=o,this.Wt=c,this.Gu=!1,this.Hi=!1,this.Gs=new ia,this.j=[],this.rc=!1,this.Ps=l=>this.Oe(l),this.Gr=l=>this.Nt(l)}init(){this.Lh()}Lh(){var t;this.He.onEvent(this.Ps,this.Gr),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.Gr)}setEnableOnlineAssets(t){this.Gu=t!=null?t:!1}setOnlineAssetsEnabledOnNextStart(t){this.Hi=t}getStaticResourceManagerStatus(){return this.Wt?{supported:li.isSupported(),onlineAssets:{activated:this.Gu,enableOnNextStart:this.Hi}}:null}Oe(t){this.RC(t),this.oc()}Nt(t){this.oy(t),this.oc()}oy(t){csArray.prototype.push.call(this.j,t),this.rc=!0}RC(t){csArray.prototype.push.call(this.j,t)}oc(){W(this.je,e=>{var i;return(i=e.flushEvents)===null||i===void 0?void 0:i.call(e)});let t={containsUserEvent:this.rc,events:this.j};this.C.sendToParent(P.RecordingEvent,t),this.j=[],this.rc=!1}onStart(){this.Wt&&this.Gu&&this.Wt.enableOnlineAssets(),this.He.start(),this.f.emitDebugEvents&&this.Gs.emit("replayRecordingStarted"),W(this.je,t=>{t.start&&t.start()})}onStop(){var t;this.He.stop(),(t=this.Wt)===null||t===void 0||t.disableOnlineAssets(),W(this.je,e=>{e.stop&&e.stop()})}addInitialDom(t){for(let e=0;e<this.j.length;e+=1)if(this.j[e].date>=t.date){csArray.prototype.splice.call(this.j,e,0,t),this.rc=!0,this.oc();return}this.oy(t),this.oc()}}return s})(),tA=(()=>{class s extends ht{constructor(t,e){super(),this.xe=t,this.C=e}onStart(){}onStop(){}init(){this.xe.onSendStaticResource(t=>this.C.sendToParent(P.StaticResource,t))}}return s})();function eA(s){var n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return s.replace(n,function(t,e,i,r){if(e==="\\")return t.slice(1);if(r)return r;var o=parseInt(i,16),c=55296<=o&&o<=57343;return c||o===0||o>1114111?"\uFFFD":String.fromCodePoint(o)})}var sA=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function iA(s,n){var t=s.replace(sA,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var r=e[3]||e[4],o=e[9]||e[10]||e[11],c=eA((r||o).trim()),l=r?"@import ":"",h=n(c)||c;return l+"url("+nA(h)+")"});return t}function nA(s){return s.indexOf('"')===-1?'"'+s+'"':s.indexOf("'")===-1?"'"+s+"'":s}function rA(s){var n=[];return iA(s,function(t){return n.push(t),t}),n}var pd=(()=>{class s{constructor(t){this.CC=t}getStyleSheetAssets(t,e,i,r,o){let c=[];if(!Wn(t)){i(`Not a recognized valid css file path ${t}`);return}let l=(h,p)=>{let u=this.IC(h,p);csArray.prototype.forEach.call(u,y=>{csArray.prototype.push.call(c,y),Wn(y.assetId)&&r(y.assetId)&&(o==null||o(y),this.getStyleSheetAssets(y.assetId,e,i,r,o))}),e(c)};this.CC.getResourceContentText(t,l,i)}IC(t,e){return this.PC(t,rA(e))}PC(t,e){return csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(e,i=>!ee(i)),i=>!kl(i)),i=>({assetId:Hl(i,t),assetBasePath:t,assetRawPath:i}))}}return s})(),fd=(()=>{class s{constructor(t){this.f=t}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired}}return s})(),Do=(()=>{class s{static isWebViewLocalAssetsSupported(){return"URL"in window}}return s})(),oA=["webview:replay:start"],aA=["webview:replay:stop"],cA=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.f=t,this.yt=e,this.ay=i,this.pi=r,this.zu=o,this.E=c,this.w=l,this.Xt=h,this.qu=!1}init(){let t=new fd(this.f),e=new sn;if(this.ie=new Uu(this.w),new ju(this.ie,this.E).init(),this.it=new ta(this.f,this.w,e,t),this.it.init(),Do.isWebViewLocalAssetsSupported()){let r=p=>{this.mo(p)},o=p=>x.error("An error occurred while fetching a styleSheet: "+p),c=new Set,l=p=>!c.has(p),h=p=>{c.add(p.assetId),this.mo([p])};this.ay.onAsset(p=>{this.OC(p)}),this.ay.onStyleSheetFound(p=>{this.zu.getStyleSheetAssets(p.assetId,r,o,l,h)})}this.NC()}onStartRecording(){if(this.qu=!0,!this.ie.isUrlExcludedForSessionReplay()){let t=this.Xt.getSensitiveStatus();this.yt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}onStopRecording(){this.qu=!1,this.yt.emitParentRecordingContextChange({isRecording:!1})}onArtificialPageViewEnd(){this.yt.emitParentRecordingContextChange({isRecording:!1})}onAfterArtificialPageView(){if(this.U()&&!this.ie.isUrlExcludedForSessionReplay()){let t=this.Xt.getSensitiveStatus();this.yt.emitParentRecordingContextChange({isRecording:!0,useAnonymization:t.useAnonymization})}}U(){return this.qu}NC(){this.E.register(oA,()=>{this.yt.emitStartAnalytics(),this.yt.emitStartRecording()},{disableApplyPending:!0}),this.E.register(aA,()=>this.yt.emitStopRecording(),{disableApplyPending:!0})}OC(t){this.pi.sendToParent(P.Assets,{assets:[t]})}mo(t){t.length!==0&&this.pi.sendToParent(P.Assets,{assets:t})}}return s})(),lA=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p,u,y,m,v){this.f=t,this.M=e,this.he=i,this.S=r,this.C=o,this.Ms=c,this.E=l,this.hi=h,this.Et=p,this.w=u,this.Xt=y,this.J=m,this.ot=v}init(){let t=[],e=this.Ms.getRecordingContext();this.Jr=new tu(!!e.useAnonymization,this.f.whitelistedAttributes,this.M,this.f.anonymizeDigits);let i=[];csArray.prototype.push.call(i,new Qh,this.Jr,new su(this.J)),csArray.prototype.push.call(i,new iu);let r=new Au;if(csArray.prototype.push.call(t,r),yt.isSupported()&&!!this.f.encryptionPublicKey&&this.f.encryptionPublicKeyId>0){let p=new eu(this.f.encryptionPublicKeyId.toString());csArray.prototype.push.call(i,p)}!this.Et.isInWebViewContext()&&this.f.useStaticResourceManager&&li.isSupported()&&(this.Wt=new li,csArray.prototype.push.call(i,this.Wt),this.xe=new gu,this.Wu=new tA(this.xe,this.C),this.Wu.init()),this.Gi=new wu,this.Gi.init(),csArray.prototype.push.call(t,this.Gi),csArray.prototype.push.call(t,new vu(window.location,this.M));let o=[this.he,new Jh,new Eu(csArray.prototype.filter.call(t,h=>h)),new cu,new lu,new uu,new ou(this.ot)];this.f.textVisibilityEnabled&&(this.Qr=new Zh,csArray.prototype.push.call(o,this.Qr));let c=new fu(o,i),l=new yu(c,this.S,this.xe);if(this.fi=new Zb(this.f,this.ot,this.C,l,t,this.Wt),this.E.register(Tu,()=>this.Ms.getRecordingContext().isRecording),this.E.register(Ru,()=>this.fi.getStaticResourceManagerStatus()),this.fi.init(),this.Et.isInWebViewContext()){let h=new pd(new dd);this.Yu=new cA(this.f,this.hi,r,this.C,h,this.E,this.w,this.Xt),this.hi.addListener(this.Yu),this.S.addListener(this.Yu),this.Yu.init()}}onParentRecordingContextChange(t){var e,i;t.useAnonymization!==void 0&&this.$i(t.useAnonymization),t.enableOnlineResourcesOnNextPageview!==void 0&&this.fi.setOnlineAssetsEnabledOnNextStart(t.enableOnlineResourcesOnNextPageview),t.isRecording?(this.Wh(),this.fi.setEnableOnlineAssets(t.enableOnlineResources),this.fi.start(),(e=this.Wu)===null||e===void 0||e.start()):(this.fi.stop(),(i=this.Wu)===null||i===void 0||i.stop())}onInitialDomStart(){}onInitialDomDone(t){this.Gi.start(),this.fi.addInitialDom(t)}$i(t){var e;this.Jr.setAnonymization(t),(e=this.Qr)===null||e===void 0||e.setAnonymization(t)}onOptout(){this.fi.stop()}Wh(){var t,e,i,r;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(r=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;W(o,c=>{Pt(c)&&se.setShadowRootFilter(l=>{try{return Vt.call(l.host,c)}catch{return!1}})})}}}return s})(),hA=(()=>{class s{constructor(t,e){this.pi=t,this.cy=e}init(){this.pi.onWebViewEvent((t,e)=>{this.cy.emitWebviewEventToBridge(t,e)})}onStartTracking(){this.pi.start()}onOptout(){this.pi.stop()}onStartAnalytics(){this.pi.setAnalyticsStatus(!0)}onStopAnalytics(){this.pi.setAnalyticsStatus(!1)}onParentRecordingContextChange(t){this.cy.setSessionReplayStatus(t.isRecording)}}return s})(),ce=(()=>{let s;return function(n){n[n.PAGE_VIEW=4]="PAGE_VIEW",n[n.TAP=6]="TAP",n[n.LONG_PRESS=8]="LONG_PRESS",n[n.DRAG=9]="DRAG",n[n.FLICK=10]="FLICK",n[n.DETAILED_API_ERROR=13]="DETAILED_API_ERROR",n[n.JAVASCRIPT_ERROR_SR=19]="JAVASCRIPT_ERROR_SR",n[n.CUSTOM_ERROR_SR=20]="CUSTOM_ERROR_SR",n[n.API_ERROR=21]="API_ERROR",n[n.CUSTOM_ERROR_AN=25]="CUSTOM_ERROR_AN",n[n.JAVASCRIPT_ERROR_AN=26]="JAVASCRIPT_ERROR_AN",n[n.SUBMIT=27]="SUBMIT",n[n.CHANGE=28]="CHANGE"}(s||(s={})),s})(),uA=(()=>{class s{constructor(){this.ks=1}transformEvent(t){switch(t.type){case z.CHANGE:{let e={version:this.ks,type:ce.CHANGE,data:{path:t.tgt}};return jr(t)&&(e.data.hrchy=t.hrchy),e}case z.SUBMIT:{let e={version:this.ks,type:ce.SUBMIT,data:{path:t.tgt}};return jr(t)&&(e.data.hrchy=t.hrchy),bc(t)&&(e.data.text=t.text),e}case z.TAP:{let e={version:this.ks,type:ce.TAP,data:{path:t.tgt}};return jr(t)&&(e.data.hrchy=t.hrchy),bc(t)&&(e.data.text=t.text),e}case z.DRAG:{let e=t;return{version:this.ks,type:ce.DRAG,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}case z.FLICK:{let e=t;return{version:this.ks,type:ce.FLICK,data:{path:e.tgt,direction:e.fd,distance:e.distance,velocity:e.velocity}}}default:return null}}}return s})(),dA=(()=>{class s{constructor(t,e,i,r){this.w=t,this.ge=e,this.fe=i,this.Ks=r,this.ks=1}transformEvent(t,e){switch(t){case P.ApiError:case P.DetailedApiError:{let i=this.fe.anonymize(e);return{version:this.ks,data:i}}case P.JavascriptError:{let i={...e,pageUrl:this.w.getAnonymizedUrl()},r=this.ge.anonymize(i);return{version:this.ks,data:{...r,date:I.now()}}}case P.CustomError:{let i=e;return i.message=this.Ks.anonymize(i.message),{version:this.ks,data:{...i,date:I.now()}}}default:return null}}}return s})(),pA=2,vt=(()=>{let s;return function(n){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}n.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let w=window.CSJavascriptBridge.getVersion();if(wt(w))return w}catch{x.warn("an error occurred when calling getVersion")}return null}n.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}n.notifyIsReadyForTracking=i;function r(w,S){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(w,csJSON.stringify(S))}n.identify=r;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}n.resetIdentity=o;function c(w){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(w))}n.addUserProperties=c;function l(w){window.CSJavascriptBridge.sendEvent(csJSON.stringify(w))}n.sendAnalysisEvent=l;function h(w){if(window.CSJavascriptBridge.sendSREvent)for(let S of w.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(S))}n.sendSREvent=h;function p(w){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(w))}n.sendLog=p;function u(){window.CSJavascriptBridge.optIn()}n.sendOptIn=u;function y(){window.CSJavascriptBridge.optOut()}n.sendOptOut=y;function m(w,S){window.CSJavascriptBridge.sendDynamicVar(w,S)}n.sendDynamicVariable=m;function v(w,S,C){window.CSJavascriptBridge.sendTransaction(w,S,C)}n.sendTransaction=v;function N(w,S){if(window.CSJavascriptBridge.sendAssets){let C=csJSON.stringify(w);window.CSJavascriptBridge.sendAssets(C,S||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(w,C=>C.assetId))}n.sendAssets=N;function D(w){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(w))}n.sendNativeSREvent=D}(s||(s={})),s})(),fA=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.ly=t,this.ss=e,this.MC=i,this.ac=r,this.$n=o,this.S=c,this.w=l,this.pt=h,this.Xu=!1}async emitWebviewEventToBridge(t,e){switch(t){case P.AnalysisEvent:{let i=this.MC.transformEvent(e.event);i&&vt.sendAnalysisEvent(i);break}case P.RecordingEvent:vt.sendSREvent(e);break;case P.ChildLogMessage:vt.sendLog(e);break;case P.Commands:x.tryToExecute(`SDKMessageUtils.sendMessage.sendCommandMessage: ${e}`,()=>{this.kC(e)})();break;case P.Assets:{let{assets:i,serializationId:r}=e,o=await this.$n.getTransformedAssets(i,r);vt.sendAssets(o,r);break}case P.JavascriptError:{let i=this.ac.transformEvent(P.JavascriptError,e);i&&(this.Xu&&vt.sendNativeSREvent({...i,type:ce.JAVASCRIPT_ERROR_SR}),vt.sendAnalysisEvent({...i,type:ce.JAVASCRIPT_ERROR_AN}));break}case P.ApiError:{let i=this.ac.transformEvent(P.ApiError,e);i&&(vt.sendAnalysisEvent({...i,type:ce.API_ERROR}),q.counters.networkRequests.count("collected"));break}case P.DetailedApiError:{let i=this.ac.transformEvent(P.DetailedApiError,e);i&&(vt.sendNativeSREvent({...i,type:ce.DETAILED_API_ERROR}),q.counters.networkRequests.count("collected"));break}default:break}}setSessionReplayStatus(t){this.Xu=t}kC(t){let e=t.commands;for(let i of e)switch(!0){case csArray.prototype.indexOf.call(Hu,i.name)>=0:vt.sendOptIn();break;case csArray.prototype.indexOf.call(Sa,i.name)>=0:this.S.emitOptout(),vt.sendOptOut();break;case csArray.prototype.indexOf.call(an,i.name)>=0:this.DC(i);break;case csArray.prototype.indexOf.call(pr,i.name)>=0:this.xC(i);break;case csArray.prototype.indexOf.call(cn,i.name)>=0:this.hy(i);break;case csArray.prototype.indexOf.call(mi,i.name)>=0:break;case csArray.prototype.indexOf.call(ln,i.name)>=0:this.Ja();break;case csArray.prototype.indexOf.call(hd,i.name)>=0:this.hy(i),this.Ja();break;case csArray.prototype.indexOf.call(zi,i.name)>=0:this.pt.addUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(Er,i.name)>=0:this.pt.addPartialUrlMaskingPattern(i.params[0]);break;case csArray.prototype.indexOf.call(ma,i.name)>=0:this.pt.resetPartialUrlMaskingPatterns();break;case csArray.prototype.indexOf.call(js,i.name)>=0:this.LC(i);break;case csArray.prototype.indexOf.call(Fi,i.name)>=0:this.UC(i);break;case csArray.prototype.indexOf.call(sa,i.name)>=0:this.VC();break;case csArray.prototype.indexOf.call($i,i.name)>=0:this.jC(i);break;default:x.warn(`WebviewBridgeEventEmitter received an unknown command: ${csJSON.stringify(i)}`);break}}UC(t){if(t.params.length<1||t.params.length>2)return;let e=t.params[0],i=t.params[1];if(!Qn.isValidIdentity(e)){x.error(`Command misuse: ${Fi[0]}`);return}let r=Qn.parseIdentityOptionsHash(i);vt.identify(e.toString(),{hash:r})}VC(){vt.resetIdentity()}jC(t){if(t.params.length!==1)return;let e=t.params[0];if(!Zn.isValidProperties(e)){x.error(`Command misuse: ${$i[0]}`);return}let i=Zn.sanitizeProperties(e);vt.addUserProperties(i)}DC(t){if(t.params.length!==1)return;let e=t.params[0];if(!(!Jt(e)||!("key"in e)||!("value"in e))&&Di.isKeyValid(e.key)&&Di.isValueValid(e.value)){let i=this.ly.anonymizePII(e.key),r=Ge(e.value)?e.value:this.ly.anonymizePII(e.value);vt.sendDynamicVariable(i,r)}}xC(t){if(t.params.length!==1)return;let e=t.params[0];if(T(e)){let i={type:ce.PAGE_VIEW,version:1,data:{url:e}};this.w.overridePath(e),this.S.emitArtificialPageViewEnd(),vt.sendAnalysisEvent(i),this.S.emitAfterArtificialPageView()}}hy(t){if(t.params.length!==1)return;let[e]=t.params;e.value&&(e.revenue=e.value),this.ss.addTransaction(e)}Ja(){let t=this.ss.getTransaction();Co.isValid(t)&&(vt.sendTransaction(t.id?t.id:null,t.revenue,t.currency?t.currency:""),this.ss.clear())}LC(t){if(t.params.length<1)return;let e=t.params[0],i=t.params[1]||{};if(!(T(e)&&Jt(i)))return;let r=la.buildCustomErrorEvent(e,i),o=this.ac.transformEvent(P.CustomError,r);o&&(this.Xu&&vt.sendNativeSREvent({...o,type:ce.CUSTOM_ERROR_SR}),vt.sendAnalysisEvent({...o,type:ce.CUSTOM_ERROR_AN}))}}return s})();var gA="REMOTE_ASSET",fl="LOCAL_ASSET",mA="UNKNOWN_ASSET_TYPE",xo="NONE",gd="ONLY_LOCAL_ASSETS",Lo="ALL",yA=(()=>{class s{constructor(t){var e,i;this.HC=t,this.Ku=new Set,this.cc=xo;try{let r=(i=(e=window.CSJavascriptBridge)===null||e===void 0?void 0:e.getAssetTransformerMode)===null||i===void 0?void 0:i.call(e);(r===gd||r===Lo)&&(this.cc=r)}catch{}}setAssetProcessingMode(t){this.cc=t}async getTransformedAssets(t,e){if(this.cc===xo)return t;let i=[];for(let r of t){let o=r.assetId,c=this.BC(o);if(this.cc===Lo||c===fl){let l=o;if(this.FC(o,e)&&(l=this.$C(o,e)),this.Ku.has(l)){csArray.prototype.push.call(i,r);continue}try{let h=await this.HC.getAssetContent(o);if(this.Ku.has(l)){csArray.prototype.push.call(i,r);continue}csArray.prototype.push.call(i,{...r,retrievedAssetContent:h}),this.Ku.add(r.assetId)}catch(h){x.error(`an error occurred while getting data for asset: ${l}: ${h}`),csArray.prototype.push.call(i,r)}}else csArray.prototype.push.call(i,r)}return i}BC(t){let e=window.WEBVIEW_SERVER_URL||null;try{let{protocol:i}=new csURL(t);return i==="file:"||e&&csString.prototype.startsWith.call(t,e)?fl:gA}catch(i){x.error(`Error constructing URL (${t}"): ${i.message}`)}return mA}FC(t,e){return e&&Wn(t)||!1}$C(t,e){return`${t}#${e}`}}return s})(),EA=(()=>{class s{constructor(){this.GC=50*1024*1024,this.zC=30*1024*1024,this.Ju=0,this.Qu=!1,this.lc=new Map,this.kt=[]}async getAssetContent(t){let e=this.lc.get(t);return e||new Promise((i,r)=>{csArray.prototype.push.call(this.kt,{assetUrl:t,successCallback:i,errorCallback:r}),this.Qu||this.qC()})}async qC(){for(this.Qu=!0;this.kt.length>0;){let{assetUrl:t,successCallback:e,errorCallback:i}=csArray.prototype.shift.call(this.kt),r=this.lc.get(t);if(r){e(r);continue}try{let c=(await this.WC("GET",t,"blob")).target;if(c.status===200){let l=c.getResponseHeader("Content-Type"),h=Number(c.getResponseHeader("Content-Length"));if(h&&Number(h)>this.zC){let u=`asset is too big, size = ${h} bytes`;i(u);continue}let p=new csFileReader;p.onload=()=>{let y={data:csString.prototype.split.call(p.result,"base64,")[1],mimeType:l!=null?l:""};this.Ju+=h,this.Ju>this.GC&&(this.Ju=0,this.lc.clear()),this.lc.set(t,y),e(y)},p.onerror=()=>{i("Error converting XHR response to base64")},p.readAsDataURL(c.response)}else i(`error downloading ${t}: ${c.statusText}`)}catch(o){let c=`Error downloading resource ${t}: ${o.message}`;i(c)}}this.Qu=!1}WC(t,e,i){return new Promise(function(r,o){let c=new XMLHttpRequest;c.open(t,e),c.responseType=i,c.onload=r,c.onerror=o,c.send()})}}return s})();function SA(s,n){let t=hh({...n,async:!1}),e;return t(s,i=>e=i),e}var vA=(()=>{class s{constructor(t,e){this.C=t,this.zu=e,this.uy=new _u}YC(){let t=new Set;Ut(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{t.has(i)||(this.uy.scanElement(i),t.add(i))})}handleCommand(t){let e=t&&t.withAssets,i=[],r=new Set,o=new Set,c=[];e&&Do.isWebViewLocalAssetsSupported()?(this.uy.onScannedAsset(({type:p,asset:u})=>{p==="stylesheet"&&!o.has(u.assetId)&&(o.add(u.assetId),csArray.prototype.push.call(c,u)),r.has(u.assetId)||(r.add(u.assetId),csArray.prototype.push.call(i,u))}),this.YC()):Do.isWebViewLocalAssetsSupported()||x.warn("Local asset is not supported on this browser");let l=wA(),h=csJSON.stringify(l);if(e){let p=uh.generate();return this.XC(i,c,p),csJSON.stringify({serializedDom:h,serializationId:p})}return h}XC(t,e,i){e.length===0?this.mo(t,i):this.KC(t,e,i,(r,o)=>this.mo(r,o))}KC(t,e,i,r){let o=0,c=0,l=new Set(csArray.prototype.map.call(t,m=>m.assetId)),h=m=>!l.has(m),p=m=>{l.has(m.assetId)||(l.add(m.assetId),csArray.prototype.push.call(e,m),csArray.prototype.push.call(t,m))},u=m=>{for(let v of m)l.has(v.assetId)||(l.add(v.assetId),csArray.prototype.push.call(t,v));o++,o+c===e.length&&r(t,i)},y=m=>{c++,x.error("An error occurred while fetching a styleSheet: "+m),o+c===e.length&&r(t,i)};csArray.prototype.forEach.call(e,m=>{this.zu.getStyleSheetAssets(m.assetId,u,y,h,p)})}mo(t,e){this.C.sendToParent(P.Assets,{assets:t,serializationId:e})}}return s})();function wA(){return qm(),Gm(SA(document))}var _A=(()=>{class s{constructor(t){this.f=t,this.Zu=null}isSdkTrackingContext(t){return pt(t)&&Jt(t)&&T(t.sessionKey)&&Ge(t.pageNumber)&&T(t.pageViewType)&&Ui(t.isRecording)}update(t){if(!this.isSdkTrackingContext(t)){x.warn(`webViewTrackingContext.service received wrong sdkTrackingContext, content:${csJSON.stringify(t)}`),this.Zu=null;return}this.Zu={...t,recordingConsentState:Oi.NOT_NEEDED,projectId:this.f.projectId,uxaDomain:this.f.uxaDomain,...this.f.smbConfig}}getTrackingContext(){return this.Zu}}return s})(),bA=(()=>{class s{constructor(t){this.gi=t,this.se=[]}handleCommand(t){if(!$t(t))return;this.Mr(t);let e=this.gi.getTrackingContext();e!==null&&this.Ht(t,e)}executeRegisteredCallbacks(t){let e=t.trackingContext;e&&csArray.prototype.map.call(this.se,i=>this.Ht(i,e))}Mr(t){csArray.prototype.push.call(this.se,t)}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})(),AA=(()=>{class s{constructor(t,e){this.tt=t,this.gi=e}onIframeIntegrationCallback(t){let e=this.gi.getTrackingContext();e!==null&&(t.trackingContext=e,this.tt.sendToChildren(P.IntegrationCallback,t))}}return s})(),md=(()=>{class s{constructor(t){this.commandsService=t,this.Dr=new qh}registerChildCommands(){this.commandsService.register(Yh,t=>this.Dr.handleCommand(t,this.Gn))}onParentRecordingContextChange(t){this.Gn={isRecording:t.isRecording,recordingStartTimestamp:t.recordingStartTimestamp||0,etrState:t.etrState||Kt.ETR_OFF},this.Dr.executeCallbacks(this.Gn)}}return B([Vs({wait:0,mode:"trailing"})],s.prototype,"onParentRecordingContextChange",null),s})(),TA=["serializeWebView","webview:serializeWebView"],RA=["setAssetTransformerMode","webview:setAssetTransformerMode"],CA=["webview:onAfterScreenView"],IA=(()=>{class s extends md{constructor(t,e,i,r,o,c,l){super(t),this.commandsService=t,this.C=e,this.tt=i,this.$n=r,this.JC=o,this.lt=c,this.f=l}init(){this.gi=new _A(this.f),this.QC=new AA(this.tt,this.gi),this.lt.addListener(this.QC),this.dy=new bA(this.gi);let t=new pd(new dd);this.ZC=new vA(this.C,t),this.ut()}onAfterPageViewCallback(t){this.dy.executeRegisteredCallbacks(t)}ut(){super.registerChildCommands(),this.commandsService.register(ur,t=>{this.dy.handleCommand(t)}),this.commandsService.register(CA,t=>{this.gi.update(t);let e=this.gi.getTrackingContext();e!==null&&this.JC.emitAfterPageViewCallback({initiator:ai.AfterPageView,trackingContext:e})}),this.commandsService.register(TA,t=>this.ZC.handleCommand(t)),this.commandsService.register(RA,t=>{(t===xo||t===gd||t===Lo)&&this.$n.setAssetProcessingMode(t)})}}return s})(),PA=(()=>{class s{constructor(t){this.C=t,this.se={}}handleCommand(t){$t(t)&&this.Mr(t)}executeRegisteredCallbacks(t){let e=t.trackingContext;if(e)if(t.callbackId){let i=this.se[t.callbackId];i&&this.Ht(i,e)}else for(let i in this.se)this.Ht(this.se[i],e)}Mr(t){let e=Oe.integer(),i={callbackId:e,initiator:ai.AfterPageView};this.se[e]=t,this.C.sendToParent(P.IntegrationCallback,i)}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})(),OA=(()=>{class s{constructor(t){this.C=t,this.Li={}}handleCommand(t){Jt(t)&&$t(t.callback)&&this.kr(t.callback)}executePendingCallbacks(t){let{trackingContext:e,callbackId:i}=t;if(!i||!e)return;let r=this.Li[i];r&&(delete this.Li[i],this.Ht(r,e.sessionKey))}kr(t){let e=Oe.integer(),i={callbackId:e,initiator:ai.GetSessionKey};this.Li[e]=t,this.C.sendToParent(P.IntegrationCallback,i)}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})(),NA=(()=>{class s{constructor(t,e){this.C=t,this.tt=e,this.hc={}}handleCommand(t,e){Jt(t)&&$t(e)&&this.kr(t,e)}executePendingCommand(t){let{trackingContext:e,callbackId:i}=t;if(!(!i||!e))if(this.hc[i]){let[r,o]=this.hc[i];r&&(delete this.hc[i],this.Ht(e,r,o))}else this.tt.sendToChildren(P.TrackingContextResultMessage,t)}kr(t,e){let i=Oe.integer();this.hc[i]=[t,e],this.C.sendToParent(P.TrackingContextRequestMessage,{callbackId:i})}Ht(t,e,i){csSetTimeout(()=>{let r=zh(t,e);i(r)})}}return s})(),MA=(()=>{class s extends md{constructor(t,e,i){super(t),this.commandsService=t,this.C=e,this.tt=i}init(){this.py=new PA(this.C),this.fy=new OA(this.C),this.gy=new NA(this.C,this.tt),this.ut()}onAfterPageViewCallback(t){this.py.executeRegisteredCallbacks(t)}onIntegrationSessionKeyCallback(t){this.fy.executePendingCallbacks(t)}onTrackingContextResultCallback(t){this.gy.executePendingCommand(t)}ut(){super.registerChildCommands(),this.commandsService.register(ur,t=>{this.py.handleCommand(t)}),this.commandsService.register(Wh,t=>this.fy.handleCommand(t)),this.commandsService.register(Xh,(t,e)=>{this.gy.handleCommand(t,e)})}}return s})(),kA=(()=>{class s{constructor(t,e,i,r,o,c,l){this.E=t,this.ht=e,this.he=i,this.Ft=r,this.ot=o,this.yo=c,this.xn=l}init(){var t,e;this.yo&&this.ot&&((t=this.yo)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ut(),this._e=new ga(this.he,this.ht,this.Ft,this.yo,this.xn)}Uo(){this._e.start()}Dh(){this._e.stop()}onParentSensitiveStatusChange(t){var e,i;t.maskedElementSettings&&this.ht.setMaskedElementSettingsFromParent(t.maskedElementSettings),t.capturedElementSelector&&this.Ft.setWhitelistedElementsSelector(t.capturedElementSelector,!1),t.encryptionSelectors&&((e=this.yo)===null||e===void 0||e.addSelector(t.encryptionSelectors),(i=this.ot)===null||i===void 0||i.setEncryptionSelectors(t.encryptionSelectors,!1)),t.started?this.Uo():this.Dh()}ut(){this.E.register(yr,t=>{this.Ft.setWhitelistedElementsSelector(t)}),this.E.register(hn,t=>{this.ht.setMaskedElementSettingsFromCommand(t)}),this.E.register(mr,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.yo)===null||i===void 0||i.addSelector(t)})}}return s})(),DA=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.S=t,this.E=e,this.ht=i,this.he=r,this.it=o,this.Ft=c,this.Xt=l,this.xn=h,this._e=new ga(this.he,this.ht,this.Ft,void 0,this.xn,this.it)}init(){this.it.init(),this.ut()}onStartAnalytics(){this.Vn()}onAfterArtificialPageView(){this.my(),this.Vn()}onStopAnalytics(){this.my()}Vn(){this._e.start(),this.Xt.setSensitiveStatus({started:!0,useAnonymization:this.it.shouldUseAnonymization()}),this.S.emitSensitiveStatusChange()}my(){this._e.stop(),this.Xt.setSensitiveStatus({started:!1,useAnonymization:this.it.shouldUseAnonymization()}),this.S.emitSensitiveStatusChange()}ut(){this.E.register(yr,t=>{this.Ft.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(hn,t=>{this.ht.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()})}}return s})(),xA=(()=>{class s{constructor(t,e,i,r,o,c,l,h,p){this.yt=t,this.S=e,this.f=i,this.C=r,this.Ms=o,this.E=c,this.Et=l,this.I=h,this.Xt=p,this.Ya=()=>{this.E.start(),this.Un.start()}}start(){let t,e,i,r,o,c,l,h,p,u,y,m,v,N,D,w;this.I.schedule(()=>{if(o=new ad,c=new Yl(()=>{}),v=new Xl,w=new Kl,yt.isSupported()){let S=!!this.f.encryptionPublicKey&&this.f.encryptionPublicKeyId>0,k=gr.create(x.warn,!1);S&&(D=new Jl,N=new Cu(this.f,k))}if(this.Et.isInIframeContext()){let S=new kA(this.E,o,c,v,N,D,w);S.init(),this.yt.addListener(S)}if(i=new Ls,u=new cd(i),y=new Gu(window.location,u),this.Et.isInWebViewContext()){let S=new fd(this.f),C=new sn,k=new ta(this.f,y,C,S),_=new DA(this.S,this.E,o,c,k,v,this.Xt);_.init(),this.yt.addListener(_),this.S.addListener(_)}}),this.I.schedule(()=>{t=new qu(Ie,this.f),e=new ih(t),r=new Qb(this.f,t,e,this.C,this.Et,this.yt,this.E,new th(x),this.Xt),this.yt.addListener(r)}),hi.isRecordingSupported()&&this.I.schedule(()=>{let S=new lA(this.f,i,c,this.S,this.C,this.Ms,this.E,this.yt,this.Et,y,this.Xt,u,N);this.S.addListener(S),this.yt.addListener(S),S.init()}),this.I.schedule(()=>{p=new eh(this.f);let S=new Wu(t,this.f.isChild),C=new Yu(t),k=new Xu(t),_=new Ku;h=new zu(S,C,k,_),l=new Yb(p,h,this.C,this.Ms,this.Xt)}),this.I.schedule(()=>{h.addListener(l),this.yt.addListener(l),this.S.addListener(l),this.S.addListener(r)}),this.I.schedule(()=>{let S;if(this.Et.isInWebViewContext()){let C=new EA;this.$n=new yA(C),S=new IA(this.E,this.C,p,this.$n,this.yt,h,this.f)}else S=new MA(this.E,this.C,p);this.yt.addListener(S),S.init()}),this.I.schedule(()=>{l.init(),r.init()}),this.I.schedule(()=>{var S,C,k,_;if(this.Et.isInWebViewContext()){let F=new uA,Q=new Bh(i,y),ot=new ya,jt=new kh(ot,u,!!(!((C=(S=this.f)===null||S===void 0?void 0:S.experimental)===null||C===void 0)&&C.anonymizeNameInUrls)),kt=new Vh(i,!((_=(k=this.f)===null||k===void 0?void 0:k.experimental)===null||_===void 0)&&_.anonymizeNameInUrls?u:void 0),b=new dA(y,Q,jt,kt),V=new fA(i,new $h(i,null,null),F,b,this.$n,this.S,y,ot),j=new hA(this.C,V);j.init(),this.S.addListener(j),this.yt.addListener(j)}else{let F=new Wb(this.C);this.S.addListener(F)}}),this.Un=new gh,this.I.schedule(()=>{this.Un.onLoad(()=>{this.S.emitStartTracking()}),this.Ya()})}}return s})(),LA=2500,UA=500,VA=(()=>{class s extends ud{constructor(t,e,i=UA){super(LA),this.yt=t,this.f=e,this.tI=i,this.Yi=!1,this.pc=void 0,this.td=!0}onStart(){this.eI()}onStop(){this.buffer.reset(),this.sd&&window.csClearInterval(this.sd)}sendToParent(t,e){var i;if(this.sI()){(i=this.nd)===null||i===void 0||i.call(this,t,e);return}if(this.iI(t)){let r=this.buildChildBaseMessage(t,e);this.buffer.addMessage(r)}}sI(){return this.Yi&&this.td}iI(t){return!this.Yi||t===P.Commands}onWebViewEvent(t){this.nd=t}setAnalyticsStatus(t){this.td=t,this.td&&this.nI()}sendAllMessagesFromBuffer(){var t;let e=this.buffer.getMessages();for(let i of e)(t=this.nd)===null||t===void 0||t.call(this,i.type,i.content);this.buffer.reset()}nI(){var t;if(!this.Yi)return;let e=this.buffer.getMessages();for(let i of e)i.type===P.Commands&&((t=this.nd)===null||t===void 0||t.call(this,i.type,i.content));this.buffer.reset()}buildChildBaseMessage(t,e){return{type:t,content:e}}eI(){this.Yi=vt.isCSJavascriptBridgeDefined(),this.Yi?this.yy():this.sd=window.csSetInterval(()=>{this.Yi=vt.isCSJavascriptBridgeDefined(),this.Yi&&(this.yy(),window.csClearInterval(this.sd))},this.tI)}yy(){this.rI(),this.pc=vt.getBridgeVersion(),this.pc===null?this.sendAllMessagesFromBuffer():this.pc>=pA?(this.oI(),vt.notifyIsReadyForTracking()):x.warn(`bridge version ${this.pc} is not supported`)}rI(){let t={message:csJSON.stringify(this.f),errorCode:"TAG_CONFIGURATION",level:ut.critical};vt.sendLog(t)}oI(){this.yt.emitStopAnalytics()}}return s})(),jA=(()=>{class s{constructor(){this.Gn=null}getRecordingContext(){return this.Gn===null?{isRecording:!1}:this.Gn}setRecordingContext(t){this.Gn=t}}return s})(),HA=(()=>{class s extends ht{constructor(t,e){super(),this.ft=t,this.C=e}onStart(){this.ft.subscribe(s.jt,t=>this.Q(t))}onStop(){this.ft.unsubscribe(s.jt)}Q(t){this.isStarted&&this.C.sendToParent(P.ApiError,t)}}return s.jt="ChildApiErrorsService",s})(),BA=(()=>{class s extends ht{constructor(t,e){super(),this.ft=t,this.C=e}onStart(){this.ft.subscribe(s.jt,t=>this.Q(t),{detailedEvent:!0})}onStop(){this.ft.unsubscribe(s.jt)}Q(t){this.isStarted&&this.C.sendToParent(P.DetailedApiError,t)}}return s.jt="ChildDetailedApiErrorsService",s})(),FA=(()=>{class s{constructor(t,e,i){this.f=t,this.C=e,this.Y=i}init(){let t=new Ls,e=new Dh(this.f.apiErrors,t);this.ft=new Mh(new fh,new ph,e),this.fc=new HA(this.ft,this.C),this.rd=new BA(this.ft,this.C),this.ft.init(),this.ut()}ut(){this.Y.register(zi)}onStartTracking(){this.fc.start()}onParentRecordingContextChange(t){t.isRecording?this.rd.start():this.rd.stop()}onOptout(){this.fc.stop(),this.rd.stop()}onStartAnalytics(){this.fc.start()}onStopAnalytics(){this.fc.stop()}}return s})(),$A=(()=>{class s extends ht{constructor(t,e){super(),this.Ts=t,this.C=e}onStart(){this.Ts.subscribe(s.jt,t=>this.Q(t))}onStop(){this.Ts.unsubscribe(s.jt)}Q(t){this.isStarted&&this.C.sendToParent(P.JavascriptError,t)}}return s.jt="ChildJavaScriptErrorsService",s})(),GA=(()=>{class s{constructor(t,e,i){this.f=t,this.C=e,this.Y=i}init(){let t=new Hh;this.gc=new $A(t,this.C),this.ut()}onStartTracking(){this.gc.start()}onOptout(){this.gc.stop()}onStartAnalytics(){this.gc.start()}onStopAnalytics(){this.gc.stop()}ut(){this.f.jsCustomErrorsEnabled&&!this.f.customErrors.enabled&&this.Y.register(js)}}return s})(),zA=(()=>{class s extends ht{constructor(t,e){super(),this.C=t,this.As=e}init(){this.As.onEvent(t=>this.Q(t))}onStart(){this.As.start()}onStop(){this.As.stop()}Q(t){this.isStarted&&this.C.sendToParent(P.CustomError,t)}}return s})(),qA=(()=>{class s{constructor(t,e,i){this.f=t,this.C=e,this.Y=i}init(){var t;if(!((t=this.f.customErrors.consoleMessageLogLevels)===null||t===void 0)&&t.length){let e=new Uh(this.f);this.Eo=new zA(this.C,e),this.Eo.init()}this.ut()}onStartTracking(){var t;(t=this.Eo)===null||t===void 0||t.start()}onOptout(){var t;(t=this.Eo)===null||t===void 0||t.stop()}onStartAnalytics(){var t;(t=this.Eo)===null||t===void 0||t.start()}onStopAnalytics(){var t;(t=this.Eo)===null||t===void 0||t.stop()}ut(){this.Y.register(js)}}return s})(),WA=(()=>{class s{constructor(){this.mc={started:!1,useAnonymization:!0}}getSensitiveStatus(){return this.mc}setSensitiveStatus(t){this.mc=t}getElementSensitiveStatus(t){return this.mc.started?L.isMaskedElement(t)||L.isMaskedElementChild(t)?zt.MASKED:le.shouldEncrypt(t)?zt.ENCRYPTED:Te.isEditableNode(t)?zt.ANONYMIZED:this.mc.useAnonymization?Ee.isWhitelistedElement(t)?zt.CAPTURED:zt.ANONYMIZED:zt.CAPTURED:zt.ANONYMIZED}}return s})(),YA=(()=>{class s{constructor(t,e,i){this.f=t,this.Et=e,this.I=i}init(){this.f.isChild=!0,yt.isSupported()&&(this.f.encryptionPublicKey&&yt.importKey(this.f.encryptionPublicKey),yt.setDigestSalt(this.f.projectId.toString()));let t,e,i,r,o,c,l,h,p;this.I.schedule(()=>{t=new ld(this.I),e=new Hb,i=new jA,r=new WA;let u=[Oo.UXA];this.Et.isInWebViewContext()?(window.cs_wvt=window.cs_wvt||[],csArray.prototype.push.call(u,Oo.WVT),o=new VA(e,this.f)):o=new qb(this.f,t,i,r,e),c=new Bu(u)}),this.I.schedule(()=>{l=new Fb(c,o),h=new Bb(l)}),this.I.schedule(()=>{h.init()}),this.I.schedule(()=>{this.f.implementations&&(p=new rd(this.f.implementations,c,this.I),p.init(),t.addListener(p))}),this.I.schedule(()=>{if(this.f.apiErrors.enabled){let u=new FA(this.f,o,l);u.init(),t.addListener(u),e.addListener(u)}if(this.f.jsErrorsEnabled){let u=new GA(this.f,o,l);u.init(),t.addListener(u),e.addListener(u)}if(this.f.customErrors.enabled){let u=new qA(this.f,o,l);u.init(),t.addListener(u),e.addListener(u)}}),this.I.schedule(()=>{t.addListener(h)}),this.I.schedule(()=>{t.emitInitTracking()}),this.I.schedule(()=>{new xA(e,t,this.f,o,i,c,this.Et,this.I,r).start()})}}return s})();var XA=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),KA=(()=>{class s{constructor(t,e,i){this.f=t,this.Et=e,this.gs=i}start(){var t,e,i,r,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.f.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new XA,l=new bu(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new Vg(this.Et,this.f);h.init();let p=new Hg(this.f,h);if(this.Et.isTopWindowTracker()&&p.canTrack()){if(!((r=window.CSProtectnativeFunctionsLogs)===null||r===void 0)&&r.Warning&&x.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){x.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Lg();let y=new ld(l),m=new Mb(this.f,h,this.gs,l,y,c);this.f.isQuotaEnabled()?m.initWithQuota():m.init()}else!this.Et.isTopWindowTracker()&&p.canTrackInChild()&&new YA(this.f,this.Et,l).init();let u=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(y){return L.isMaskedElement(y)||L.isMaskedElementChild(y)},isAttributeSensitive(y,m){return L.isMaskedAttribute(y,m)},getSensitiveAttributes(y){return Hi(y.attributes,m=>L.isMaskedAttribute(y,m.name))}},Console:{warn(y){u&&console.warn("cs.tracking.warning",y)},error(y){u&&console.error("cs.tracking.error",y)}},Version:Ul},window.CSFrameCommunication||(window.CSFrameCommunication=kn,kn.isActivable()&&kn.waitForConnection(),this.f.isCsCrosswritingHeap()&&kn.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return B([Ot("main.start"),O("main.start")],s.prototype,"start",null),s})(),JA=(()=>{class s{constructor(){}send(t,e,i=ut.warn){let r={message:t,errorCode:e,level:i};vt.sendLog(r)}}return s})();var QA=(()=>{class s{constructor(t,e,i){this.W=t,this.M=e,this.yI=i,this.kt=[],this.EI=Ko().v}flush(){this.kt.length!==0&&(this.W.send({m:csArray.prototype.map.call(this.kt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.M.anonymizePII(window.location.pathname),pid:this.yI,v:this.EI}),this.kt=[])}push(t){csArray.prototype.push.call(this.kt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,B([Wp(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function ZA(s,n){let t=s.validationRate/10,e=Oe.boolean(t);if((s.environment==="staging"||!1||e)&&!n.isInWebViewContext())try{let o=gr.create(x.warn,n.isTopWindowTracker()),l=new Fl(o).create(s.getMetricsUri(),!0),h=new Ls,p=new QA(l,h,s.projectId);q.setService(p)}catch(o){x.warn(`Error initializing metrics: ${o.message}`)}}function tT(){var s;sf();let n=new og(window.CS_CONF);window._uxa=window._uxa||[],n.processOptionOverrides(window._uxa);let t=new ag(window,n);t.init();let e=new Ng;if($p(x),Mg(),x.computeIsActive(n.validationRate),t.isTopWindowTracker()){let o=new Cg(n,e);x.setStrategy(o)}else if(t.isInIframeContext()){let r=new Og(n);x.setStrategy(r)}else if(t.isInWebViewContext()){let r=new JA;x.setStrategy(r)}!((s=n==null?void 0:n.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=ks(window,"MutationObserver")),Ff(),ZA(n,t),new KA(n,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{kg(tT)}catch{}});})();

// signature-7352a0986a0a9fd59da742298e28b12a4248bf21472d914adf271557bb9357c0